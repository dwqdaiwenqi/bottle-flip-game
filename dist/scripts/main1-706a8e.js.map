{"version":3,"sources":["webpack://TiaoYiTiao/webpack/universalModuleDefinition","webpack://TiaoYiTiao/webpack/bootstrap","webpack://TiaoYiTiao/../node_modules/miku-tween/index.js","webpack://TiaoYiTiao/./src/texture_manager.js","webpack://TiaoYiTiao/./src/freecamera.js","webpack://TiaoYiTiao/../node_modules/style-loader/lib/addStyles.js","webpack://TiaoYiTiao/../node_modules/css-loader/lib/css-base.js","webpack://TiaoYiTiao/./src/common/img/score-2.png","webpack://TiaoYiTiao/./src/common/img/score-1.png","webpack://TiaoYiTiao/./src/common/img/floor2.jpg","webpack://TiaoYiTiao/./src/common/img/game-board2.jpg","webpack://TiaoYiTiao/./src/common/img/game-board1.jpg","webpack://TiaoYiTiao/./src/common/img/board1.jpg","webpack://TiaoYiTiao/./src/common/img/boarde.jpg","webpack://TiaoYiTiao/./src/common/img/boardb.jpg","webpack://TiaoYiTiao/../node_modules/webpack/buildin/module.js","webpack://TiaoYiTiao/./src/detector.js","webpack://TiaoYiTiao/./src/billboard.js","webpack://TiaoYiTiao/./src/chessman.js","webpack://TiaoYiTiao/./src/infinity_element.js","webpack://TiaoYiTiao/./src/tree.js","webpack://TiaoYiTiao/./src/cube.js","webpack://TiaoYiTiao/./src/tiaoyitiao.less","webpack://TiaoYiTiao/./src/tiaoyitiao.less?60ae","webpack://TiaoYiTiao/./src/tiaoyitiao.js","webpack://TiaoYiTiao/../node_modules/miku-tween/dist/tween.js","webpack://TiaoYiTiao/../node_modules/miku-util/dist/main.js","webpack://TiaoYiTiao/../node_modules/miku-util/index.js","webpack://TiaoYiTiao/../node_modules/style-loader/lib/urls.js","webpack://TiaoYiTiao/./src/main1.less","webpack://TiaoYiTiao/./src/main1.less?980a","webpack://TiaoYiTiao/./src/main1.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TextureManager","initial","results","_this","this","groups","keys","map","group","Promise","all","loader","THREE","TextureLoader","crossOrigin","load","texture","then","res","_handle_complete","onComplate","fn","_mikuUtil","_ref","camera","_ref$el","el","undefined","_ref$mw","mw","_ref$mh","innerWidth","mh","_ref$keycode_move","innerHeight","keycode_move","_ref$range","range","the","fai","behavior","rotate","position","φ","θ","x","y","z","_","defineProperties","update","transition","Walk","PI","v3_look","Vec","sin","cos","v3_look_right","v3_look_up","cross","v3_camera","set","v","add","lookAt","Vector3","movingPath","_ref2","time","slerp","v3","complete_fn","_ref3","arguments","length","bit_dist","_ref3$time","until","rad","dot","slp","v0","v1","α","β","eachPos","pos","tangent","deg","Slerp","TWEEN","Tween","to","onStart","bv","onUpdate","_ref4","t1","t2","onComplete","start","complete","v3_look_back","v3_look_left","v3_speed","speed","front","back","right","left","cancelDefualt","Array","from","console","wran","walkFront","run","walkBack","walkRight","walkLeft","a","phi","b","mp","code_mp","87","83","65","68","forEach","clone","scale","k1","k2","bx","by","delta_x","delta_y","addEventListener","e","pageX","pageY","trigger","keyFn","keyCode","v3_key","type","FreeCamera","Cam","$","extend","K","MxEvent","stylesInDom","isOldIE","memo","apply","memoize","document","atob","getElement","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","item","domStyle","id","refs","j","parts","push","addStyle","listToStyles","list","newStyles","base","part","css","media","sourceMap","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","addAttrs","setAttribute","obj","remove","result","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","unescape","encodeURIComponent","JSON","stringify","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","replaceText","textStore","index","replacement","filter","Boolean","join","cssNode","childNodes","useSourceMap","toString","content","cssMapping","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","webpackPolyfill","deprecate","paths","children","Detector","canvas","CanvasRenderingContext2D","webgl","WebGLRenderingContext","getContext","workers","Worker","fileapi","File","FileReader","FileList","getWebGLErrorMessage","element","fontFamily","fontSize","fontWeight","textAlign","background","color","padding","width","margin","innerHTML","addGetWebGLMessage","parameters","parent","body","_typeof","pillar","Mesh","CylinderGeometry","MeshPhongMaterial","Color","setRGB","board_materials","_toConsumableArray","specular","cv_","height","drawImage","image","Texture","board","BoxGeometry","material","needsUpdate","geometry","applyMatrix","Matrix4","makeTranslation","visible","castShadow","receiveShadow","assign","fallDown","_ref2$delay","delay","that","_mikuTween2","default","easing","Easing","Cubic","In","_handle_fall","onFallEnd","comeOut","_ref3$delay","Status","co","transparent","opacity","SphereGeometry","holding","status","hold_coefficient","rotation","canHolding","canFlipping","_controlVertex","ty","onFilpEnd","_handle_flip_end","fewFlip","po_increments","f","len","flipping","po","isOutside","isStading","isDied","_ref2$rz","rz","stopToTop","tw_top1","stop","tw_top2","flipToTop","_this2","onPer","onFlipStart","_ref3$flip_dur","flip_dur","tw","tw2","Out","once","chain","dy","_this3","dur","statusx","target_o","bef","x_","y_","InfinityElement","Class","init","props","els","group_id","in_group_num","far","allow_far","handle_each_child","reset","scene","elForThatArea","po1","render","current_po","shift","log","trunk","MeshLambertMaterial","leaf","OctahedronGeometry","flip","_ref$delay","random","mesh","_ref$goods","goods","_ref$height","billboard_map","billboard","setHSL","Math","flatShading","billborad_","displayGoods","setTimeout","alert","cdk","goodsLookAt","hmr","locals","_texture_manager","_document$body","offsetWidth","offsetHeight","$game_container","on","preventDefault","Brower","version","mobile","transform-origin","appendTo","Event","opt","_super","_defineProperty","can_play","$container","status_msg","Api","_supportGl","_noGlForYou","_max_phase","_phase","score","_good_i","_request","can_update_camera","mesh_points","applyAxisAngle","num_of_game","current_grid","_keydown","Phases","_createStage","_restart","_getGameResult","_textures","_createActor","_createPhases","_run","_render","boards_small","boards_big","floor","points","_detector2","append","_noChance","_zoom","show","phase0","cubes","_cube2","_po1$po","po2","_infinity_tree","_infinity_ground","mesh_score","setScore","chessman","copy","phase1","_addScore","_ref$score","w","radiusBottom","dify","mesh_point","PlaneGeometry","MeshBasicMaterial","side","DoubleSide","_Phases","MoveToSpecialPo","FlipToHeight","mtsp","fth","execute","hidding","light","_po1$po2","Bounce","_po1$po3","po_chessman","_addBillBoard","active_fall","dx","rx","me","assignGoods","_setRandGoods","_this4","_infinity_element2","tree","_tree2","map_","ground","PlaneBufferGeometry","wrapS","wrapT","RepeatWrapping","repeat","_chessman2","effect_ring","RingBufferGeometry","Quadratic","_renderer$getSize","renderer","getSize","orth_scene","clearRect","font","fillText","hide","_renderer$getSize2","zoom","_this5","_ref3$delay2","delay2","_ref3$dur","itv","itv2","_this6","_ref4$position","_ref4$delay","_ref4$active_fall","_billboard2","_addNextGrid","_this7","_handel_next_grid","gap","min","_checkChessManOutSide","_this8","po_","max","intersects","Raycaster","intersectObjects","_intersects$","point","distance","_extends","point_center","sub","_trackChessMan","requestAnimationFrame","animate","clear","clearDepth","orth_camera","_ref5","Scene","PerspectiveCamera","WebGLRenderer","antialias","autoClear","setClearColor","setSize","OrthographicCamera","shadowMap","enabled","PCFSoftShadowMap","domElement","fog","FogExp2","ambientLight","AmbientLight","dirLight","DirectionalLight","shadow","mapSize","top","bottom","near","bias","DirectionalLightHelper","_tweens","getAll","removeAll","tween","preserve","now","Date","getTime","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","field","parseFloat","properties","duration","stopChainedTweens","end","numChainedTweens","amount","times","repeatDelay","yoyo","interpolation","callback","onStop","elapsed","charAt","isFinite","tmp","k","InOut","Quartic","Quintic","Sinusoidal","Exponential","pow","Circular","sqrt","Elastic","Back","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","Det2","Det3","equalNum","abs","Number","EPSILON","equal","normal","_scale","vec","vertical","cross_v2","rotateY","radian","cosine","sine","rotateX","rotateZ","atan2","det","ar","nar","D","ar1","ar2","parse","ar3","evs","trim","args","slice","off","KeepEvent","ex_map","ex","ss","split","attr","cb","_$","isFunction","exLoop","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","test","_tiaoyitiao2"],"mappings":"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","file":"scripts/main1-706a8e.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TiaoYiTiao\"] = factory();\n\telse\n\t\troot[\"TiaoYiTiao\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"//static.xyimg.net/gamesite/mu/mufed/bottle-flip-game/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n","\nmodule.exports = require('./dist/tween.js');","\r\nvar TextureManager = {\r\n  initial(results){\r\n\r\n    var groups = \tObject.keys(results).map(s=>{\r\n      var group = results[s];\r\n\r\n      return Promise.all(  group.map( (s,i) =>{\r\n\r\n        return new Promise(r=>{\r\n\r\n          var loader = new THREE.TextureLoader();\r\n          loader.crossOrigin = '*';\r\n          loader.load(s,texture=>{\r\n            r(texture);\r\n\r\n          });\r\n\r\n          })\r\n\r\n        })\r\n\r\n      ).then(res=>{\r\n        \r\n        results[s] = res;\r\n        \r\n        return new Promise(r=>{\r\n          r(res);\r\n        })\r\n      \r\n      });\r\n    \r\n    });\r\n\r\n    Promise.all(groups).then(res=>{\r\n\r\n      this._handle_complete&&this._handle_complete(results);\r\n\r\n    });\r\n\r\n  }\r\n  ,onComplate(fn){\r\n    this._handle_complete = fn;\r\n  }\r\n}\r\n\r\nmodule.exports= {TextureManager};\r\n","import {Vec} from 'miku-util';\r\n\r\n{\r\n  // var str = ['x','y'];\r\n  //    var count = 0;\r\n  //    function arrange(s){\r\n  //     for(var i=0,length=str.length; i<length; i++) {\r\n  //      if(s.length == length - 1) {\r\n  //       if(s.indexOf(str[i]) < 0) {\r\n  //        count++;\r\n  //        console.log(\"\"+count+\"=\"+s + str[i]);\r\n  //       }\r\n  //       continue;\r\n  //      }\r\n       \r\n  //      if(s.indexOf(str[i]) < 0) { arrange(s+str[i]); }\r\n  //     }\r\n  //    }\r\n  //    arrange(\"\");\r\n  \r\n  const Slerp = (v0,v1,rad)=>{\r\n    var α,β;\r\n    var eachPos = (s,t)=>α*v0[s]+β*v1[s];\r\n    var _ = {\r\n      pos(t){\r\n        α = sin((1-t)*rad)/sin(rad);\r\n        β = sin(t*rad)/sin(rad);\r\n        return{\r\n          x : eachPos('x',t)\r\n          ,y : eachPos('y',t)\r\n          ,z : eachPos('z',t)\r\n        }\r\n      }\r\n      ,tangent(t){\r\n\r\n      }\r\n      ,v0,v1,rad\r\n      ,deg:rad/PI*180\r\n    }\r\n    return _;\r\n  }\r\n\r\n  var FreeCamera = ({\r\n    camera,el=window,mw=innerWidth,mh=innerHeight,keycode_move=true\r\n    ,range={the:[0,126],fai:[123,201]}\r\n  })=>{\r\n\r\n    const behavior = {\r\n      'rotate':1\r\n      ,'position':1\r\n    };\r\n   \r\n//  201 123\r\n    var [cx,cy] = [mw>>1,mh>>1];\r\n    var [φ,θ]=[180,90];\r\n    var [x,y,z] = [0,0,0];\r\n    \r\n    const _ = Object.defineProperties({\r\n      update(){\r\n\r\n        if(this.transition) return;\r\n\r\n        Walk.update();\r\n\r\n        //FC.fun[s].update\r\n\r\n        var [φ,θ] = [this.φ/180*PI,this.θ/180*PI];\r\n\r\n        this.v3_look = new Vec(sin(θ)*sin(φ),cos(θ),sin(θ)*cos(φ));\r\n\r\n\r\n       // console.log(this.v3_look);\r\n        // if(!this.v3_look_bef ){\r\n        //   this.v3_look_bef = this.v3_look;\r\n        // }\r\n        // this.v3_look_delta = this.v3_look.sub(this.v3_look_bef);\r\n\r\n        // console.log(this.v3_look_delta);\r\n        // this.v3_look_bef = this.v3_look;\r\n        \r\n\r\n        this.v3_look_right = new Vec(\r\n          sin(θ)*sin(φ-PI*.5)\r\n          ,cos(θ)\r\n          ,sin(θ)*cos(φ-PI*.5)\r\n        );\r\n\r\n        this.v3_look_up = this.v3_look.cross(this.v3_look_right);\r\n\r\n        this.v3_camera = new Vec(\r\n          x,y,z\r\n        );\r\n        camera.position.set(\r\n          x,y,z\r\n        );\r\n\r\n        //...\r\n        const v = this.v3_camera.add(this.v3_look);\r\n        camera.lookAt(new THREE.Vector3(v.x,v.y,v.z));\r\n      }\r\n      ,transition:0\r\n      ,movingPath({time=1000,θ,φ}){\r\n\r\n      }\r\n      ,slerp(v3,{bit_dist,until=1,time=1000,θ,φ}={}){\r\n        this.transition = 1;\r\n\r\n        var complete_fn;\r\n\r\n        const rad = this.v3_look.dot(v3);\r\n        const slp = Slerp(this.v3_look,v3,rad);\r\n\r\n        const tw = new TWEEN.Tween({t:0})\r\n        .to({t:1},time)\r\n        .onStart(function(){\r\n          if(bit_dist){\r\n            this.bv = new Vec(_.x,_.y,_.z);\r\n          }\r\n          \r\n        })\r\n        .onUpdate(function(){\r\n          //console.log('aaa');\r\n          const pos = slp.pos(this.t);\r\n          _.v3_look = new Vec(\r\n            pos.x,pos.y,pos.z\r\n          );\r\n          \r\n          if(bit_dist){\r\n            let [t1,t2]=[this.t,1-this.t];\r\n            x = this.bv.x*t2+bit_dist.x*t1;\r\n            y = this.bv.y*t2+bit_dist.y*t1;\r\n            z = this.bv.z*t2+bit_dist.z*t1;\r\n\r\n          }else{\r\n            x = _.x;\r\n            y = _.y;\r\n            z = _.z;\r\n          }\r\n          \r\n          camera.position.set(\r\n            _.v3_camera.x,_.v3_camera.y,_.v3_camera.z\r\n          );\r\n\r\n\r\n          const v = _.v3_camera.add(_.v3_look);\r\n\r\n\r\n          camera.lookAt(new THREE.Vector3(\r\n            v.x,v.y,v.z\r\n          ));\r\n\r\n\r\n        })\r\n        .onComplete(function(){\r\n          _.transition = 0;\r\n          //相机路径的终点θ和φ 。。。注意直线和曲线的终值θ和φ\r\n          _.θ = θ;\r\n          _.φ = φ;\r\n\r\n          complete_fn && complete_fn();\r\n          \r\n        })\r\n        .start();\r\n\r\n        return {\r\n          complete(fn){\r\n            complete_fn = fn;\r\n          }\r\n        }\r\n\r\n      }\r\n      //正前方方向\r\n      ,v3_look:new Vec()\r\n      //后方向\r\n      ,v3_look_back:new Vec()\r\n      //右方向\r\n      ,v3_look_right:new Vec()\r\n      //左方向\r\n      ,v3_look_left:new Vec()\r\n      //上方向\r\n      ,v3_look_up:new Vec()\r\n\r\n      ,v3_camera:new Vec()\r\n\r\n      //为了检测在球内外的碰撞，在内部到球的外部。。会出现错误\r\n      //所以要保证，到外部的时候，速度向量是于lookat向量不同的。。\r\n      ,v3_speed:new Vec()\r\n\r\n      ,camera : camera\r\n      ,speed :{\r\n        front:1,back:1,right:1,left:1\r\n      }\r\n      //rotate position\r\n      ,cancelDefualt(){\r\n        if(!arguments.length){\r\n          behavior.rotate=behavior.position=0;\r\n          return;\r\n        }\r\n        Array.from(arguments,(v)=>{\r\n          if(!behavior[v]) return console.wran('!');\r\n          behavior[v] = 0;\r\n        })\r\n\r\n      }\r\n      ,walkFront(n){\r\n        Walk['front'].run = true;\r\n      }\r\n      ,walkBack(n){\r\n        Walk['back'].run = true;\r\n\r\n      }\r\n      ,walkRight(n){\r\n        Walk['right'].run = true;\r\n\r\n      }\r\n      ,walkLeft(n){\r\n        Walk['left'].run = true;\r\n      }\r\n    },{\r\n      'θ':{\r\n        get(){return θ;}\r\n        ,set(a){θ = a;}\r\n      }\r\n      ,'φ':{\r\n        get(){\treturn φ;}\r\n        ,set(a){φ = a;}\r\n      }\r\n      ,'the':{\r\n        get(){return θ;}\r\n        ,set(a){θ = a;}\r\n      }\r\n      ,'phi':{\r\n        get(){\treturn φ;}\r\n        ,set(a){φ = a;}\r\n      }\r\n      ,rotate:{\r\n        get(){return [θ,φ];}\r\n        ,set(a,b){\r\n          θ = a;\r\n          φ = b;\r\n        }\r\n      }\r\n      ,x:{\r\n        get(){return x;}\r\n        ,set(a){\r\n          x = a;\r\n          this.v3_camera.x = x;\r\n        }\r\n      }\r\n      ,y:{\r\n        get(){return y;\t}\r\n        ,set(a){\r\n          y = a;\r\n          this.v3_camera.y = y;\r\n\r\n          \r\n        }\r\n      }\r\n      ,z:{\r\n        get(){\r\n          //console.log('get z:',z);\r\n          return z;\r\n        }\r\n        ,set(a){\r\n          z = a;\r\n          //console.log('set z:',z);\r\n          this.v3_camera.z = z;\r\n        }\r\n      }\r\n      ,position:{\r\n        get(){return [x,y,z];}\r\n        ,set(a,b,c){\r\n          x=a,y=b,z=c;\r\n        }\r\n      }\r\n    });\r\n\r\n    const Walk = {\r\n      add(s,fn){\r\n        Walk[s] = this.mp[s] = {\r\n          run : 0\r\n          ,update(){\r\n            fn();\r\n          }\r\n        }\r\n      }\r\n      ,mp:{}\r\n      ,code_mp:{\r\n        '87':'w'\r\n        ,'83':'s'\r\n        ,'65':'a'\r\n        ,'68':'d'\r\n      }\r\n      ,update(){\r\n        Object.keys(this.mp).forEach((s)=>{\r\n          const o = this.mp[s];\r\n          if(!o.run) return;\r\n          o.update();\r\n        })\r\n      }\r\n    }\r\n\r\n\r\n    Walk.add('w',()=>{\r\n      _.v3_speed = _.v3_look.clone();\r\n      const v = _.v3_speed.scale(_.speed.front);\r\n      x += v.x , z+=v.z;\r\n      //console.log('ex:w')\r\n    });\r\n    Walk.add('s',()=>{\r\n      _.v3_speed = _.v3_look.clone().scale(-1);\r\n      const v = _.v3_speed.scale(_.speed.back);\r\n      x += v.x,z += v.z;\r\n    \r\n    });\r\n    Walk.add('d',()=>{\r\n      _.v3_speed = _.v3_look_right.clone();\r\n      const v = _.v3_speed.scale(_.speed.right);\r\n      x += v.x,z += v.z;\r\n    });\r\n    Walk.add('a',()=>{\r\n      _.v3_speed = _.v3_look_right.clone().scale(-1);\r\n      const v = _.v3_speed.scale(_.speed.left);\r\n      x += v.x,z += v.z;\r\n      //console.log('ex:a')\r\n    });\r\n\r\n    let bx,by;\r\n    let delta_x,delta_y;\r\n\r\n    el.addEventListener('mousedown',e=>{\r\n\r\n      \r\n\r\n      if(!bx)bx = e.pageX;\r\n      if(!by)by = e.pageY;\r\n      \r\n    });\r\n\r\n    // el.addEventListener('touchstart',e=>{\r\n\r\n      \r\n\r\n    //   if(!bx)bx = e.touches[0].pageX;\r\n    //   if(!by)by = e.touches[0].pageY;\r\n      \r\n    // });\r\n\r\n\r\n\r\n    \r\n    el.addEventListener('mousemove',e=>{\r\n     \r\n\r\n\r\n      if(!behavior.rotate) return;\r\n      if(!bx || !by) return;\r\n      delta_x = (e.pageX-bx)*-.2,delta_y = (e.pageY-by)*.3;\r\n      bx = e.pageX,by = e.pageY;\r\n      _.φ += delta_x,_.θ += delta_y;\r\n\r\n\r\n      _.the = _.θ;\r\n      _.phi = _.φ;\r\n\r\n\r\n      // this.v3_look = new Vec(sin(θ)*sin(φ),cos(θ),sin(θ)*cos(φ));\r\n\r\n\r\n      // if(!this.v3_look_bef ){\r\n      //   this.v3_look_bef = this.v3_look;\r\n      // }\r\n      // this.v3_look_delta = this.v3_look.sub(this.v3_look_bef);\r\n\r\n      // console.log(this.v3_look_delta);\r\n      // this.v3_look_bef = this.v3_look;\r\n\r\n\r\n      // _.θ<range.the[0] && (_.θ=range.the[0]);\r\n      _.θ>range.the[1] && (_.θ=range.the[1]);\r\n\r\n      _.φ<range.fai[0] && (_.φ=range.fai[0]);\r\n      _.φ>range.fai[1] && (_.φ=range.fai[1]);\r\n\r\n\r\n      _.trigger('rotate',{delta_x,delta_y});\r\n    });\r\n    // el.addEventListener('touchmove',e=>{\r\n     \r\n\r\n\r\n    //   if(!behavior.rotate) return;\r\n    //   if(!bx || !by) return;\r\n    //   delta_x = (e.touches[0].pageX-bx)*-.2,delta_y = (e.touches[0].pageY-by)*.3;\r\n    //   bx = e.touches[0].pageX,by = e.touches[0].pageY;\r\n    //   _.φ += delta_x,_.θ += delta_y;\r\n\r\n\r\n    //   _.the = _.θ;\r\n    //   _.phi = _.φ;\r\n      \r\n\r\n\r\n    //   // this.v3_look = new Vec(sin(θ)*sin(φ),cos(θ),sin(θ)*cos(φ));\r\n\r\n\r\n    //   // if(!this.v3_look_bef ){\r\n    //   //   this.v3_look_bef = this.v3_look;\r\n    //   // }\r\n    //   // this.v3_look_delta = this.v3_look.sub(this.v3_look_bef);\r\n\r\n    //   // console.log(this.v3_look_delta);\r\n    //   // this.v3_look_bef = this.v3_look;\r\n\r\n\r\n    //   // _.θ<range.the[0] && (_.θ=range.the[0]);\r\n    //   _.θ>range.the[1] && (_.θ=range.the[1]);\r\n\r\n    //   _.φ<range.fai[0] && (_.φ=range.fai[0]);\r\n    //   _.φ>range.fai[1] && (_.φ=range.fai[1]);\r\n\r\n\r\n    //   _.trigger('rotate',{delta_x,delta_y});\r\n    // });\r\n\r\n    el.addEventListener('mouseup',e=>{\r\n      bx = by = 0;\r\n    });\r\n    el.addEventListener('touchend',e=>{\r\n      bx = by = 0;\r\n    });\r\n\r\n    x = camera.position.x;\r\n    y = camera.position.y;\r\n    z = camera.position.z;\r\n\r\n    var key_speed;\r\n    var k1,k2;\r\n    const keyFn = (e)=>{\r\n      // if(_.transition){\r\n      // \t//console.log('!!!!');\r\n      // \treturn;\r\n      // } \r\n\r\n      if(!keycode_move)  return;\r\n\r\n\r\n      const W = Walk;\r\n      const o = W[W.code_mp[e.keyCode]];\r\n      if(!o) return;\r\n      if(!k1){\r\n        k1=k2=new Vec(x,y,z);\r\n      }\r\n      k1 = new Vec(x,y,z);\r\n      _.v3_key = new Vec(\r\n        k1.x-k2.x,k1.y-k2.y,k1.z-k2.z\r\n      );\r\n\r\n      //_.v3_key\r\n      k2.x = k1.x;\r\n      k2.y = k1.y;\r\n      k2.z = k1.z;\r\n\r\n      if(e.type =='keyup'){\r\n        o.run = 0;\r\n        return;\r\n      }\r\n      o.run = 1;\r\n      //console.log(e.keyCode,e.type);\r\n    }\r\n    addEventListener('keydown',keyFn);\r\n    addEventListener('keyup',keyFn);\r\n\r\n   \r\n    window.FreeCamera = window.Cam = $.extend(true,_,K.MxEvent);\r\n   \r\n    return window.FreeCamera;\r\n  };\r\n  \r\n  \r\n  window['Cam'] = window['FreeCamera'] = FreeCamera;\r\n}\r\n\r\n  \r\n  ","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","module.exports = __webpack_public_path__ + \"img/score-2.png?6b6233\";","module.exports = __webpack_public_path__ + \"img/score-1.png?019c2a\";","module.exports = __webpack_public_path__ + \"img/floor2.jpg?19d062\";","module.exports = __webpack_public_path__ + \"img/game-board2.jpg?e1f51a\";","module.exports = __webpack_public_path__ + \"img/game-board1.jpg?0aa61c\";","module.exports = __webpack_public_path__ + \"img/board1.jpg?f940a0\";","module.exports = __webpack_public_path__ + \"img/boarde.jpg?f63c97\";","module.exports = __webpack_public_path__ + \"img/boardb.jpg?408335\";","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mr.doob / http://mrdoob.com/\r\n */\r\n\r\nvar Detector = {\r\n\r\n\tcanvas: !! window.CanvasRenderingContext2D,\r\n\twebgl: ( function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\r\n\r\n\t\t} catch ( e ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t} )(),\r\n\tworkers: !! window.Worker,\r\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\r\n\r\n\tgetWebGLErrorMessage: function () {\r\n\r\n\t\tvar element = document.createElement( 'div' );\r\n\t\telement.id = 'webgl-error-message';\r\n\t\telement.style.fontFamily = 'monospace';\r\n\t\telement.style.fontSize = '13px';\r\n\t\telement.style.fontWeight = 'normal';\r\n\t\telement.style.textAlign = 'center';\r\n\t\telement.style.background = '#fff';\r\n\t\telement.style.color = '#000';\r\n\t\telement.style.padding = '1.5em';\r\n\t\telement.style.width = '400px';\r\n\t\telement.style.margin = '5em auto 0';\r\n\r\n\t\tif ( ! this.webgl ) {\r\n\r\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\r\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join( '\\n' ) : [\r\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\r\n\t},\r\n\r\n\taddGetWebGLMessage: function ( parameters ) {\r\n\r\n\t\tvar parent, id, element;\r\n\r\n\t\tparameters = parameters || {};\r\n\r\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\r\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\r\n\r\n\t\telement = Detector.getWebGLErrorMessage();\r\n\t\telement.id = id;\r\n\r\n\t\tparent.appendChild( element );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// browserify support\r\nif ( typeof module === 'object' ) {\r\n\r\n\tmodule.exports = Detector;\r\n\r\n}\r\n","import TWEEN from 'miku-tween';\r\n\r\nvar BillBoard = ({map})=>{\r\n  var pillar = new THREE.Mesh(\r\n    //new THREE.BoxGeometry(20,230,20)\r\n    new THREE.CylinderGeometry( 9, 12, 230 )\r\n    ,new THREE.MeshPhongMaterial({\r\n      color:new THREE.Color().setRGB(.2,.2,.2)\r\n    })\r\n  )\r\n  var board_materials = [...Array(4)].map(()=>new THREE.MeshPhongMaterial({\r\n    color:0x2d2d2d\r\n    ,specular: 0x05050\r\n  }));\r\n\r\n  //console.log(map);\r\n  {\r\n    \r\n\r\n    let cv_ = document.createElement('canvas');\r\n    cv_.width = 400,cv_.height =300;\r\n\r\n    //debugger;\r\n    \r\n    let c = cv_.getContext('2d');\r\n    //c.fillStyle = 'red';\r\n    //c.fillRect(0,0,cv_.width,cv_.height);\r\n    c.drawImage(map.image,0,0,cv_.width,cv_.height);\r\n\r\n \r\n    var map = new THREE.Texture(cv_);\r\n    \r\n\r\n  }\r\n  \r\n\r\n  board_materials.push(\r\n    new THREE.MeshPhongMaterial({\r\n      map\r\n      ,specular: 0xffffff\r\n    })\r\n    ,new THREE.MeshPhongMaterial({\r\n      map\r\n      ,specular: 0xffffff\r\n    })\r\n  );\r\n\r\n  //board_materials.push();\r\n  var board = new THREE.Mesh(\r\n     new THREE.BoxGeometry(400,300,30)\r\n    //new THREE.SphereGeometry(100,100,100)\r\n    ,board_materials\r\n   \r\n  )\r\n\r\n\r\n\r\n  board.material[board.material.length-1].map.needsUpdate = true;\r\n  board.material[board.material.length-2].map.needsUpdate = true;\r\n\r\n\r\n  pillar.add(board);\r\n\r\n\r\n  board.geometry.applyMatrix(\r\n    new THREE.Matrix4()\r\n    .makeTranslation(0,pillar.geometry.parameters.height+board.geometry.parameters.height*.5,0)\r\n\r\n  )\r\n  \r\n  // board.geometry.applyMatrix(\r\n  // \tnew THREE.Matrix4()\r\n  // \t.makeTranslation(0,pillar.geometry.parameters.height*.5+50,0)\r\n\r\n  // )\r\n  \r\n  pillar.geometry.applyMatrix(\r\n    new THREE.Matrix4().makeTranslation(0,pillar.geometry.parameters.height*.5,0)\r\n  )\r\n\r\n  pillar.visible = false;\r\n  //debugger;\r\n\r\n\r\n  pillar.castShadow = true;\r\n  pillar.receiveShadow = true;\r\n\r\n  board.castShadow = true;\r\n  board.receiveShadow = true;\r\n\r\n\r\n  return Object.assign(pillar,{\r\n    fallDown({delay=2000}={}){\r\n      var that = this;\r\n      //return;\r\n\r\n      new TWEEN.Tween({y:1000})\r\n      .to({y:0},1555)\r\n      .easing(TWEEN.Easing.Cubic.In)\r\n      .delay(delay)\r\n      .onStart(function(){\r\n        pillar.visible = true;\r\n      })\r\n      .onUpdate(function(){\r\n        pillar.position.y = this.y;\r\n        //console.log(pillar.position);\r\n      })\r\n      .onComplete(function(){\r\n        that._handle_fall&&that._handle_fall();\r\n      })\r\n      .start();\r\n    }\r\n    ,onFallEnd(fn){\r\n      this._handle_fall = fn;\r\n    }\r\n    ,comeOut({delay=3000}={}){\r\n      \r\n      new TWEEN.Tween({\r\n        y:(pillar.geometry.parameters.height+board.geometry.parameters.height)*-1  \r\n      })\r\n      .to({y:0},2233)\r\n      .easing(TWEEN.Easing.Cubic.In)\r\n      .delay(delay)\r\n      .onStart(function(){\r\n        pillar.visible = true;\r\n      })\r\n      .onUpdate(function(){\r\n        pillar.position.y = this.y;\r\n        \r\n        // Particle.renderIn(\r\n        //   new THREE.Vector3(pillar.position.x,5,pillar.position.z) \r\n        //   ,{\r\n        //     count:10\r\n        //     ,co:new THREE.Color().setRGB(.8,.8,.8)\r\n        //     ,range_po(t){\r\n        //       return {\r\n        //         x:cos(t)*\r\n        //       }\r\n        //     }\r\n        //   }\r\n        // )\r\n        //console.log(pillar.position);\r\n      })\r\n      .onComplete(function(){\r\n        \r\n      })\r\n      .start();\r\n    }\r\n  });\r\n\r\n}\r\n\r\nexport default BillBoard;","import TWEEN from 'miku-tween';\r\n\r\nconst Status = {\r\n  'stading':'stading'\r\n  ,'flipping':'flipping'\r\n  ,'holding':'holding'\r\n  ,'died':'died'\r\n  ,'outside':'outside'\r\n}\r\n\r\nvar ChessMan = ()=>{\r\n  var co = new THREE.Color().setRGB(.1,.1,.1);\r\n  var body = new THREE.Mesh(\r\n    //new THREE.BoxGeometry(3,10,3)\r\n    new THREE.CylinderGeometry( 1.5, 2, 10, 32 )\r\n    ,new THREE.MeshPhongMaterial({\r\n      color:co\r\n      ,transparent:true\r\n    })\r\n  );\r\n  body.material.opacity = 1;\r\n  body.geometry.applyMatrix(\r\n    new THREE.Matrix4().makeTranslation(0,body.geometry.parameters.height*.5,0)\r\n  );\r\n\r\n  body.castShadow = true;\r\n  body.receiveShadow = true;\r\n\r\n  \r\n  \r\n\r\n  var head = new THREE.Mesh(\r\n    //new THREE.SphereGeometry(body.geometry.parameters.width*.7)\r\n    new THREE.SphereGeometry(2)\r\n    ,new THREE.MeshPhongMaterial({\r\n      color:co\r\n      ,transparent:true\r\n    })\r\n  )\r\n  body.add(head);\r\n\r\n  head.geometry.applyMatrix(\r\n    new THREE.Matrix4().makeTranslation(0,body.geometry.parameters.height*1.333,0)\r\n  );\r\n\r\n  \r\n  head.castShadow = true;\r\n  head.receiveShadow = true;\r\n\r\n\r\n\r\n\r\n  {\r\n    // let cv_ = document.createElement('canvas');\r\n    // cv_.width = cv_.height = 100;\r\n    // let c = cv_.getContext('2d');\r\n   \r\n\r\n    // var msg = new THREE.Mesh(\r\n    //   new THREE.PlaneGeometry(2,2)\r\n    //   ,new THREE.MeshBasicMaterial({\r\n    //     map:new THREE.Texture(cv_)\r\n    //     ,transparent:true\r\n    //   })\r\n    // );\r\n    // msg.material.map.needsUpdate = true;\r\n    // head.add(msg);\r\n\r\n    // msg.geometry.applyMatrix(\r\n    //   new THREE.Matrix4()\r\n    //   .makeTranslation(0,13.5,2)\r\n\r\n    // );\r\n  }\r\n\r\n\r\n//\tdebugger;\r\n\r\n  return Object.assign(body,{\r\n    holding(){\r\n\r\n      this.status = Status.holding;\r\n\r\n\r\n      var increasing = .007;\r\n      this.hold_coefficient += increasing;\r\n      this.hold_coefficient > 1 && (this.hold_coefficient =1);\r\n      \r\n      this.scale.y = (1-this.hold_coefficient)*.7+.3;\r\n\r\n      //console.log(this.scale.y);\r\n    }\r\n    ,start(){\r\n      this.rotation.z = 0;\r\n      this.status = Status.stading;\r\n\r\n      //console.log('stading!!!!');\r\n\r\n    }\r\n    ,canHolding(){\r\n      return (this.status === Status.stading) || (this.status === Status.holding);\r\n    }\r\n\r\n    ,canFlipping(){\r\n      return this.status === Status.holding; \r\n    }\r\n    ,_controlVertex(ty=0){\r\n      body.geometry.applyMatrix(\r\n        new THREE.Matrix4().makeTranslation(0,-ty,0)\r\n      );\r\n      head.geometry.applyMatrix(\r\n        new THREE.Matrix4().makeTranslation(0,-ty,0)\r\n      );\r\n      this.position.y += ty;\r\n    }\r\n    ,onFilpEnd(fn){\r\n      this._handle_flip_end = fn;\r\n    }\r\n    ,fewFlip({onUpdate,po_increments}){\r\n      var that = this;\r\n      return new Promise(r=>{\r\n        var f = (len)=>{\r\n          //hold_coefficient*1000\r\n          that.hold_coefficient=.5;\r\n         \r\n          that.flipping((po)=>{\r\n            onUpdate&&onUpdate(po);\r\n          },123,200,600,false)\r\n          .then(res=>{\r\n            \r\n            if(len===1) return r();\r\n\r\n            f(--len);\r\n          })\r\n\r\n\r\n        }\r\n  \r\n        f(po_increments.length);\r\n      })\r\n    \r\n\r\n\r\n    }\r\n    ,isOutside(){\r\n      return this.status === Status.outside;\r\n    }\r\n    ,isStading(){\r\n      return this.status === Status.stading;\r\n    }\r\n    ,isDied(){\r\n      return this.status === Status.died;\r\n    }\r\n    ,fallDown({rz=30,delay=333}={}){\r\n      var that = this;\r\n      this.status = Status.died;\r\n\r\n\r\n      return new Promise(r=>{\r\n        new TWEEN.Tween({y:this.position.y,rz:0})\r\n        .delay(delay)\r\n        .easing(TWEEN.Easing.Cubic.In)\r\n        .to({y:0,rz},1234)\r\n        .onUpdate(function(){ \r\n          that.position.y = this.y;\r\n          that.rotation.z = this.rz;\r\n        })\r\n        .onComplete(()=>{\r\n          r();\r\n        })\r\n        .start();\r\n\r\n        //r();\r\n      });\r\n\r\n\r\n      \r\n\r\n    }\r\n    ,stopToTop(){\r\n      this.tw_top1.stop();\r\n      this.tw_top2.stop();\r\n    }\r\n    ,flipToTop({height,onUpdate,onPer,delay=0,onFlipStart,flip_dur=3333}={}){\r\n      var that = this;\r\n      return new Promise(r=>{\r\n\r\n        this.status = 'fliptotop';\r\n\r\n        var tw  = new TWEEN.Tween({scale:1})\r\n        .to({scale:.6},566)\r\n        .delay(delay)\r\n        .onUpdate(function(){\r\n          that.scale.y = this.scale;\r\n        });\r\n\r\n\r\n        var tw2 = new TWEEN.Tween({y:this.position.y,t:0})\r\n        .to({y:height,t:1},flip_dur)\r\n        .easing(TWEEN.Easing.Cubic.Out)\r\n        .onStart(function(){\r\n          this.once = false;\r\n          that.scale.y = 1;\r\n          onFlipStart && onFlipStart();\r\n        })\r\n        .onUpdate(function(){\r\n          that.position.y = this.y;\r\n          onUpdate&&onUpdate(that.position);\r\n          if(this.t>=.2&&!this.once){\r\n            this.once = true;\r\n            onPer&&onPer(that.position);\r\n          }\r\n\r\n        })\r\n        .onComplete(function(){\r\n          //console.log('flip to top ..!!!')\r\n          \r\n          r();\r\n        });\r\n\r\n        this.tw_top1 = tw;\r\n        this.tw_top2 = tw2;\r\n        \r\n\r\n        tw.chain(tw2);\r\n\r\n        tw.start();\r\n\r\n      });\r\n      \r\n    }\r\n    ,flipping(fn,delay=0,dy=26,dur=433,statusx=true){\r\n      this.scale.y = 1;\r\n\r\n      var that = this;\r\n      var ty = body.geometry.parameters.height*.5;\r\n\r\n      var target_o = {\r\n        // x:this.hold_coefficient*123\r\n        x:this.hold_coefficient*150\r\n        //z:this.hold_coefficient*50\r\n        ,y:this.position.y \r\n      }\r\n\r\n      //console.log('flipping!!');\r\n\r\n      if(statusx) this.status = Status.flipping;\r\n\r\n      return new Promise(r=>{\r\n\r\n        new TWEEN.Tween({t:0})\r\n        .to({t:1},dur)\r\n        .delay(delay)\r\n        .onStart(function(){\r\n          that._controlVertex(ty);\r\n        \r\n          this.bef = {\r\n            x:that.position.x\r\n            ,y:that.position.y\r\n          }\r\n  \r\n        })\r\n        .onUpdate(function(){\r\n          body.rotation.z = this.t*-PI*2;\r\n\r\n          var x_ = this.bef.x + this.t*target_o.x;\r\n          var y_ = this.bef.y + sin(this.t*PI)*dy;\r\n          that.position.x = x_;\r\n          that.position.y = y_;\r\n\r\n          //console.log(that.position);\r\n          fn&&fn(that.position);\r\n\r\n        })\r\n        .onComplete(function(){\r\n          that._controlVertex(-ty);\r\n\r\n\r\n          if(statusx) that.status = Status.stading;\r\n\r\n\r\n          that._handle_flip_end&&that._handle_flip_end(that);\r\n\r\n          r();\r\n\r\n        })\r\n        .start();\r\n\r\n        this.hold_coefficient = 0;\r\n      })\r\n      \r\n    }\r\n    ,hold_coefficient:0\r\n    ,status : Status.outside\r\n  });\r\n\r\n\r\n}\r\n\r\nexport default ChessMan;","var InfinityElement = Class.create({\r\n  init(props){\r\n    this.els = [];\r\n    this.groups = [];\r\n    this.group_id = 0;\r\n\r\n    this.in_group_num = props.in_group_num || 10;\r\n\r\n    this.once= false;\r\n    this.far =  props.far || 3000;\r\n    this.allow_far = this.far;\r\n\r\n    this.handle_each_child  = props.handle_each_child;\r\n\r\n  }\r\n  ,reset(scene){\r\n    this.once = false;\r\n\r\n    this.group_id = 0;\r\n\r\n    if(scene){\r\n      this.els.forEach((o)=>scene.remove(o));\r\n    }\r\n\r\n \r\n    this.els = [];\r\n\r\n    this.groups = [];\r\n\r\n    this.allow_far = this.far;\r\n\r\n\r\n  }\r\n  ,elForThatArea(po1,far,scene){\r\n\r\n    this.group_id++;\r\n\r\n    var objs = [...Array(this.in_group_num)].map((v,i)=>{\r\n\r\n      var o = this.handle_each_child.call(this,po1,far,scene);\r\n      scene.add(o);\r\n      this.els.push(o);\r\n      \r\n      o.group_id = this.group_id;\r\n\r\n      return o;\r\n\r\n    });\r\n    //debugger;\r\n\r\n    return objs;\r\n  }\r\n  ,render(current_po,scene){\r\n    var {groups,far,in_group_num} = this;\r\n\r\n    if(!this.once){\r\n      //console.log('oncex');\r\n      //console.log(infinityCreateTree.once);\r\n      this.once = true;\r\n      \r\n      this.groups = [\r\n        this.elForThatArea(0,-far,scene)\r\n        ,this.elForThatArea(0,far,scene)\r\n        ,this.elForThatArea(far,far,scene)\r\n      ];\r\n      \r\n      //console.log(groups);\r\n\r\n      // -far   0  \r\n\r\n    }\r\n\r\n    var current_po = current_po.x;\r\n\r\n    //return;\r\n    //5000 10000\r\n    if(current_po!=0&& current_po> this.allow_far ){\r\n      this.allow_far+=far;\r\n      //debugger;\r\n\r\n      //console.log(this.groups);\r\n\r\n\r\n      //debugger;\r\n      let group = this.groups.shift();\r\n      \r\n      group.forEach((o)=>{\r\n        scene.remove(o);\r\n        //console.log(this.els);\r\n        //this.els.remove(o);\r\n      });\r\n      \r\n      this.groups.push( this.elForThatArea(current_po+far,far,scene) );\r\n        //alert('creat and destory groups!!');\r\n      console.log('%c creat and destory groups!!','font-size:30px;',groups);\r\n\r\n    }\r\n  }\r\n});\r\n\r\nexport default InfinityElement;\r\n","import TWEEN from 'miku-tween';\r\n\r\nvar Tree = ()=>{\r\n  var trunk = new THREE.Mesh(\r\n    new THREE.BoxGeometry(3,200,3)\r\n    ,new THREE.MeshLambertMaterial({color:0xe3cf73})\r\n  );\r\n  var leaf = new THREE.Mesh(\r\n    new THREE.OctahedronGeometry(20,1)\r\n    //new THREE.BoxGeometry(30,30,30)\r\n    ,new THREE.MeshLambertMaterial({color:0x005910})\r\n  );\r\n  trunk.add(leaf);\r\n\r\n  leaf.geometry.applyMatrix(\r\n    new THREE.Matrix4().makeTranslation(0,trunk.geometry.parameters.height*.5,0)\r\n  ) \r\n\r\n  trunk.castShadow = true;\r\n  leaf.castShadow = true;\r\n\r\n  return Object.assign(trunk,{\r\n    flip({delay=200}){\r\n      var that = this;\r\n      new TWEEN.Tween({t:0})\r\n      .to({t:1},200+random()*200)\r\n      .delay(delay)\r\n      .onStart(function(){\r\n        this.by = that.position.y;\r\n        this.dy = 8+random()*8;\r\n      })\r\n      .onUpdate(function(){\r\n        that.position.y = this.by+sin(this.t*PI)*this.dy;\r\n\r\n        //console.log(that.position.y);\r\n      })\r\n      .start();\r\n    }\r\n  });\r\n}\r\n\r\nexport default Tree;","import TWEEN from 'miku-tween';\r\nimport {TextureManager} from './texture_manager';\r\n\r\nexport default function({goods=null,height=600,billboard=false,billboard_map}={}){\r\n\r\n\r\n  var color = new THREE.Color().setHSL(Math.random(),1,.9);\r\n  var material = new THREE.MeshPhongMaterial({\r\n    color\r\n    ,transparent:true, specular: 0xffffff,flatShading: false\r\n\r\n    //,map:new THREE.TextureLoader().load(require('./common/img/board1.jpg'))\r\n  });\r\n\r\n  // var materials = [\r\n  //   material.clone(),material.clone()\r\n  //   // ,new THREE.MeshPhongMaterial({\r\n  //   //   color,transparent:true, specular: 0xffffff,flatShading: false\r\n  //   //   ,map:new THREE.TextureLoader().load(require('./common/img/boardx2.jpg'))\r\n  //   // })\r\n  //   ,material.clone()\r\n  //   ,material.clone(),material.clone(),material.clone()\r\n  // ]\r\n\r\n\r\n  var mesh;\r\n\r\n  if(random()>.2){\r\n    mesh = new THREE.Mesh(\r\n      //new THREE.BoxGeometry(30,height,30)\r\n      new THREE.CylinderGeometry( 15, 15, height, 32 )\r\n      //,materials\r\n      ,material\r\n    );\r\n    mesh.material.opacity = 0;\r\n    mesh.position.y = mesh.geometry.parameters.height*.5;\r\n    mesh.castShadow = true;\r\n    mesh.receiveShadow = true;\r\n  \r\n  \r\n    var {parameters} = mesh.geometry;\r\n  \r\n  \r\n    var billborad_ = new THREE.Mesh(\r\n      new THREE.CylinderGeometry(15, 15, 20, 32, 32, true, 0, PI*.6)\r\n      ,new THREE.MeshPhongMaterial({\r\n        //map:new THREE.TextureLoader().load(require('./common/img/boardx2.jpg'))\r\n        specular: 0xffffff,flatShading: false\r\n        ,map:billboard_map\r\n      })\r\n    );\r\n\r\n\r\n    billborad_.position.set(0,\r\n      height*.5-billborad_.geometry.parameters.height*(.6+random()*1)\r\n      ,.1);\r\n    billborad_.rotation.y = -.5-random()*.433;\r\n    mesh.add(billborad_);\r\n\r\n  }else{\r\n    \r\n    mesh = new THREE.Mesh(\r\n      new THREE.BoxGeometry(30,height,30)\r\n      //,materials\r\n      ,material\r\n    );\r\n    mesh.material.opacity = 0;\r\n    mesh.position.y = mesh.geometry.parameters.height*.5;\r\n    mesh.castShadow = true;\r\n    mesh.receiveShadow = true;\r\n  }\r\n\r\n  /////////////\r\n  mesh.castShadow = false;\r\n\r\n  if(goods){\r\n\r\n    //190/207\r\n    // var s = 190/207;\r\n    // var goods_ = new THREE.Mesh(\r\n    //   //new THREE.BoxGeometry(10,10,10)\r\n    //   // ,new THREE.MeshPhongMaterial({\r\n    //   //   color: new THREE.Color().setHSL(Math.random(),1,.9)\r\n    //   //   ,transparent:true, specular: 0xffffff,flatShading: false\r\n    //   // })\r\n    //   new THREE.PlaneGeometry(15,15/s,10)\r\n    //   ,new THREE.MeshBasicMaterial({\r\n    //     map:new THREE.TextureLoader().load(require('./common/img/chest2.png'))\r\n    //     ,transparent:true\r\n    //     ,side :THREE.DoubleSide\r\n    //   })\r\n    // );\r\n\r\n    // //mesh.add(goods_);\r\n\r\n    // goods_.geometry.applyMatrix(\r\n    //   new THREE.Matrix4().makeTranslation(0,height*.5+goods_.geometry.parameters.height*.5,0)\r\n    // );\r\n    // goods_.position.set(\r\n    //   0,height*.5+goods_.geometry.parameters.height*.5,0\r\n    // );\r\n\r\n  }\r\n\r\n\r\n  new TWEEN.Tween({opacity:0})\r\n  .to({opacity:1},333)\r\n  .onUpdate(function(){\r\n    mesh.material.opacity = this.opacity;\r\n\r\n    //console.log(this.opacity);\r\n  })\r\n  .start();\r\n\r\n  return Object.assign(mesh,{\r\n    goods\r\n    ,displayGoods(scene){\r\n      \r\n      setTimeout(()=>{\r\n        alert('OvO你得到了cdk：'+ this.goods.cdk);\r\n      },433);\r\n\r\n      \r\n\r\n      //this.remove(goods_);\r\n\r\n    }\r\n    ,goodsLookAt(po){\r\n      //if(goods_){\r\n\r\n        //console.log(po);\r\n        //goods_.lookAt(po);\r\n        \r\n\r\n        //goods_.lookAt(new THREE.Vector3(po.x,po.y,po.z))\r\n\r\n      //}\r\n    }\r\n  });\r\n\r\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"#game_container {\\n  width: 800px;\\n  height: 500px;\\n  margin: 0 auto;\\n}\\n#no-gl-for-you {\\n  width: 100%;\\n  height: 100%;\\n}\\n#no-gl-for-you span {\\n  display: block;\\n  margin: 0 auto;\\n  text-align: center;\\n  color: black;\\n  margin-top: 20%;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../node_modules/less-loader/dist/cjs.js!./tiaoyitiao.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../node_modules/less-loader/dist/cjs.js!./tiaoyitiao.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../node_modules/less-loader/dist/cjs.js!./tiaoyitiao.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import './tiaoyitiao.less';\r\nimport './freecamera';\r\nimport Cube from './cube';\r\nimport TWEEN from 'miku-tween';\r\nimport Tree from './tree';\r\nimport InfinityElement from './infinity_element';\r\nimport ChessMan from './chessman';\r\nimport BillBoard from './billboard';\r\nimport {TextureManager} from './texture_manager';\r\nimport Detector from './detector';\r\n\r\nvar Api = { };\r\n\r\n{\r\n  let {offsetWidth,offsetHeight} = document.body;\r\n  let $game_container = $('#game_container');\r\n\r\n  $game_container.on('touchstart',e=>{\r\n    e.preventDefault()\r\n  });\r\n\r\n  \r\n  if(K.Brower.version.mobile){\r\n    $('#holder').css({width:'100%',height:'100%'})\r\n\r\n    $game_container.width(offsetHeight).height(offsetWidth)\r\n    .css({\r\n      'transform-origin':'0% 0%'\r\n      ,'transform':'rotateZ(90deg) translate3d(0%,-100%,0)',\r\n    })\r\n    \r\n  }else{\r\n    $game_container.width(offsetWidth).height(offsetWidth*.5)\r\n    $(`<p style=\"font-size:32px;text-align:center;\">pc端长按空格=w=</p>`).appendTo('#holder')\r\n  }\r\n}\r\n\r\n\r\nexport default K.Event.extend({\r\n  init(opt){\r\n    this._super();\r\n\r\n    \r\n\r\n    this.options = {\r\n      can_play:true\r\n      ,$container:$(document.body)\r\n      ,status_msg:''\r\n      ,can_play:false\r\n    }\r\n\r\n    Object.assign(this.options,opt);\r\n\r\n\r\n    Api = opt.Api;\r\n\r\n    this.$container = $(this.options.$container);\r\n    this.status_msg = this.options.status_msg;\r\n    this.can_play = this.options.can_play;\r\n    \r\n\r\n    if(!this._supportGl()){\r\n\r\n      return this._noGlForYou();\r\n    }\r\n\r\n\r\n    this._max_phase = 100;\r\n\r\n    this._phase = 0;\r\n    this.score = 0;\r\n    this._good_i = 0;\r\n    this.goods = opt.goods;\r\n\r\n    this._request = false;\r\n\r\n    this.can_update_camera = false;\r\n\r\n    this.mesh_points = [];\r\n\r\n    this.v3_look = new THREE.Vector3(0,0,-1)\r\n    .applyAxisAngle(new THREE.Vector3(1,0,0), .1 )\r\n    .applyAxisAngle(new THREE.Vector3(0,1,0), -.2 );\r\n\r\n\r\n    this.num_of_game = this.options.num_of_game;\r\n    this.score = 0;\r\n    this.current_grid = null;\r\n    this._keydown = false;\r\n\r\n   \r\n    this.Phases = {};\r\n\r\n    this._createStage();\r\n\r\n\r\n    this.on('round_',()=>{\r\n\r\n      //debugger;\r\n\r\n      this.num_of_game--;\r\n\r\n      console.log('%c round_,score:%s,num_of_game:%s','color:black;',this.score,this.num_of_game);\r\n\r\n      //if(this.num_of_game<=0) return console.log('次数用尽');\r\n\r\n      this.trigger('round-of-game',{score:this.score,num_of_game:this.num_of_game});\r\n\r\n      this._restart();\r\n      \r\n    });\r\n\r\n\r\n\r\n    //return;\r\n\r\n\r\n   this._getGameResult().then(res=>{\r\n\r\n    this._textures = res;\r\n\r\n    this._createActor();\r\n\r\n    this._createPhases();\r\n\r\n    this._run();\r\n\r\n    this._render();\r\n\r\n   });\r\n\r\n  }\r\n\r\n  ,_getGameResult(){\r\n\r\n    return new Promise(r=>{\r\n\r\n      TextureManager.initial({\r\n        boards_small:[\r\n          //  require('./common/img/boardx2.jpg'),require('./common/img/boardx3.jpg'),require('./common/img/boardx6.jpg')\r\n          //  ,require('./common/img/boardx.jpg'),require('./common/img/board3.jpg'),require('./common/img/boarda.jpg')\r\n           require('./common/img/boardb.jpg'),require('./common/img/boarde.jpg'),require('./common/img/board1.jpg')\r\n          //  ,require('./common/img/boardf.jpg'),require('./common/img/boardg.jpg')\r\n         ]\r\n        ,boards_big:[require('./common/img/game-board1.jpg'),require('./common/img/game-board2.jpg')]\r\n        ,floor:[require('./common/img/floor2.jpg')]\r\n        ,points:[ require('./common/img/score-1.png'), require('./common/img/score-2.png') ]\r\n        //,chacters:[require('./common/img/gangdan3.png')]\r\n      });\r\n    \r\n      TextureManager.onComplate(res=>{\r\n        r(res);\r\n\r\n      });\r\n\r\n\r\n    })\r\n    \r\n\r\n  }\r\n\r\n  ,_supportGl(){\r\n\r\n    // if(document.querySelector && !window.addEventListener){\r\n    //     alert('IE8')\r\n    // }else{\r\n    //   alert('> ie8');\r\n    // }\r\n\r\n    //console.log(K.Brower.version);\r\n    return Detector.webgl?true: void function(){\r\n      //var warning = Detector.getWebGLErrorMessage();\r\n      //$('body')[0].appendChild(warning);\r\n\r\n      \r\n    }();\r\n\r\n    \r\n  }\r\n  ,_noGlForYou(){\r\n    //alert('no gl for you!');\r\n    let d = document.createElement('div');\r\n    d.id = 'no-gl-for-you';\r\n    $(this.$container).append(d);\r\n    d.innerHTML = `\r\n      <span>浏览器君需要升级！或者换个浏览器再试！</span>\r\n    `;\r\n\r\n    //console.log(this.$container);\r\n\r\n  }\r\n\r\n  ,_noChance(){\r\n    alert('次数用尽！');\r\n  }\r\n  ,_restart(){\r\n\r\n    var that = this;\r\n\r\n    this._zoom.show({\r\n      phase0(){\r\n        {\r\n\r\n          that.cubes.forEach(o=>{\r\n            that.scene.remove(o);\r\n          });\r\n    \r\n    \r\n          let cube_num = 2;\r\n          let grid_height = 800;\r\n    \r\n          that.cubes = [...Array(cube_num)].map((v,i)=>{\r\n            var mesh = Cube({\r\n              height:grid_height\r\n              ,billboard_map :that._textures.boards_small[that._textures.boards_small.length-1]\r\n            });\r\n    \r\n            mesh.position.x = i/cube_num*100;\r\n    \r\n            that.scene.add(mesh);\r\n            return mesh;\r\n    \r\n          });\r\n    \r\n    \r\n        }\r\n    \r\n        that.current_grid = null;\r\n        that._phase = 0;\r\n        that.score = 0;\r\n    \r\n        let po = that.cubes[0].position;\r\n    \r\n        let {po1,po2} = {\r\n          po1 : po.clone().add( new THREE.Vector3(0,that.cubes[0].geometry.parameters.height*.6,0  ) )\r\n          ,po2 : po.clone().add( new THREE.Vector3(0,that.cubes[0].geometry.parameters.height*.5,0  ) )\r\n        }\r\n    \r\n        Object.assign(FreeCamera,{\r\n          x:po2.x,y:po2.y+100,z:po2.z+150\r\n          // x:120,y:50,z:296\r\n          ,speed:{front:8,back:8,left:3,right:3}\r\n          //90--55\r\n          ,θ:116,φ:165\r\n          //,φ:154\r\n        });\r\n\r\n\r\n\r\n        that._infinity_tree.reset(that.scene);\r\n        that._infinity_ground.reset(that.scene);\r\n\r\n        that.mesh_score.setScore(that.score);\r\n\r\n        that.chessman.position.copy(po2);\r\n        \r\n        that.chessman.start();\r\n      }\r\n      ,phase1(){\r\n        \r\n      }\r\n    });\r\n\r\n\r\n    \r\n\r\n\r\n  }\r\n  ,_addScore({score=1}={}){\r\n\r\n    var that = this;\r\n\r\n    this.score += score;\r\n\r\n    this.mesh_score.setScore(this.score);\r\n\r\n    this.trigger('score',{score:this.score});\r\n\r\n\r\n    //console.log(score);\r\n    //debugger;\r\n\r\n    var w = this.chessman.geometry.parameters.radiusBottom;\r\n    w*=(score>1?10:5);\r\n    var dify = score>1?w*1.23:w*2.23;\r\n\r\n    \r\n    var mesh_point = new THREE.Mesh(\r\n      new THREE.PlaneGeometry(w,w )\r\n      ,new THREE.MeshBasicMaterial({\r\n        map:this._textures.points[score-1]\r\n        ,transparent:true\r\n        ,side:THREE.DoubleSide\r\n        \r\n      })\r\n    );\r\n    this.scene.add(mesh_point);\r\n    this.mesh_points.push(mesh_point);\r\n    \r\n    mesh_point.position.copy(\r\n      this.chessman.position.clone()\r\n      .add(new THREE.Vector3(0,dify,0))\r\n    );\r\n\r\n\r\n    new TWEEN.Tween({opacity:1,y:mesh_point.position.y})\r\n    .to({opacity:0,y:mesh_point.position.y+10},366)\r\n    .onUpdate(function(){\r\n      mesh_point.position.y = this.y;\r\n      mesh_point.material.opacity = this.opacity;\r\n\r\n    })\r\n    .onComplete(()=>{\r\n      //that.scene.remove(mesh_point);\r\n\r\n    })\r\n    .start();\r\n\r\n\r\n  }\r\n  ,_run(){\r\n\r\n    var {MoveToSpecialPo,FlipToHeight} = this.Phases;\r\n\r\n    var mtsp = new MoveToSpecialPo();\r\n    var fth = new FlipToHeight();\r\n    \r\n    var that = this;\r\n\r\n\r\n    mtsp.on('clear',()=>{\r\n\r\n      //return;\r\n\r\n      fth.execute();\r\n\r\n    });\r\n\r\n    fth.on('clear',()=>{\r\n\r\n      that.on('_keydown',()=>{\r\n\r\n        if(!that.can_play) return;\r\n        \r\n\r\n        if(that._zoom.hidding) return;\r\n        \r\n        if(that._request) return;\r\n  \r\n        if(that.num_of_game===0) return;\r\n  \r\n        //if(that.num_of_game===0) return that._noChance();\r\n        //if(that.num_of_game===0) return console.log('nochance!');\r\n  \r\n        if(that.chessman.canHolding()){\r\n          //console.log('e');\r\n          that.chessman.holding();\r\n        } \r\n  \r\n        \r\n  \r\n      });\r\n  \r\n      that.on('_keyup',()=>{\r\n  \r\n        if(!that.can_play) return alert(that.status_msg);\r\n  \r\n        \r\n\r\n        if(that.num_of_game===0) return that._noChance();\r\n  \r\n        if(that.chessman.canFlipping()){\r\n          that.chessman.flipping();\r\n        }\r\n  \r\n      });\r\n\r\n\r\n      //debugger;\r\n\r\n      //return;\r\n      this.light.position.set( 17, 30, 138);\r\n\r\n      //console.log('clear!!!!!!!!!!!!!');\r\n\r\n      this.can_update_camera = true;\r\n\r\n      let po = this.cubes[0].position;\r\n\r\n\r\n      let {po1,po2} = {\r\n        po1 : po.clone().add( new THREE.Vector3(0,this.cubes[0].geometry.parameters.height*.6,0  ) )\r\n        ,po2 : po.clone().add( new THREE.Vector3(0,this.cubes[0].geometry.parameters.height*.5,0  ) )\r\n      }\r\n\r\n      Object.assign(FreeCamera,{\r\n        x:po1.x,y:po2.y+100,z:po1.z+150\r\n        //x:po1.x,y:po1.y,z:po1.z+150\r\n        // x:120,y:50,z:296\r\n        ,speed:{front:8,back:8,left:3,right:3}\r\n        //90--55\r\n        ,θ:116,φ:165\r\n        //,φ:154\r\n      });\r\n\r\n      FreeCamera.update();\r\n\r\n      //console.log(2333333333333333333);\r\n\r\n\r\n      new TWEEN.Tween({x:po1.x,y:po1.y,z:po1.z})\r\n      .to(po2,1234)\r\n      .delay(566)\r\n      //TWEEN.Easing.Elastic.Out\r\n      .easing(TWEEN.Easing.Bounce.Out)\r\n      .onUpdate(function(){\r\n        that.chessman.position.copy(\r\n          new THREE.Vector3(this.x,this.y,this.z)\r\n        );\r\n      })\r\n      .onComplete(function(){\r\n        that.chessman.start();\r\n\r\n        that.mesh_score.show();\r\n\r\n      })\r\n      .start();\r\n\r\n\r\n    });\r\n\r\n\r\n    addEventListener('keydown',(e)=>{\r\n\r\n      if(e.keyCode===32) e.preventDefault();\r\n\r\n      if(e.keyCode===32) this._keydown = true;\r\n\r\n    });\r\n\r\n    addEventListener('keyup',(e)=>{\r\n\r\n      if(e.keyCode===32) e.preventDefault();\r\n\r\n      if(e.keyCode===32){\r\n        this._keydown = false;\r\n        this.trigger('_keyup');\r\n      }\r\n\r\n    });\r\n\r\n\r\n    addEventListener('touchstart',(e)=>{\r\n\r\n      e.preventDefault();\r\n\r\n        this._keydown = true;\r\n\r\n    });\r\n\r\n    addEventListener('touchend',(e)=>{\r\n\r\n       e.preventDefault();\r\n\r\n      \r\n      this._keydown = false;\r\n      this.trigger('_keyup');\r\n      \r\n\r\n    });\r\n\r\n    mtsp.execute();\r\n\r\n    //////////////\r\n\r\n  }\r\n  ,_createPhases(){\r\n   \r\n    var Phases = K.Event.extend({\r\n      init(){\r\n        this._super();\r\n      }\r\n      ,execute(){\r\n\r\n      }\r\n    });\r\n    var that = this;\r\n\r\n    var MoveToSpecialPo = Phases.extend({\r\n      init(){\r\n        this._super();\r\n      }\r\n      ,execute(){\r\n        let {po1,po2} = {\r\n          po1:new THREE.Vector3(-300,0,0)\r\n          ,po2:new THREE.Vector3(60,0,0)\r\n        }\r\n\r\n        that.chessman.position.copy(\r\n         po1.clone()\r\n        )\r\n\r\n        var po_chessman = that.chessman.position;\r\n\r\n        //////\r\n        // var mesh_chacter = new THREE.Mesh(\r\n        //   new THREE.PlaneBufferGeometry(600,600)\r\n        //   ,new THREE.MeshPhongMaterial({\r\n        //     color:0x2d2d2d\r\n        //     ,specular: 0x05050\r\n        //     ,map: that._textures.chacters[0]\r\n        //     ,transparent:true\r\n        //     ,fog:false\r\n        //   })\r\n        // );\r\n        // window.mesh_chacter = mesh_chacter;\r\n        // that.scene.add(mesh_chacter);\r\n        // mesh_chacter.position.copy(\r\n        //   po_chessman.clone().add(new THREE.Vector3(0,300,-900) )\r\n        // );\r\n\r\n        /////\r\n\r\n\r\n        //console.log(that._textures.boards_big);\r\n        let billboard = that._addBillBoard({\r\n          // position:po_chessman.clone().add(new THREE.Vector3(0,0,-900) )\r\n          // ,delay:100\r\n          position:po_chessman.clone().add(new THREE.Vector3(0,0,-900) )\r\n          ,delay:0\r\n          ,active_fall:false\r\n\r\n          ,map : that._textures.boards_big[0]\r\n\r\n          //,map : TextureManager.boards_big[0]\r\n\r\n        });\r\n\r\n        // billboard.rotation.y = .2;\r\n\r\n        billboard = that._addBillBoard({\r\n          position:po_chessman.clone().add(new THREE.Vector3(900,0,-800) )\r\n          ,delay:666\r\n          ,active_fall:false\r\n\r\n          ,map : that._textures.boards_big[1]\r\n\r\n        });\r\n\r\n        billboard.rotation.y = -.5;\r\n\r\n        let dx = po2.x-po1.x;\r\n\r\n        that.camera.lookAt(\r\n          that.camera.position.clone()\r\n          .add(  that.v3_look )\r\n        );\r\n\r\n        that.camera.position.copy(\r\n          that.chessman.position.clone().add(new THREE.Vector3(0,10,150))\r\n        );\r\n\r\n\r\n        setTimeout(()=>{\r\n\r\n          that.chessman.fewFlip({\r\n            onUpdate(po){\r\n              //FreeCamera.x = po.x-20;\r\n              //FreeCamera.y = po.y+10;\r\n  \r\n  \r\n              that.camera.position.copy(\r\n                new THREE.Vector3(po.x,po.y+10,po.z+150)\r\n              );\r\n  \r\n              that.camera.lookAt(\r\n                that.camera.position.clone()\r\n                .add(  that.v3_look )\r\n              );\r\n             // FreeCamera.update();\r\n            }\r\n            ,po_increments:[...Array(3)].map((v,i)=>{\r\n  \r\n              return new THREE.Vector3(po_chessman.x+i/3*dx, 0, 0 )\r\n            })\r\n          })\r\n          .then(res=>{\r\n            this.trigger('clear',{});\r\n            \r\n          });\r\n\r\n\r\n        },666);\r\n\r\n\r\n        //debugger;\r\n      }\r\n    });\r\n\r\n    var FlipToHeight = Phases.extend({\r\n      init(){\r\n        this._super();\r\n      }\r\n      ,execute(){\r\n\r\n\r\n        console.log('F')\r\n        var rx = 0;\r\n        var me = this;\r\n\r\n        that.chessman.flipToTop({\r\n          height:400\r\n          ,delay:566\r\n          ,flip_dur:3333\r\n\r\n          ,onFlipStart(){\r\n            \r\n            \r\n            \r\n            setTimeout(()=>{\r\n              that.chessman.stopToTop();\r\n\r\n              that._zoom.show({\r\n                phase0(){\r\n                  me.trigger('clear',{});\r\n                }\r\n                \r\n              });\r\n\r\n              \r\n\r\n            },888)\r\n\r\n    \r\n          }\r\n          ,onUpdate(po){\r\n            \r\n            let n = .02;\r\n            rx +=n;\r\n\r\n            //console.log(rx);\r\n\r\n            if(rx>=.6) return;\r\n\r\n\r\n            that.camera.lookAt(\r\n              that.camera.position.clone()\r\n              .add( that.v3_look.applyAxisAngle(new THREE.Vector3(1,0,0), n )  )\r\n            );\r\n\r\n\r\n          }\r\n          ,onPer(){\r\n            //debugger;\r\n            //console.log('per');\r\n          }\r\n        })\r\n        .then(res=>{\r\n          //this.trigger('clear',{});\r\n\r\n        })\r\n\r\n      }\r\n    });\r\n\r\n    this.Phases = {\r\n      MoveToSpecialPo\r\n      ,FlipToHeight\r\n    }\r\n    \r\n  }\r\n  ,assignGoods({goods}={}){\r\n    //this.goods = goods;\r\n\r\n\r\n  }\r\n  ,_setRandGoods(mesh){\r\n\r\n    //if(++this._good_i===1) return; \r\n    //if(this._good_i===3) return mesh.setGood(this.goods.shift());\r\n\r\n\r\n  }\r\n  ,_createActor(){\r\n\r\n    var that = this;\r\n\r\n    {\r\n      this._infinity_tree = new InfinityElement({\r\n        far:3000,in_group_num:123\r\n        ,handle_each_child(po1,far){\r\n          var tree = Tree();\r\n          tree.position.copy( \r\n            new THREE.Vector3(\r\n              po1+far*random(),0,-350-random()*1800\r\n            ) \r\n          );\r\n  \r\n          return tree;\r\n        }\r\n      });\r\n  \r\n    }\r\n    \r\n\r\n    { \r\n      let w = 10000;\r\n      let map_ = this._textures.floor[0];\r\n\r\n      this._infinity_ground = new InfinityElement({\r\n        far:w,in_group_num:1\r\n        ,handle_each_child(po1,far){\r\n  \r\n          var ground = new THREE.Mesh(\r\n            new THREE.PlaneBufferGeometry( far, far)\r\n   \r\n            ,new THREE.MeshPhongMaterial( { \r\n              color: 0xffffff, specular: 0x050505 \r\n              , map:map_\r\n              //,transparent:true\r\n            } )\r\n      \r\n          );\r\n  \r\n          ground.rotation.x = -Math.PI/2;\r\n          ground.material.map.wrapS = ground.material.map.wrapT = THREE.RepeatWrapping;\r\n          ground.material.map.repeat.set(80,80);\r\n          ground.receiveShadow = true;\r\n          \r\n          //debugger;\r\n        \r\n  \r\n          ground.position.copy( \r\n            new THREE.Vector3(\r\n              po1+far*.5,0,0\r\n            ) \r\n          );\r\n  \r\n          //console.log(ground.position);\r\n  \r\n          return ground;\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    {\r\n      ///\r\n      // let mesh_author = new THREE.Mesh(\r\n      //   new THREE.BoxGeometry()\r\n      //   ,new THREE.MeshPhongMaterial({})\r\n      // );\r\n      // this.scene.add(author_board);\r\n\r\n      \r\n    }\r\n    \r\n    {\r\n      let cube_num = 2;\r\n      let grid_height = 800;\r\n      this.cubes = [...Array(cube_num)].map((v,i)=>{\r\n        var mesh = Cube({ \r\n          height:grid_height\r\n          ,billboard_map :that._textures.boards_small[random()*that._textures.boards_small.length|0]\r\n        });\r\n\r\n        mesh.position.x = i/cube_num*100;\r\n        this.scene.add(mesh);\r\n\r\n        //this._setRandGoods(mesh);\r\n\r\n        return mesh;\r\n\r\n      });\r\n\r\n\r\n    }\r\n\r\n    {\r\n     \r\n      this.chessman = ChessMan({});\r\n      this.scene.add(this.chessman);\r\n      this.chessman.onFilpEnd(()=>{\r\n       \r\n        var effect_ring = new THREE.Mesh(\r\n        // innerRadius,outerRadius\r\n          new THREE.RingBufferGeometry( 5, 7, 32 )\r\n          ,new THREE.MeshBasicMaterial( {\r\n            color: 0xffffff, side: THREE.DoubleSide\r\n            ,transparent:true\r\n          } )\r\n        );\r\n\r\n        that.scene.add(effect_ring);\r\n        effect_ring.rotation.x = PI*.5;\r\n\r\n        effect_ring.position.copy( \r\n          this.chessman.position.clone()\r\n          .add(new THREE.Vector3(0,this.chessman.geometry.parameters.height*.16,0 ))\r\n        );\r\n\r\n        new TWEEN.Tween({t:1,a:1})\r\n        .to({t:3,a:0},333)\r\n        .easing(TWEEN.Easing.Quadratic.Out)\r\n        .onUpdate(function(){\r\n          effect_ring.scale.set(this.t,this.t,this.t);\r\n          effect_ring.material.opacity = this.a;\r\n        })\r\n        .onComplete(()=>{\r\n          that.scene.remove(effect_ring)\r\n        })\r\n        .start();\r\n\r\n\r\n      });\r\n      \r\n    }\r\n     \r\n    {\r\n      let {width,height} = this.renderer.getSize();\r\n\r\n      let cv_ = document.createElement('canvas');\r\n      cv_.width = cv_.height = 100;\r\n      let c = cv_.getContext('2d');\r\n\r\n      this.mesh_score = new THREE.Mesh(\r\n        new THREE.PlaneGeometry(100,100)\r\n        ,new THREE.MeshBasicMaterial({\r\n          map:new THREE.Texture(cv_)\r\n          ,transparent:true\r\n        })\r\n      );\r\n      \r\n     \r\n      this.orth_scene.add(this.mesh_score);\r\n\r\n      let {parameters} = this.mesh_score.geometry;\r\n      //debugger;\r\n      this.mesh_score.position.copy(\r\n        new THREE.Vector3(width*.5-parameters.width*.5,height*.5-parameters.height*.5,0)\r\n      );\r\n\r\n      Object.assign(this.mesh_score,{\r\n        setScore(score){\r\n          c.clearRect(0,0,cv_.width,cv_.height);\r\n          c.font='40px Georgia';\r\n          c.textAlign = 'center'\r\n          c.fillText(score,cv_.width*.5,cv_.height*.5);\r\n          this.material.map.needsUpdate = true;\r\n        }\r\n        ,show(){\r\n          this.visible = true;\r\n        }\r\n        ,hide(){\r\n          this.visible = false;\r\n        }\r\n      });\r\n      \r\n      this.mesh_score.setScore(0);\r\n      this.mesh_score.hide();\r\n\r\n\r\n     \r\n    }\r\n    \r\n    {\r\n\r\n\r\n      let {width,height} = this.renderer.getSize();\r\n      let zoom = new THREE.Mesh(\r\n        new THREE.PlaneBufferGeometry(width,height)\r\n        ,new THREE.MeshBasicMaterial({\r\n          color: new THREE.Color().setRGB(0,0,0)\r\n          ,transparent:true\r\n        })\r\n      );\r\n      that.orth_scene.add(zoom);\r\n      \r\n\r\n      Object.assign(zoom,{\r\n        hidding:false\r\n        ,show({delay=0,delay2=888,dur=433,phase0,phase1}={}){\r\n          var that = this;\r\n          return new Promise(r=>{\r\n            this.itv && this.itv.stop();\r\n            this.itv = new TWEEN.Tween({opacity:0})\r\n            .delay(delay)\r\n            .to({opacity:1},dur)\r\n            .onUpdate(function(){\r\n              that.material.opacity = this.opacity;\r\n              //console.log(this.opacity,'111111');\r\n            })\r\n            .onComplete(function(){\r\n             // console.log('complete tw1')\r\n              phase0&&phase0();\r\n            });\r\n            \r\n            this.itv2 && this.itv2.stop();\r\n            this.itv2 = new TWEEN.Tween({opacity:1})\r\n            .delay(delay2)\r\n            .to({opacity:0},dur)\r\n            .onUpdate(function(){\r\n              that.material.opacity = this.opacity;\r\n              //console.log(this.opacity,'222222');\r\n            })\r\n            .onComplete(function(){\r\n              //console.log('complete tw2')\r\n              phase1&&phase1();\r\n            });\r\n            \r\n\r\n            this.itv.chain(this.itv2);\r\n\r\n            this.itv.start();\r\n\r\n\r\n              \r\n          })\r\n        }\r\n        ,hide(){\r\n         \r\n        }\r\n      });\r\n\r\n\r\n      // that._zoom.show({}).then(res=>{\r\n\r\n      // });\r\n\r\n      // that._zoom.hide({}).then(res=>{\r\n\r\n      // });\r\n      zoom.material.opacity = 0;\r\n      \r\n\r\n      that._zoom = zoom;\r\n\r\n    \r\n\r\n\r\n    }\r\n\r\n    \r\n  }\r\n  ,_addBillBoard({position=new THREE.Vector3(0,0,0),delay=0,active_fall=true,map}){\r\n\r\n    var billboard = BillBoard({\r\n      map\r\n    });\r\n\r\n    this.scene.add(billboard);\r\n\r\n    billboard.position.copy(position);\r\n \r\n    billboard.onFallEnd(()=>{\r\n     // debugger;\r\n\r\n      if(!active_fall) return;\r\n\r\n      this._infinity_tree.els.forEach((o)=>{\r\n        o.flip({delay:random()*50});\r\n      })\r\n\r\n    })\r\n\r\n    billboard.fallDown({delay });\r\n\r\n    return billboard;\r\n  }\r\n  ,_addNextGrid(){\r\n\r\n    this._request = true;\r\n\r\n    this._handel_next_grid=(props)=>{\r\n      this._request = false;\r\n\r\n      let grid_height = 800;\r\n\r\n      var {goods} = props;\r\n      \r\n      //{name:'name233',cdk:'cdk-123456'}\r\n      var mesh = Cube({\r\n        height:grid_height\r\n        //,goods\r\n        ,goods\r\n        //,billboard:this._phase%2===0?true:false\r\n        ,billboard:random()<.3?true:false\r\n        ,billboard_map :this._textures.boards_small[random()*this._textures.boards_small.length|0]\r\n      });\r\n\r\n      mesh.castShadow = false;\r\n\r\n      //console.log(this.goods);\r\n\r\n      mesh.material.opacity = 1;\r\n\r\n      //mesh.position.x = this.current_grid.position.x + 100;\r\n\r\n      //var gap =  min(this._phase/this._max_phase,1)*50;\r\n      var gap =  min(this._phase/this._max_phase,1)*100;\r\n\r\n      mesh.position.x = this.current_grid.position.x + 50+random()*gap;\r\n      \r\n\r\n      this.scene.add(mesh);\r\n\r\n      this.cubes.push(mesh);\r\n\r\n\r\n      //debugger;\r\n    }\r\n\r\n    this.trigger('next-grid',{ \r\n      _phase:this._phase\r\n      ,fn:this._handel_next_grid.bind(this)  \r\n    });\r\n\r\n\r\n    ///////////////////////////////\r\n\r\n   \r\n  }\r\n  ,_checkChessManOutSide(){\r\n\r\n    var po_ = this.chessman.position.clone();\r\n    po_.y = max(po_.y,  this.cubes[0].position.y+this.cubes[0].geometry.parameters.height);\r\n    \r\n    let ray = new THREE.Raycaster(\r\n      po_\r\n      ,new THREE.Vector3(0,-1,0)\r\n    );\r\n\r\n\r\n    let intersects = ray.intersectObjects([...this.cubes]);\r\n    //console.log(intersects.length);\r\n\r\n    //console.log('len:',intersects.length);\r\n    if( this.chessman.isOutside()) return;\r\n\r\n    // document.title = `len:${intersects.length},status:${this.chessman.status}`;\r\n    \r\n\r\n    // console.log(this.chessman.status,'####');\r\n    //console.log(this.chessman.position,'####');\r\n    if(!intersects.length&&this.chessman.isStading()){\r\n      this.chessman.fallDown({}).then(res=>{\r\n        this.trigger('round_',{});\r\n\r\n      });\r\n\r\n\r\n      console.log('%c outside! status:%s','color:teal;',this.chessman.status);\r\n      return;\r\n    }\r\n\r\n    if(intersects.length&&this.chessman.isStading()){\r\n\r\n      let {distance,point,object} = intersects[0];\r\n\r\n      if(!this.current_grid){\r\n        this.current_grid = object;\r\n      }\r\n\r\n\r\n      if(this.current_grid!=object){\r\n        this.current_grid = object;\r\n        this._phase++;\r\n\r\n        if(this.current_grid.goods){\r\n          this.current_grid.displayGoods(this.scene);\r\n          this.trigger('receive-goods',{...this.current_grid.goods});\r\n        }\r\n       \r\n        //console.log(point);\r\n\r\n        {\r\n \r\n\r\n          let point_center = this.current_grid.position.clone().add(\r\n            new THREE.Vector3(0,this.current_grid.geometry.parameters.height*.5,0)\r\n          );\r\n\r\n          var len = point.clone().sub(point_center).length();\r\n\r\n\r\n          //console.log(len);\r\n\r\n         //\r\n          \r\n        }\r\n\r\n        this._addScore({ score:len<4?2:1});\r\n        //this._addScore({ score:2});\r\n\r\n        //console.log(this.this._phase);\r\n        if(this._phase>0){\r\n          //debugger;\r\n\r\n          //addNextCube();\r\n          this._addNextGrid();\r\n\r\n        }\r\n\r\n        if(this._phase%4==0){\r\n          //addBillboard();\r\n        }\r\n\r\n        \r\n\r\n        console.log('%c _phase:%s','color:red;',this._phase);\r\n      }\r\n\r\n\r\n    }\r\n  }\r\n  ,_trackChessMan(){\r\n    if(this.chessman.isDied()) return;\r\n\r\n    FreeCamera.x = this.chessman.position.x;\r\n  }\r\n  ,_render(){\r\n    var that = this;\r\n    //debugger;\r\n\r\n    requestAnimationFrame(function animate(){\r\n      requestAnimationFrame(animate);\r\n\r\n      if(that._keydown) that.trigger('_keydown');\r\n\r\n      TWEEN.update();\r\n\r\n      //that.renderer.render(that.scene , that.camera);\r\n\r\n      that.renderer.clear();\r\n      that.renderer.render(that.scene, that.camera);\r\n      that.renderer.clearDepth();\r\n      that.renderer.render(that.orth_scene, that.orth_camera);\r\n\r\n\r\n      //renderer.setSize($container.width(), $container.height());\r\n\r\n      //console.log(that.$container.width(), that.$container.height());\r\n      \r\n\r\n      \r\n      that._infinity_tree.render({x:Cam.x},that.scene);\r\n      that._infinity_ground.render({x:Cam.x},that.scene);\r\n\r\n      \r\n      that._checkChessManOutSide();\r\n      that._trackChessMan();\r\n\r\n      that.cubes.forEach(o=>{\r\n        o.goodsLookAt( new THREE.Vector3(FreeCamera.x,FreeCamera.y,FreeCamera.z)  );\r\n\r\n      });\r\n\r\n      \r\n      if(that.can_update_camera) FreeCamera.update();\r\n\r\n      \r\n\r\n      //\r\n    });\r\n  }\r\n\r\n  ,_createStage(){\r\n\r\n    \r\n    var {$container} = this;\r\n\r\n    let [width,height] = [$container.width(),$container.height()];\r\n\r\n    let scene = new THREE.Scene();\r\n    let camera = new THREE.PerspectiveCamera( 30, $container.width()/$container.height(), .1, 10000 );\r\n\t\t//let camera = new THREE.PerspectiveCamera( 45, $container.width()/$container.height(), .1, 10000 );\r\n    let renderer = new THREE.WebGLRenderer( {antialias:true} );\r\n  //let renderer = new THREE.WebGLRenderer( {} );\r\n    //renderer.setClearColor(0xeeeeee, 1);\r\n    renderer.autoClear = false; // To allow render overlay on top of sprited sphere\r\n    renderer.setClearColor(0x000000, 1);\r\n    renderer.setSize($container.width(), $container.height());\r\n\r\n    \r\n\r\n\t\tlet orth_scene = new THREE.Scene();\r\n\t\tlet orth_camera = new THREE.OrthographicCamera( -width/2, width / 2, height / 2, height / - 2, .1, 6000 );\r\n    orth_camera.position.copy(new THREE.Vector3(0,0,10)); \r\n    \r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap\r\n\r\n    $container.append(renderer.domElement);\r\n\r\n\r\n    scene.background = new THREE.Color().setRGB( 0.6, 1, 1 );\r\n    scene.fog = new THREE.FogExp2(scene.background, 0.0006 );\r\n\r\n\r\n    FreeCamera({camera,el:$container[0],keycode_move:true});\r\n\t\t\t\r\n    FreeCamera.update();\r\n\r\n\r\n    var ambientLight = new THREE.AmbientLight(new THREE.Color().setRGB(.2,.2,.2));\r\n    scene.add(ambientLight);\r\n\r\n\r\n    var dirLight = new THREE.DirectionalLight( 0xffffff, 1 );\r\n    dirLight.color.setHSL( 0.1, 1, 0.8 );\r\n    \r\n\r\n    //正式玩\r\n    dirLight.position.set( 17, 30, 138);\r\n\r\n\r\n    //场外\r\n    //30 69 47\r\n    dirLight.position.set( 30 ,69, 47);\r\n    \r\n    scene.add( dirLight );\r\n\r\n    dirLight.castShadow = true;\r\n    // dirLight.shadow.mapSize.width = 2048;\r\n    // dirLight.shadow.mapSize.height = 2048;\r\n\r\n    dirLight.shadow.mapSize.width = 2048;\r\n    dirLight.shadow.mapSize.height = 2048;\r\n\r\n    var d = 1500;\r\n    dirLight.shadow.camera.left = -d;\r\n    dirLight.shadow.camera.right = d;\r\n    dirLight.shadow.camera.top = d;\r\n    dirLight.shadow.camera.bottom = -d;\r\n    dirLight.shadow.camera.near = -d;\r\n    dirLight.shadow.camera.far = d;\r\n    dirLight.shadow.bias = -0.0001;\r\n\r\n    scene.add(  new THREE.DirectionalLightHelper(dirLight))\r\n\r\n\r\n    this.light = dirLight;\r\n\r\n\r\n    this.scene = scene;\r\n    this.camera = camera;\r\n    this.orth_scene = orth_scene;\r\n    this.orth_camera = orth_camera;\r\n\r\n    this.Cam = Cam;\r\n    this.renderer = renderer;\r\n\r\n\r\n\r\n  }\r\n\r\n  ,start(o){\r\n    Object.assign(this.options,o);\r\n\r\n    //this._handlePress();\r\n  }\r\n\r\n\r\n})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\n\nvar TWEEN = TWEEN || function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function getAll() {\n\n\t\t\treturn _tweens;\n\t\t},\n\n\t\tremoveAll: function removeAll() {\n\n\t\t\t_tweens = [];\n\t\t},\n\n\t\tadd: function add(tween) {\n\n\t\t\t_tweens.push(tween);\n\t\t},\n\n\t\tremove: function remove(tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\t\t},\n\n\t\tupdate: function update(time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n}();\n\n// Include a performance.now polyfill\n(function () {\n\t// In node.js, use process.hrtime.\n\t// if (this.window === undefined && this.process !== undefined) {\n\t// \tTWEEN.now = function () {\n\t// \t\tvar time = process.hrtime();\n\n\t// \t\t// Convert [seconds, microseconds] to milliseconds.\n\t// \t\treturn time[0] * 1000 + time[1] / 1000;\n\t// \t};\n\t// }\n\t// // In a browser, use window.performance.now if it is available.\n\t// else if (this.window !== undefined &&\n\t//          window.performance !== undefined &&\n\t// \t window.performance.now !== undefined) {\n\n\t// \t// This must be bound, because directly assigning this function\n\t// \t// leads to an invocation exception in Chrome.\n\t// \tTWEEN.now = window.performance.now.bind(window.performance);\n\t// }\n\t// // Use Date.now if it is available.\n\t// else if (Date.now !== undefined) {\n\t// \tTWEEN.now = Date.now;\n\t// }\n\t// // Otherwise, use 'new Date().getTime()'.\n\t// else {\n\t// \tTWEEN.now = function () {\n\t// \t\treturn new Date().getTime();\n\t// \t};\n\t// }\n\t// \n\t// \n\tif (Date.now !== undefined) {\n\t\tTWEEN.now = Date.now;\n\t} else {\n\t\tTWEEN.now = function () {\n\t\t\treturn new Date().getTime();\n\t\t};\n\t}\n}).bind(undefined)();\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\t// Set all starting values present on the target object\n\tfor (var field in object) {\n\t\t_valuesStart[field] = parseFloat(object[field], 10);\n\t}\n\n\tthis.to = function (properties, duration) {\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\t_valuesEnd = properties;\n\n\t\treturn this;\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif (_valuesStart[property] instanceof Array === false) {\n\t\t\t\t_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\t};\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof end === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end, 10);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end, 10);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof end === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof _valuesEnd[property] === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property], 10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\t\t\t\t\t_onCompleteCallback.call(_object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n};\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function None(k) {\n\n\t\t\treturn k;\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn k * (2 - k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn -0.5 * (--k * (k - 2) - 1);\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn --k * k * k + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn 1 - --k * k * k * k;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn -0.5 * ((k -= 2) * k * k * k - 2);\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn Math.sqrt(1 - --k * k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn -0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function In(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function In(k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tif (k < 1 / 2.75) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < 2 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n\t\t\t} else if (k < 2.5 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n\t\t\t}\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function Linear(v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\t},\n\n\tBezier: function Bezier(v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\t},\n\n\tCatmullRom: function CatmullRom(v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\t\t}\n\t},\n\n\tUtils: {\n\n\t\tLinear: function Linear(p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\t\t},\n\n\t\tBernstein: function Bernstein(n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\t\t},\n\n\t\tFactorial: function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\t\t\t};\n\t\t}(),\n\n\t\tCatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\t\t}\n\n\t}\n\n};\n\nexports.default = TWEEN;\n\n// UMD (Universal Module Definition)\n// (function (root) {\n\n// \tif (typeof define === 'function' && define.amd) {\n\n// \t\t// AMD\n// \t\tdefine([], function () {\n// \t\t\treturn TWEEN;\n// \t\t});\n\n// \t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n// \t\t// Node.js\n// \t\tmodule.exports = TWEEN;\n\n// \t} else if (root !== undefined) {\n\n// \t\t// Global variable\n// \t\troot.TWEEN = TWEEN;\n\n\n// \t}\n\n// })(this);","'use strict';\n\n{\n  var Vec;\n\n  (function () {\n    var equalNum = function equalNum(a, b) {\n      return Math.abs(a - b) < (Number.EPSILON || pow(2, -52));\n    };\n    Vec = Class.extend({\n      init: function init(x, y, z) {\n        this.x = x || 0;\n        this.y = y || 0;\n        this.z = z || 0;\n      },\n      equal: function equal(v) {\n        //return abs(v.x-this.x)<&&this.y==v.y&&this.z==v.z;\n        return equalNum(this.x, v.x) && equalNum(this.y, v.y) && equalNum(this.z, v.z);\n      },\n      length: function length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n      },\n      normal: function normal() {\n        var len = this.length();\n        return len ? new Vec(this.x / len, this.y / len, this.z / len) : new Vec(0, 0, 0);\n      },\n      scale: function scale(_scale) {\n        return new Vec(this.x * _scale, this.y * _scale, this.z * _scale);\n      },\n      add: function add(vec) {\n        return new Vec(this.x + vec.x, this.y + vec.y, this.z + vec.z);\n      },\n      sub: function sub(vec) {\n        return new Vec(this.x - vec.x, this.y - vec.y, this.z - vec.z);\n      },\n      vertical: function vertical() {\n        return new Vec(this.y, -this.x);\n      },\n      dot: function dot(vec) {\n        //vec是单位向量  那返回的就是投影了\n        // 如果都是单位向量 返回的就是 cos的值   acos可以求出弧度了\n        return this.x * vec.x + this.y * vec.y + this.z * vec.z;\n      },\n      cross_v2: function cross_v2(vec) {\n\n        return this.x * vec.y - this.y * vec.x;\n      },\n      cross: function cross(vec) {\n        //角动量啊！\n        // return this.x*vec.y - this.y*vec.x;\n\n        return new Vec(this.y * vec.z - this.z * vec.y, this.z * vec.x - this.x * vec.z, this.x * vec.y - this.y * vec.x);\n      },\n      clone: function clone() {\n        return new Vec(this.x, this.y, this.z);\n      },\n      rotateY: function rotateY(radian) {\n        var cosine = Math.cos(radian),\n            sine = Math.sin(radian),\n            x = cosine * this.x - sine * this.z,\n            z = cosine * this.z + sine * this.x;\n        return new Vec(x, this.y, z);\n      },\n      rotateX: function rotateX(radian) {\n        // console.log(Math.cos(PI*.5),Math.sin(PI*.5));\n        //  console.log(Math.cos(PI),Math.sin(PI));\n        var cosine = Math.cos(radian),\n            sine = Math.sin(radian),\n            y = cosine * this.y - sine * this.z,\n            z = cosine * this.z + sine * this.y;\n        return new Vec(this.x, y, z);\n      },\n      rotateZ: function rotateZ(radian) {\n        var cosine = Math.cos(radian),\n            sine = Math.sin(radian),\n            x = cosine * this.x - sine * this.y,\n            y = cosine * this.y + sine * this.x;\n        return new Vec(x, y, this.z);\n      },\n      radian: function radian() {\n        return Math.atan2(this.y, this.x);\n      }\n    });\n  })();\n}\n{\n  var Det2;\n\n  (function () {\n    var det = function det(ar) {\n      return ar[0][0] * ar[1][1] - ar[1][0] * ar[0][1];\n    };\n\n    Det2 = function Det2(ar, nar) {\n      var a, b;\n      var D = det(ar);\n      //if(D==0) return console.warn('...!!!');\n      if (D == 0) return;\n\n      var ar1 = $.extend(true, [], ar);\n      var ar2 = $.extend(true, [], ar);\n      ar1[0][0] = nar[0];\n      ar1[1][0] = nar[1];\n\n      ar2[0][1] = nar[0];\n      ar2[1][1] = nar[1];\n\n      return [det(ar1) / D, det(ar2) / D];\n    };\n  })();\n}\n{\n  var Det3;\n\n  (function () {\n    var det = function det(a) {\n      return a[0][0] * a[1][1] * a[2][2] + a[0][1] * a[1][2] * a[2][0] + a[0][2] * a[1][0] * a[2][1] - a[0][2] * a[1][1] * a[2][0] - a[0][1] * a[1][0] * a[2][2] - a[0][0] * a[1][2] * a[2][1];\n    };\n\n    Det3 = function Det3(ar, nar) {\n      var a, b, c;\n      var D = det(ar);\n\n      //if(D==0) return console.warn('矩阵不可逆呦~');\n      if (D == 0) return;\n\n      var ar1 = JSON.parse(JSON.stringify(ar));\n      var ar2 = JSON.parse(JSON.stringify(ar));\n      var ar3 = JSON.parse(JSON.stringify(ar));\n\n      ar1[0][0] = nar[0];\n      ar1[1][0] = nar[1];\n      ar1[2][0] = nar[2];\n\n      ar2[0][1] = nar[0];\n      ar2[1][1] = nar[1];\n      ar2[2][1] = nar[2];\n\n      ar3[0][2] = nar[0];\n      ar3[1][2] = nar[1];\n      ar3[2][2] = nar[2];\n\n      var D1 = det(ar1);\n\n      var D2 = det(ar2);\n\n      var D3 = det(ar3);\n\n      return [D1 / D, D2 / D, D3 / D];\n    };\n  })();\n}\nvar MxEvent = {\n  evs: {},\n  on: function on(s, fn, once) {\n    s = s.trim();\n    if (once && once.trim() == 'once') {\n      this.evs[s] = [fn];\n\n      return this;\n    };\n\n    if (!this.evs[s]) {\n      this.evs[s] = [fn];\n      return this;\n    };\n    this.evs[s].push(fn);\n    return this;\n  },\n  trigger: function trigger(s) {\n    var that = this,\n        args = arguments,\n        ar = this.evs[s = s.trim()];\n\n    //tirgger('aaa' , a,b,c)\n    ar && ar.forEach(function (fn) {\n      fn.apply(that, [].slice.call(args, 1));\n    });\n\n    return this;\n  },\n  off: function off(s) {\n    delete this.evs[s.trim()];\n    return this;\n  }\n};\nvar Event = Class.extend({\n  init: function init() {\n    this.evs = {};\n  },\n  on: function on(s, fn, once) {\n    s = s.trim();\n    if (once && once.trim() == 'once') {\n      this.evs[s] = [fn];\n\n      return this;\n    };\n\n    if (!this.evs[s]) {\n      this.evs[s] = [fn];\n      return this;\n    };\n    this.evs[s].push(fn);\n    return this;\n  },\n  trigger: function trigger(s) {\n    var that = this,\n        args = arguments,\n        ar = this.evs[s = s.trim()];\n\n    //tirgger('aaa' , a,b,c)\n    ar && ar.forEach(function (fn) {\n      fn.apply(that, [].slice.call(args, 1));\n    });\n\n    return this;\n  },\n  off: function off(s) {\n    delete this.evs[s.trim()];\n    return this;\n  }\n});\nvar KeepEvent = {\n  ex_map: Object.create(null),\n  ex: function ex(ss, v) {\n    var s = ss.trim().split(/,/);\n\n    s.forEach(function (s) {\n      var o;\n      s = s.trim();\n\n      if (!(o = this.ex_map[s])) {\n        o = { attr: 0, cb: 0 };\n        this.ex_map[s] = o;\n      };\n\n      if (_$.isFunction(v)) {\n        return o.cb = v;\n      };\n      o.attr = v;\n    }, this);\n  },\n  exLoop: function exLoop(t) {\n    Object.keys(this.ex_map).forEach(function (s) {\n      var o = this.ex_map[s];\n      if (o.cb && o.attr) o.cb.call(this);\n    }, this);\n  }\n};\n\nmodule.exports = {\n  Vec: Vec, Det2: Det2, Det3: Det3, MxEvent: MxEvent, Event: Event, KeepEvent: KeepEvent\n};","\nmodule.exports = require('./dist/main.js');","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@font-face {\\n}\\nhtml {\\n  width: 100%;\\n  height: 100%;\\n  font-family: Helvetica;\\n}\\nbody {\\n  margin: 0 auto;\\n  position: relative;\\n  width: 100%;\\n  min-height: 100%;\\n}\\nbody .rel {\\n  position: relative;\\n  left: 0;\\n  top: 0;\\n}\\nbody .rel_ {\\n  position: relative;\\n}\\nbody .abs {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\nbody .abs_ {\\n  position: absolute;\\n}\\nbody .clear-both {\\n  clear: both;\\n}\\nbody .w {\\n  width: 100%;\\n}\\nbody .wh {\\n  width: 100%;\\n  height: 100%;\\n}\\nbody .show {\\n  display: block;\\n}\\nbody .hide {\\n  display: none;\\n}\\nbody .visible {\\n  visibility: visible;\\n}\\nbody .hidden {\\n  visibility: hidden;\\n}\\nbody .css2-z1 {\\n  z-index: 1;\\n}\\nbody .css2-z2 {\\n  z-index: 2;\\n}\\nbody .css2-z3 {\\n  z-index: 3;\\n}\\nbody .css2-z4 {\\n  z-index: 4;\\n}\\nbody .css2-z5 {\\n  z-index: 5;\\n}\\nbody .css2-z6 {\\n  z-index: 6;\\n}\\nbody .css2-z7 {\\n  z-index: 7;\\n}\\nbody .css2-z8 {\\n  z-index: 8;\\n}\\nbody .css2-z9 {\\n  z-index: 9;\\n}\\nbody .css2-z10 {\\n  z-index: 10;\\n}\\nbody .css2-z11 {\\n  z-index: 11;\\n}\\nbody .css2-z12 {\\n  z-index: 12;\\n}\\nbody .css2-z13 {\\n  z-index: 13;\\n}\\nbody .css2-z14 {\\n  z-index: 14;\\n}\\nbody .css2-z15 {\\n  z-index: 15;\\n}\\nbody .css2-z16 {\\n  z-index: 16;\\n}\\nbody .css2-z17 {\\n  z-index: 17;\\n}\\nbody .css2-z18 {\\n  z-index: 18;\\n}\\nbody .css2-z19 {\\n  z-index: 19;\\n}\\nbody .css2-z20 {\\n  z-index: 20;\\n}\\nbody .css3-z1 {\\n  -webkit-transform: translate3d(\\\"0.01px\\\", 0, 0);\\n}\\nbody .css3-z2 {\\n  -webkit-transform: translate3d(\\\"0.02px\\\", 0, 0);\\n}\\nbody .css3-z3 {\\n  -webkit-transform: translate3d(\\\"0.03px\\\", 0, 0);\\n}\\nbody .css3-z4 {\\n  -webkit-transform: translate3d(\\\"0.04px\\\", 0, 0);\\n}\\nbody .css3-z5 {\\n  -webkit-transform: translate3d(\\\"0.05px\\\", 0, 0);\\n}\\nbody .css3-z6 {\\n  -webkit-transform: translate3d(\\\"0.06px\\\", 0, 0);\\n}\\nbody .css3-z7 {\\n  -webkit-transform: translate3d(\\\"0.07px\\\", 0, 0);\\n}\\nbody .css3-z8 {\\n  -webkit-transform: translate3d(\\\"0.08px\\\", 0, 0);\\n}\\nbody .css3-z9 {\\n  -webkit-transform: translate3d(\\\"0.09px\\\", 0, 0);\\n}\\nbody .css3-z10 {\\n  -webkit-transform: translate3d(\\\"0.1px\\\", 0, 0);\\n}\\nbody .css3-z11 {\\n  -webkit-transform: translate3d(\\\"0.11px\\\", 0, 0);\\n}\\nbody .css3-z12 {\\n  -webkit-transform: translate3d(\\\"0.12px\\\", 0, 0);\\n}\\nbody .css3-z13 {\\n  -webkit-transform: translate3d(\\\"0.13px\\\", 0, 0);\\n}\\nbody .css3-z14 {\\n  -webkit-transform: translate3d(\\\"0.14px\\\", 0, 0);\\n}\\nbody .css3-z15 {\\n  -webkit-transform: translate3d(\\\"0.15px\\\", 0, 0);\\n}\\nbody .css3-z16 {\\n  -webkit-transform: translate3d(\\\"0.16px\\\", 0, 0);\\n}\\nbody .css3-z17 {\\n  -webkit-transform: translate3d(\\\"0.17px\\\", 0, 0);\\n}\\nbody .css3-z18 {\\n  -webkit-transform: translate3d(\\\"0.18px\\\", 0, 0);\\n}\\nbody .css3-z19 {\\n  -webkit-transform: translate3d(\\\"0.19px\\\", 0, 0);\\n}\\nbody .css3-z20 {\\n  -webkit-transform: translate3d(\\\"0.2px\\\", 0, 0);\\n}\\nbutton {\\n  background: transparent;\\n  border: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n  display: block;\\n  outline: none;\\n  cursor: auto;\\n}\\nli {\\n  list-style: none;\\n}\\ncanvas {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n}\\n@media screen and (max-width: 321px) {\\n}\\n@media screen and (min-width: 321px) and (max-width: 400px) {\\n}\\n@media screen and (min-width: 400px) {\\n}\\n@-webkit-keyframes light-mask {\\n  0%,\\n  100% {\\n    visibility: hidden;\\n    opacity: 0;\\n  }\\n  30%,\\n  60% {\\n    visibility: visible;\\n    opacity: 1;\\n  }\\n}\\n.light-mask {\\n  -webkit-animation: 0.5s light-mask;\\n}\\n.shake-vertical {\\n  -webkit-animation: 0.5s shake-vertical;\\n}\\n@-webkit-keyframes shake-vertical {\\n  0% {\\n    -webkit-transform: translate(0px, 0px) rotate(0deg) scale(1.2);\\n  }\\n  2% {\\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\\n  }\\n  4% {\\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\\n  }\\n  6% {\\n    -webkit-transform: translate(0px, -2px) rotate(0deg) scale(1.2);\\n  }\\n  8% {\\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\\n  }\\n  10% {\\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\\n  }\\n  12% {\\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\\n  }\\n  14% {\\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\\n  }\\n  16% {\\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\\n  }\\n  18% {\\n    -webkit-transform: translate(0px, 3px) rotate(0deg) scale(1.2);\\n  }\\n  20% {\\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\\n  }\\n  22% {\\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\\n  }\\n  24% {\\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\\n  }\\n  26% {\\n    -webkit-transform: translate(0px, 9px) rotate(0deg) scale(1.2);\\n  }\\n  28% {\\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\\n  }\\n  30% {\\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\\n  }\\n  32% {\\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\\n  }\\n  34% {\\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\\n  }\\n  36% {\\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\\n  }\\n  38% {\\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\\n  }\\n  40% {\\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\\n  }\\n  42% {\\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\\n  }\\n  44% {\\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\\n  }\\n  46% {\\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\\n  }\\n  48% {\\n    -webkit-transform: translate(0px, 7px) rotate(0deg) scale(1.2);\\n  }\\n  50% {\\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\\n  }\\n  52% {\\n    -webkit-transform: translate(0px, -2px) rotate(0deg) scale(1.2);\\n  }\\n  54% {\\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\\n  }\\n  56% {\\n    -webkit-transform: translate(0px, 3px) rotate(0deg) scale(1.2);\\n  }\\n  58% {\\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\\n  }\\n  60% {\\n    -webkit-transform: translate(0px, -3px) rotate(0deg) scale(1.2);\\n  }\\n  62% {\\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\\n  }\\n  64% {\\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\\n  }\\n  66% {\\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\\n  }\\n  68% {\\n    -webkit-transform: translate(0px, 0px) rotate(0deg) scale(1.2);\\n  }\\n  70% {\\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\\n  }\\n  72% {\\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\\n  }\\n  74% {\\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\\n  }\\n  76% {\\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\\n  }\\n  78% {\\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\\n  }\\n  80% {\\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\\n  }\\n  82% {\\n    -webkit-transform: translate(0px, 9px) rotate(0deg) scale(1.2);\\n  }\\n  84% {\\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\\n  }\\n  86% {\\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\\n  }\\n  88% {\\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\\n  }\\n  90% {\\n    -webkit-transform: translate(0px, -6px) rotate(0deg) scale(1.2);\\n  }\\n  92% {\\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\\n  }\\n  94% {\\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\\n  }\\n  96% {\\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\\n  }\\n  98% {\\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\\n  }\\n}\\n#xxzoom {\\n  width: 1000%;\\n  height: 100%;\\n  background: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.001) 0%, #000000 30%, #000000 70%, rgba(0, 0, 0, 0.001) 100%);\\n  -webkit-transform: translate3d(-100%, 0, 0);\\n}\\n#xzoom {\\n  background: #000000;\\n}\\n.xfade {\\n  -webkit-animation: 1s xfade1 forwards\\n\\t\\t,1s 1.5s xfade2 forwards;\\n}\\n@-webkit-keyframes xfade1 {\\n  0% {\\n    visibility: hidden;\\n    opacity: 0;\\n  }\\n  100% {\\n    visibility: visible;\\n    opacity: 1;\\n  }\\n}\\n@-webkit-keyframes xfade2 {\\n  0% {\\n    visibility: visible;\\n    opacity: 1;\\n  }\\n  100% {\\n    visibility: hidden;\\n    opacity: 0;\\n  }\\n}\\ns-word {\\n  display: none;\\n}\\n.animated1 {\\n  -webkit-animation: 0.5s ease-in-out forwards;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../node_modules/less-loader/dist/cjs.js!./main1.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../node_modules/less-loader/dist/cjs.js!./main1.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../node_modules/less-loader/dist/cjs.js!./main1.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import './main1.less';\r\nimport './freecamera';\r\nimport TWEEN from 'miku-tween';\r\nimport TiaoYiTiao from './tiaoyitiao';\r\n\r\nmodule.exports = TiaoYiTiao;\r\n\r\n\r\n\r\n"],"sourceRoot":""}