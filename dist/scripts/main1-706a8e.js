/*!
 * @author  flip-bottle-game<2540546236@qq.com>
 * @lastest Thu Sep 13 2018 13:37:46 GMT+0800 (中国标准时间)}
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TiaoYiTiao=e():t.TiaoYiTiao=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="//static.xyimg.net/gamesite/mu/mufed/bottle-flip-game/dist/",n(n.s=29)}([function(t,e,n){t.exports=n(23)},function(t,e,n){"use strict";var o={initial:function(t){var e=this,n=Object.keys(t).map(function(e){var n=t[e];return Promise.all(n.map(function(t,e){return new Promise(function(e){var n=new THREE.TextureLoader;n.crossOrigin="*",n.load(t,function(t){e(t)})})})).then(function(n){return t[e]=n,new Promise(function(t){t(n)})})});Promise.all(n).then(function(n){e._handle_complete&&e._handle_complete(t)})},onComplate:function(t){this._handle_complete=t}};t.exports={TextureManager:o}},function(t,e,n){"use strict";var o=n(25);window.Cam=window.FreeCamera=function(t){var e=t.camera,n=t.el,i=void 0===n?window:n,r=t.mw,a=(void 0===r&&innerWidth,t.mh),s=(void 0===a&&innerHeight,t.keycode_move),c=void 0===s||s,u=t.range,l=void 0===u?{the:[0,126],fai:[123,201]}:u,d={rotate:1,position:1},h=180,f=90,p=0,m=0,g=0,y=Object.defineProperties({update:function(){if(!this.transition){w.update();var t=this.φ/180*PI,n=this.θ/180*PI;this.v3_look=new o.Vec(sin(n)*sin(t),cos(n),sin(n)*cos(t)),this.v3_look_right=new o.Vec(sin(n)*sin(t-.5*PI),cos(n),sin(n)*cos(t-.5*PI)),this.v3_look_up=this.v3_look.cross(this.v3_look_right),this.v3_camera=new o.Vec(p,m,g),e.position.set(p,m,g);var i=this.v3_camera.add(this.v3_look);e.lookAt(new THREE.Vector3(i.x,i.y,i.z))}},transition:0,movingPath:function(t){t.time,t.θ,t.φ},slerp:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.bit_dist,a=(i.until,i.time),s=void 0===a?1e3:a,c=i.θ,u=i.φ;this.transition=1;var l=this.v3_look.dot(t),d=function(t,e,n){var o,i,r=function(n,r){return o*t[n]+i*e[n]};return{pos:function(t){return o=sin((1-t)*n)/sin(n),i=sin(t*n)/sin(n),{x:r("x"),y:r("y"),z:r("z")}},tangent:function(t){},v0:t,v1:e,rad:n,deg:n/PI*180}}(this.v3_look,t,l);return new TWEEN.Tween({t:0}).to({t:1},s).onStart(function(){r&&(this.bv=new o.Vec(y.x,y.y,y.z))}).onUpdate(function(){var t=d.pos(this.t);if(y.v3_look=new o.Vec(t.x,t.y,t.z),r){var n=[this.t,1-this.t],i=n[0],a=n[1];p=this.bv.x*a+r.x*i,m=this.bv.y*a+r.y*i,g=this.bv.z*a+r.z*i}else p=y.x,m=y.y,g=y.z;e.position.set(y.v3_camera.x,y.v3_camera.y,y.v3_camera.z);var s=y.v3_camera.add(y.v3_look);e.lookAt(new THREE.Vector3(s.x,s.y,s.z))}).onComplete(function(){y.transition=0,y.θ=c,y.φ=u,n&&n()}).start(),{complete:function(t){n=t}}},v3_look:new o.Vec,v3_look_back:new o.Vec,v3_look_right:new o.Vec,v3_look_left:new o.Vec,v3_look_up:new o.Vec,v3_camera:new o.Vec,v3_speed:new o.Vec,camera:e,speed:{front:1,back:1,right:1,left:1},cancelDefualt:function(){arguments.length?Array.from(arguments,function(t){if(!d[t])return console.wran("!");d[t]=0}):d.rotate=d.position=0},walkFront:function(t){w.front.run=!0},walkBack:function(t){w.back.run=!0},walkRight:function(t){w.right.run=!0},walkLeft:function(t){w.left.run=!0}},{"θ":{get:function(){return f},set:function(t){f=t}},"φ":{get:function(){return h},set:function(t){h=t}},the:{get:function(){return f},set:function(t){f=t}},phi:{get:function(){return h},set:function(t){h=t}},rotate:{get:function(){return[f,h]},set:function(t,e){f=t,h=e}},x:{get:function(){return p},set:function(t){p=t,this.v3_camera.x=p}},y:{get:function(){return m},set:function(t){m=t,this.v3_camera.y=m}},z:{get:function(){return g},set:function(t){g=t,this.v3_camera.z=g}},position:{get:function(){return[p,m,g]},set:function(t,e,n){p=t,m=e,g=n}}}),w={add:function(t,e){w[t]=this.mp[t]={run:0,update:function(){e()}}},mp:{},code_mp:{87:"w",83:"s",65:"a",68:"d"},update:function(){var t=this;Object.keys(this.mp).forEach(function(e){var n=t.mp[e];n.run&&n.update()})}};w.add("w",function(){y.v3_speed=y.v3_look.clone();var t=y.v3_speed.scale(y.speed.front);p+=t.x,g+=t.z}),w.add("s",function(){y.v3_speed=y.v3_look.clone().scale(-1);var t=y.v3_speed.scale(y.speed.back);p+=t.x,g+=t.z}),w.add("d",function(){y.v3_speed=y.v3_look_right.clone();var t=y.v3_speed.scale(y.speed.right);p+=t.x,g+=t.z}),w.add("a",function(){y.v3_speed=y.v3_look_right.clone().scale(-1);var t=y.v3_speed.scale(y.speed.left);p+=t.x,g+=t.z});var v,b,x=void 0,_=void 0,E=void 0,k=void 0;i.addEventListener("mousedown",function(t){x||(x=t.pageX),_||(_=t.pageY)}),i.addEventListener("mousemove",function(t){d.rotate&&x&&_&&(E=-.2*(t.pageX-x),k=.3*(t.pageY-_),x=t.pageX,_=t.pageY,y.φ+=E,y.θ+=k,y.the=y.θ,y.phi=y.φ,y.θ>l.the[1]&&(y.θ=l.the[1]),y.φ<l.fai[0]&&(y.φ=l.fai[0]),y.φ>l.fai[1]&&(y.φ=l.fai[1]),y.trigger("rotate",{delta_x:E,delta_y:k}))}),i.addEventListener("mouseup",function(t){x=_=0}),i.addEventListener("touchend",function(t){x=_=0}),p=e.position.x,m=e.position.y,g=e.position.z;var T=function(t){if(c){var e=w[w.code_mp[t.keyCode]];e&&(v||(v=b=new o.Vec(p,m,g)),v=new o.Vec(p,m,g),y.v3_key=new o.Vec(v.x-b.x,v.y-b.y,v.z-b.z),b.x=v.x,b.y=v.y,b.z=v.z,"keyup"!=t.type?e.run=1:e.run=0)}};return addEventListener("keydown",T),addEventListener("keyup",T),window.FreeCamera=window.Cam=$.extend(!0,y,K.MxEvent),window.FreeCamera}},function(t,e,n){var o={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),r=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),a=null,s=0,c=[],u=n(26);function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=o[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(g(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],e));o[i.id]={id:i.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],a=e.base?r[0]+e.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function h(t,e){var n=r(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=c[c.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=r(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function f(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function p(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),m(e,t.attrs),h(t,e),e}function m(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,o,i,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var c=s++;n=a||(a=p(e)),o=w.bind(null,n,c,!1),i=w.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),h(t,e),e}(e),o=function(t,e,n){var o=n.css,i=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(o=u(o));i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([o],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){f(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return l(n,e),function(t){for(var i=[],r=0;r<n.length;r++){var a=n[r];(s=o[a.id]).refs--,i.push(s)}t&&l(d(t,e),e);for(r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function w(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(o),r=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){t.exports=n.p+"img/score-2.png?6b6233"},function(t,e,n){t.exports=n.p+"img/score-1.png?019c2a"},function(t,e,n){t.exports=n.p+"img/floor2.jpg?19d062"},function(t,e,n){t.exports=n.p+"img/game-board2.jpg?e1f51a"},function(t,e,n){t.exports=n.p+"img/game-board1.jpg?0aa61c"},function(t,e,n){t.exports=n.p+"img/board1.jpg?f940a0"},function(t,e,n){t.exports=n.p+"img/boarde.jpg?f63c97"},function(t,e,n){t.exports=n.p+"img/boardb.jpg?408335"},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(t){var e,o,i;e=void 0!==(t=t||{}).parent?t.parent:document.body,o=void 0!==t.id?t.id:"oldie",(i=n.getWebGLErrorMessage()).id=o,e.appendChild(i)}};"object"===e(t)&&(t.exports=n)}).call(this,n(13)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));e.default=function(t){var e=t.map,n=new THREE.Mesh(new THREE.CylinderGeometry(9,12,230),new THREE.MeshPhongMaterial({color:(new THREE.Color).setRGB(.2,.2,.2)})),i=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(Array(4))).map(function(){return new THREE.MeshPhongMaterial({color:2960685,specular:20560})}),r=document.createElement("canvas");r.width=400,r.height=300,r.getContext("2d").drawImage(e.image,0,0,r.width,r.height);e=new THREE.Texture(r);i.push(new THREE.MeshPhongMaterial({map:e,specular:16777215}),new THREE.MeshPhongMaterial({map:e,specular:16777215}));var a=new THREE.Mesh(new THREE.BoxGeometry(400,300,30),i);return a.material[a.material.length-1].map.needsUpdate=!0,a.material[a.material.length-2].map.needsUpdate=!0,n.add(a),a.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,n.geometry.parameters.height+.5*a.geometry.parameters.height,0)),n.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,.5*n.geometry.parameters.height,0)),n.visible=!1,n.castShadow=!0,n.receiveShadow=!0,a.castShadow=!0,a.receiveShadow=!0,Object.assign(n,{fallDown:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delay,e=void 0===t?2e3:t,i=this;new o.default.Tween({y:1e3}).to({y:0},1555).easing(o.default.Easing.Cubic.In).delay(e).onStart(function(){n.visible=!0}).onUpdate(function(){n.position.y=this.y}).onComplete(function(){i._handle_fall&&i._handle_fall()}).start()},onFallEnd:function(t){this._handle_fall=t},comeOut:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delay,e=void 0===t?3e3:t;new o.default.Tween({y:-1*(n.geometry.parameters.height+a.geometry.parameters.height)}).to({y:0},2233).easing(o.default.Easing.Cubic.In).delay(e).onStart(function(){n.visible=!0}).onUpdate(function(){n.position.y=this.y}).onComplete(function(){}).start()}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var i="stading",r="flipping",a="holding",s="died",c="outside";e.default=function(){var t=(new THREE.Color).setRGB(.1,.1,.1),e=new THREE.Mesh(new THREE.CylinderGeometry(1.5,2,10,32),new THREE.MeshPhongMaterial({color:t,transparent:!0}));e.material.opacity=1,e.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,.5*e.geometry.parameters.height,0)),e.castShadow=!0,e.receiveShadow=!0;var n=new THREE.Mesh(new THREE.SphereGeometry(2),new THREE.MeshPhongMaterial({color:t,transparent:!0}));return e.add(n),n.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,1.333*e.geometry.parameters.height,0)),n.castShadow=!0,n.receiveShadow=!0,Object.assign(e,{holding:function(){this.status=a,this.hold_coefficient+=.007,this.hold_coefficient>1&&(this.hold_coefficient=1),this.scale.y=.7*(1-this.hold_coefficient)+.3},start:function(){this.rotation.z=0,this.status=i},canHolding:function(){return this.status===i||this.status===a},canFlipping:function(){return this.status===a},_controlVertex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,-t,0)),n.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,-t,0)),this.position.y+=t},onFilpEnd:function(t){this._handle_flip_end=t},fewFlip:function(t){var e=t.onUpdate,n=t.po_increments,o=this;return new Promise(function(t){!function n(i){o.hold_coefficient=.5,o.flipping(function(t){e&&e(t)},123,200,600,!1).then(function(e){if(1===i)return t();n(--i)})}(n.length)})},isOutside:function(){return this.status===c},isStading:function(){return this.status===i},isDied:function(){return this.status===s},fallDown:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.rz,i=void 0===n?30:n,r=e.delay,a=void 0===r?333:r,c=this;return this.status=s,new Promise(function(e){new o.default.Tween({y:t.position.y,rz:0}).delay(a).easing(o.default.Easing.Cubic.In).to({y:0,rz:i},1234).onUpdate(function(){c.position.y=this.y,c.rotation.z=this.rz}).onComplete(function(){e()}).start()})},stopToTop:function(){this.tw_top1.stop(),this.tw_top2.stop()},flipToTop:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.height,i=e.onUpdate,r=e.onPer,a=e.delay,s=void 0===a?0:a,c=e.onFlipStart,u=e.flip_dur,l=void 0===u?3333:u,d=this;return new Promise(function(e){t.status="fliptotop";var a=new o.default.Tween({scale:1}).to({scale:.6},566).delay(s).onUpdate(function(){d.scale.y=this.scale}),u=new o.default.Tween({y:t.position.y,t:0}).to({y:n,t:1},l).easing(o.default.Easing.Cubic.Out).onStart(function(){this.once=!1,d.scale.y=1,c&&c()}).onUpdate(function(){d.position.y=this.y,i&&i(d.position),this.t>=.2&&!this.once&&(this.once=!0,r&&r(d.position))}).onComplete(function(){e()});t.tw_top1=a,t.tw_top2=u,a.chain(u),a.start()})},flipping:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:26,s=this,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:433,u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.scale.y=1;var l=this,d=.5*e.geometry.parameters.height,h=150*this.hold_coefficient;return this.position.y,u&&(this.status=r),new Promise(function(r){new o.default.Tween({t:0}).to({t:1},c).delay(n).onStart(function(){l._controlVertex(d),this.bef={x:l.position.x,y:l.position.y}}).onUpdate(function(){e.rotation.z=this.t*-PI*2;var n=this.bef.x+this.t*h,o=this.bef.y+sin(this.t*PI)*a;l.position.x=n,l.position.y=o,t&&t(l.position)}).onComplete(function(){l._controlVertex(-d),u&&(l.status=i),l._handle_flip_end&&l._handle_flip_end(l),r()}).start(),s.hold_coefficient=0})},hold_coefficient:0,status:c})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Class.create({init:function(t){this.els=[],this.groups=[],this.group_id=0,this.in_group_num=t.in_group_num||10,this.once=!1,this.far=t.far||3e3,this.allow_far=this.far,this.handle_each_child=t.handle_each_child},reset:function(t){this.once=!1,this.group_id=0,t&&this.els.forEach(function(e){return t.remove(e)}),this.els=[],this.groups=[],this.allow_far=this.far},elForThatArea:function(t,e,n){var o=this;return this.group_id++,[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(Array(this.in_group_num))).map(function(i,r){var a=o.handle_each_child.call(o,t,e,n);return n.add(a),o.els.push(a),a.group_id=o.group_id,a})},render:function(t,e){var n=this.groups,o=this.far;this.in_group_num;(this.once||(this.once=!0,this.groups=[this.elForThatArea(0,-o,e),this.elForThatArea(0,o,e),this.elForThatArea(o,o,e)]),0!=(t=t.x)&&t>this.allow_far)&&(this.allow_far+=o,this.groups.shift().forEach(function(t){e.remove(t)}),this.groups.push(this.elForThatArea(t+o,o,e)),console.log("%c creat and destory groups!!","font-size:30px;",n))}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));e.default=function(){var t=new THREE.Mesh(new THREE.BoxGeometry(3,200,3),new THREE.MeshLambertMaterial({color:14929779})),e=new THREE.Mesh(new THREE.OctahedronGeometry(20,1),new THREE.MeshLambertMaterial({color:22800}));return t.add(e),e.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,.5*t.geometry.parameters.height,0)),t.castShadow=!0,e.castShadow=!0,Object.assign(t,{flip:function(t){var e=t.delay,n=void 0===e?200:e,i=this;new o.default.Tween({t:0}).to({t:1},200+200*random()).delay(n).onStart(function(){this.by=i.position.y,this.dy=8+8*random()}).onUpdate(function(){i.position.y=this.by+sin(this.t*PI)*this.dy}).start()}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.goods,i=void 0===n?null:n,r=e.height,a=void 0===r?600:r,s=(e.billboard,e.billboard_map),c=(new THREE.Color).setHSL(Math.random(),1,.9),u=new THREE.MeshPhongMaterial({color:c,transparent:!0,specular:16777215,flatShading:!1});if(random()>.2){(t=new THREE.Mesh(new THREE.CylinderGeometry(15,15,a,32),u)).material.opacity=0,t.position.y=.5*t.geometry.parameters.height,t.castShadow=!0,t.receiveShadow=!0;t.geometry.parameters;var l=new THREE.Mesh(new THREE.CylinderGeometry(15,15,20,32,32,!0,0,.6*PI),new THREE.MeshPhongMaterial({specular:16777215,flatShading:!1,map:s}));l.position.set(0,.5*a-l.geometry.parameters.height*(.6+1*random()),.1),l.rotation.y=-.5-.433*random(),t.add(l)}else(t=new THREE.Mesh(new THREE.BoxGeometry(30,a,30),u)).material.opacity=0,t.position.y=.5*t.geometry.parameters.height,t.castShadow=!0,t.receiveShadow=!0;return t.castShadow=!1,new o.default.Tween({opacity:0}).to({opacity:1},333).onUpdate(function(){t.material.opacity=this.opacity}).start(),Object.assign(t,{goods:i,displayGoods:function(t){var e=this;setTimeout(function(){alert("OvO你得到了cdk："+e.goods.cdk)},433)},goodsLookAt:function(t){}})};var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));n(1)},function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"#game_container {\n  width: 800px;\n  height: 500px;\n  margin: 0 auto;\n}\n#no-gl-for-you {\n  width: 100%;\n  height: 100%;\n}\n#no-gl-for-you span {\n  display: block;\n  margin: 0 auto;\n  text-align: center;\n  color: black;\n  margin-top: 20%;\n}\n",""])},function(t,e,n){var o=n(20);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(3)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};n(21),n(2);var i=h(n(19)),r=h(n(0)),a=h(n(18)),s=h(n(17)),c=h(n(16)),u=h(n(15)),l=n(1),d=h(n(14));function h(t){return t&&t.__esModule?t:{default:t}}function f(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var p=document.body,m=p.offsetWidth,g=p.offsetHeight,y=$("#game_container");y.on("touchstart",function(t){t.preventDefault()}),K.Brower.version.mobile?($("#holder").css({width:"100%",height:"100%"}),y.width(g).height(m).css({"transform-origin":"0% 0%",transform:"rotateZ(90deg) translate3d(0%,-100%,0)"})):(y.width(m).height(.5*m),$('<p style="font-size:32px;text-align:center;">pc端长按空格=w=</p>').appendTo("#holder")),e.default=K.Event.extend({init:function(t){var e=this;if(this._super(),this.options=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({can_play:!0,$container:$(document.body),status_msg:""},"can_play",!1),Object.assign(this.options,t),t.Api,this.$container=$(this.options.$container),this.status_msg=this.options.status_msg,this.can_play=this.options.can_play,!this._supportGl())return this._noGlForYou();this._max_phase=100,this._phase=0,this.score=0,this._good_i=0,this.goods=t.goods,this._request=!1,this.can_update_camera=!1,this.mesh_points=[],this.v3_look=new THREE.Vector3(0,0,-1).applyAxisAngle(new THREE.Vector3(1,0,0),.1).applyAxisAngle(new THREE.Vector3(0,1,0),-.2),this.num_of_game=this.options.num_of_game,this.score=0,this.current_grid=null,this._keydown=!1,this.Phases={},this._createStage(),this.on("round_",function(){e.num_of_game--,console.log("%c round_,score:%s,num_of_game:%s","color:black;",e.score,e.num_of_game),e.trigger("round-of-game",{score:e.score,num_of_game:e.num_of_game}),e._restart()}),this._getGameResult().then(function(t){e._textures=t,e._createActor(),e._createPhases(),e._run(),e._render()})},_getGameResult:function(){return new Promise(function(t){l.TextureManager.initial({boards_small:[n(12),n(11),n(10)],boards_big:[n(9),n(8)],floor:[n(7)],points:[n(6),n(5)]}),l.TextureManager.onComplate(function(e){t(e)})})},_supportGl:function(){return!!d.default.webgl||void 0},_noGlForYou:function(){var t=document.createElement("div");t.id="no-gl-for-you",$(this.$container).append(t),t.innerHTML="\n      <span>浏览器君需要升级！或者换个浏览器再试！</span>\n    "},_noChance:function(){alert("次数用尽！")},_restart:function(){var t=this;this._zoom.show({phase0:function(){t.cubes.forEach(function(e){t.scene.remove(e)});t.cubes=[].concat(f(Array(2))).map(function(e,n){var o=(0,i.default)({height:800,billboard_map:t._textures.boards_small[t._textures.boards_small.length-1]});return o.position.x=n/2*100,t.scene.add(o),o}),t.current_grid=null,t._phase=0,t.score=0;var e=t.cubes[0].position,n={po1:e.clone().add(new THREE.Vector3(0,.6*t.cubes[0].geometry.parameters.height,0)),po2:e.clone().add(new THREE.Vector3(0,.5*t.cubes[0].geometry.parameters.height,0))},o=n.po2;Object.assign(FreeCamera,{x:o.x,y:o.y+100,z:o.z+150,speed:{front:8,back:8,left:3,right:3},"θ":116,"φ":165}),t._infinity_tree.reset(t.scene),t._infinity_ground.reset(t.scene),t.mesh_score.setScore(t.score),t.chessman.position.copy(o),t.chessman.start()},phase1:function(){}})},_addScore:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).score,e=void 0===t?1:t;this.score+=e,this.mesh_score.setScore(this.score),this.trigger("score",{score:this.score});var n=this.chessman.geometry.parameters.radiusBottom;n*=e>1?10:5;var o=e>1?1.23*n:2.23*n,i=new THREE.Mesh(new THREE.PlaneGeometry(n,n),new THREE.MeshBasicMaterial({map:this._textures.points[e-1],transparent:!0,side:THREE.DoubleSide}));this.scene.add(i),this.mesh_points.push(i),i.position.copy(this.chessman.position.clone().add(new THREE.Vector3(0,o,0))),new r.default.Tween({opacity:1,y:i.position.y}).to({opacity:0,y:i.position.y+10},366).onUpdate(function(){i.position.y=this.y,i.material.opacity=this.opacity}).onComplete(function(){}).start()},_run:function(){var t=this,e=this.Phases,n=e.MoveToSpecialPo,o=e.FlipToHeight,i=new n,a=new o,s=this;i.on("clear",function(){a.execute()}),a.on("clear",function(){s.on("_keydown",function(){s.can_play&&(s._zoom.hidding||s._request||0!==s.num_of_game&&s.chessman.canHolding()&&s.chessman.holding())}),s.on("_keyup",function(){return s.can_play?0===s.num_of_game?s._noChance():void(s.chessman.canFlipping()&&s.chessman.flipping()):alert(s.status_msg)}),t.light.position.set(17,30,138),t.can_update_camera=!0;var e=t.cubes[0].position,n={po1:e.clone().add(new THREE.Vector3(0,.6*t.cubes[0].geometry.parameters.height,0)),po2:e.clone().add(new THREE.Vector3(0,.5*t.cubes[0].geometry.parameters.height,0))},o=n.po1,i=n.po2;Object.assign(FreeCamera,{x:o.x,y:i.y+100,z:o.z+150,speed:{front:8,back:8,left:3,right:3},"θ":116,"φ":165}),FreeCamera.update(),new r.default.Tween({x:o.x,y:o.y,z:o.z}).to(i,1234).delay(566).easing(r.default.Easing.Bounce.Out).onUpdate(function(){s.chessman.position.copy(new THREE.Vector3(this.x,this.y,this.z))}).onComplete(function(){s.chessman.start(),s.mesh_score.show()}).start()}),addEventListener("keydown",function(e){32===e.keyCode&&e.preventDefault(),32===e.keyCode&&(t._keydown=!0)}),addEventListener("keyup",function(e){32===e.keyCode&&e.preventDefault(),32===e.keyCode&&(t._keydown=!1,t.trigger("_keyup"))}),addEventListener("touchstart",function(e){e.preventDefault(),t._keydown=!0}),addEventListener("touchend",function(e){e.preventDefault(),t._keydown=!1,t.trigger("_keyup")}),i.execute()},_createPhases:function(){var t=K.Event.extend({init:function(){this._super()},execute:function(){}}),e=this,n=t.extend({init:function(){this._super()},execute:function(){var t=this,n={po1:new THREE.Vector3(-300,0,0),po2:new THREE.Vector3(60,0,0)},o=n.po1,i=n.po2;e.chessman.position.copy(o.clone());var r=e.chessman.position;e._addBillBoard({position:r.clone().add(new THREE.Vector3(0,0,-900)),delay:0,active_fall:!1,map:e._textures.boards_big[0]});e._addBillBoard({position:r.clone().add(new THREE.Vector3(900,0,-800)),delay:666,active_fall:!1,map:e._textures.boards_big[1]}).rotation.y=-.5;var a=i.x-o.x;e.camera.lookAt(e.camera.position.clone().add(e.v3_look)),e.camera.position.copy(e.chessman.position.clone().add(new THREE.Vector3(0,10,150))),setTimeout(function(){e.chessman.fewFlip({onUpdate:function(t){e.camera.position.copy(new THREE.Vector3(t.x,t.y+10,t.z+150)),e.camera.lookAt(e.camera.position.clone().add(e.v3_look))},po_increments:[].concat(f(Array(3))).map(function(t,e){return new THREE.Vector3(r.x+e/3*a,0,0)})}).then(function(e){t.trigger("clear",{})})},666)}}),o=t.extend({init:function(){this._super()},execute:function(){console.log("F");var t=0,n=this;e.chessman.flipToTop({height:400,delay:566,flip_dur:3333,onFlipStart:function(){setTimeout(function(){e.chessman.stopToTop(),e._zoom.show({phase0:function(){n.trigger("clear",{})}})},888)},onUpdate:function(n){(t+=.02)>=.6||e.camera.lookAt(e.camera.position.clone().add(e.v3_look.applyAxisAngle(new THREE.Vector3(1,0,0),.02)))},onPer:function(){}}).then(function(t){})}});this.Phases={MoveToSpecialPo:n,FlipToHeight:o}},assignGoods:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).goods},_setRandGoods:function(t){},_createActor:function(){var t=this,e=this;this._infinity_tree=new s.default({far:3e3,in_group_num:123,handle_each_child:function(t,e){var n=(0,a.default)();return n.position.copy(new THREE.Vector3(t+e*random(),0,-350-1800*random())),n}});var n=this._textures.floor[0];this._infinity_ground=new s.default({far:1e4,in_group_num:1,handle_each_child:function(t,e){var o=new THREE.Mesh(new THREE.PlaneBufferGeometry(e,e),new THREE.MeshPhongMaterial({color:16777215,specular:328965,map:n}));return o.rotation.x=-Math.PI/2,o.material.map.wrapS=o.material.map.wrapT=THREE.RepeatWrapping,o.material.map.repeat.set(80,80),o.receiveShadow=!0,o.position.copy(new THREE.Vector3(t+.5*e,0,0)),o}});this.cubes=[].concat(f(Array(2))).map(function(n,o){var r=(0,i.default)({height:800,billboard_map:e._textures.boards_small[random()*e._textures.boards_small.length|0]});return r.position.x=o/2*100,t.scene.add(r),r}),this.chessman=(0,c.default)({}),this.scene.add(this.chessman),this.chessman.onFilpEnd(function(){var n=new THREE.Mesh(new THREE.RingBufferGeometry(5,7,32),new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,transparent:!0}));e.scene.add(n),n.rotation.x=.5*PI,n.position.copy(t.chessman.position.clone().add(new THREE.Vector3(0,.16*t.chessman.geometry.parameters.height,0))),new r.default.Tween({t:1,a:1}).to({t:3,a:0},333).easing(r.default.Easing.Quadratic.Out).onUpdate(function(){n.scale.set(this.t,this.t,this.t),n.material.opacity=this.a}).onComplete(function(){e.scene.remove(n)}).start()});var o=this.renderer.getSize(),u=o.width,l=o.height,d=document.createElement("canvas");d.width=d.height=100;var h=d.getContext("2d");this.mesh_score=new THREE.Mesh(new THREE.PlaneGeometry(100,100),new THREE.MeshBasicMaterial({map:new THREE.Texture(d),transparent:!0})),this.orth_scene.add(this.mesh_score);var p=this.mesh_score.geometry.parameters;this.mesh_score.position.copy(new THREE.Vector3(.5*u-.5*p.width,.5*l-.5*p.height,0)),Object.assign(this.mesh_score,{setScore:function(t){h.clearRect(0,0,d.width,d.height),h.font="40px Georgia",h.textAlign="center",h.fillText(t,.5*d.width,.5*d.height),this.material.map.needsUpdate=!0},show:function(){this.visible=!0},hide:function(){this.visible=!1}}),this.mesh_score.setScore(0),this.mesh_score.hide();var m=this.renderer.getSize(),g=m.width,y=m.height,w=new THREE.Mesh(new THREE.PlaneBufferGeometry(g,y),new THREE.MeshBasicMaterial({color:(new THREE.Color).setRGB(0,0,0),transparent:!0}));e.orth_scene.add(w),Object.assign(w,{hidding:!1,show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.delay,o=void 0===n?0:n,i=e.delay2,a=void 0===i?888:i,s=e.dur,c=void 0===s?433:s,u=e.phase0,l=e.phase1,d=this;return new Promise(function(e){t.itv&&t.itv.stop(),t.itv=new r.default.Tween({opacity:0}).delay(o).to({opacity:1},c).onUpdate(function(){d.material.opacity=this.opacity}).onComplete(function(){u&&u()}),t.itv2&&t.itv2.stop(),t.itv2=new r.default.Tween({opacity:1}).delay(a).to({opacity:0},c).onUpdate(function(){d.material.opacity=this.opacity}).onComplete(function(){l&&l()}),t.itv.chain(t.itv2),t.itv.start()})},hide:function(){}}),w.material.opacity=0,e._zoom=w},_addBillBoard:function(t){var e=this,n=t.position,o=void 0===n?new THREE.Vector3(0,0,0):n,i=t.delay,r=void 0===i?0:i,a=t.active_fall,s=void 0===a||a,c=t.map,l=(0,u.default)({map:c});return this.scene.add(l),l.position.copy(o),l.onFallEnd(function(){s&&e._infinity_tree.els.forEach(function(t){t.flip({delay:50*random()})})}),l.fallDown({delay:r}),l},_addNextGrid:function(){var t=this;this._request=!0,this._handel_next_grid=function(e){t._request=!1;var n=e.goods,o=(0,i.default)({height:800,goods:n,billboard:random()<.3,billboard_map:t._textures.boards_small[random()*t._textures.boards_small.length|0]});o.castShadow=!1,o.material.opacity=1;var r=100*min(t._phase/t._max_phase,1);o.position.x=t.current_grid.position.x+50+random()*r,t.scene.add(o),t.cubes.push(o)},this.trigger("next-grid",{_phase:this._phase,fn:this._handel_next_grid.bind(this)})},_checkChessManOutSide:function(){var t=this,e=this.chessman.position.clone();e.y=max(e.y,this.cubes[0].position.y+this.cubes[0].geometry.parameters.height);var n=new THREE.Raycaster(e,new THREE.Vector3(0,-1,0)).intersectObjects([].concat(f(this.cubes)));if(!this.chessman.isOutside()){if(!n.length&&this.chessman.isStading())return this.chessman.fallDown({}).then(function(e){t.trigger("round_",{})}),void console.log("%c outside! status:%s","color:teal;",this.chessman.status);if(n.length&&this.chessman.isStading()){var i=n[0],r=(i.distance,i.point),a=i.object;if(this.current_grid||(this.current_grid=a),this.current_grid!=a){this.current_grid=a,this._phase++,this.current_grid.goods&&(this.current_grid.displayGoods(this.scene),this.trigger("receive-goods",o({},this.current_grid.goods)));var s=this.current_grid.position.clone().add(new THREE.Vector3(0,.5*this.current_grid.geometry.parameters.height,0)),c=r.clone().sub(s).length();this._addScore({score:c<4?2:1}),this._phase>0&&this._addNextGrid(),this._phase,console.log("%c _phase:%s","color:red;",this._phase)}}}},_trackChessMan:function(){this.chessman.isDied()||(FreeCamera.x=this.chessman.position.x)},_render:function(){var t=this;requestAnimationFrame(function e(){requestAnimationFrame(e),t._keydown&&t.trigger("_keydown"),r.default.update(),t.renderer.clear(),t.renderer.render(t.scene,t.camera),t.renderer.clearDepth(),t.renderer.render(t.orth_scene,t.orth_camera),t._infinity_tree.render({x:Cam.x},t.scene),t._infinity_ground.render({x:Cam.x},t.scene),t._checkChessManOutSide(),t._trackChessMan(),t.cubes.forEach(function(t){t.goodsLookAt(new THREE.Vector3(FreeCamera.x,FreeCamera.y,FreeCamera.z))}),t.can_update_camera&&FreeCamera.update()})},_createStage:function(){var t=this.$container,e=[t.width(),t.height()],n=e[0],o=e[1],i=new THREE.Scene,r=new THREE.PerspectiveCamera(30,t.width()/t.height(),.1,1e4),a=new THREE.WebGLRenderer({antialias:!0});a.autoClear=!1,a.setClearColor(0,1),a.setSize(t.width(),t.height());var s=new THREE.Scene,c=new THREE.OrthographicCamera(-n/2,n/2,o/2,o/-2,.1,6e3);c.position.copy(new THREE.Vector3(0,0,10)),a.shadowMap.enabled=!0,a.shadowMap.type=THREE.PCFSoftShadowMap,t.append(a.domElement),i.background=(new THREE.Color).setRGB(.6,1,1),i.fog=new THREE.FogExp2(i.background,6e-4),FreeCamera({camera:r,el:t[0],keycode_move:!0}),FreeCamera.update();var u=new THREE.AmbientLight((new THREE.Color).setRGB(.2,.2,.2));i.add(u);var l=new THREE.DirectionalLight(16777215,1);l.color.setHSL(.1,1,.8),l.position.set(17,30,138),l.position.set(30,69,47),i.add(l),l.castShadow=!0,l.shadow.mapSize.width=2048,l.shadow.mapSize.height=2048;var d=1500;l.shadow.camera.left=-d,l.shadow.camera.right=d,l.shadow.camera.top=d,l.shadow.camera.bottom=-d,l.shadow.camera.near=-d,l.shadow.camera.far=d,l.shadow.bias=-1e-4,i.add(new THREE.DirectionalLightHelper(l)),this.light=l,this.scene=i,this.camera=r,this.orth_scene=s,this.orth_camera=c,this.Cam=Cam,this.renderer=a},start:function(t){Object.assign(this.options,t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=o||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e,n){if(0===t.length)return!1;var i=0;for(e=void 0!==e?e:o.now();i<t.length;)t[i].update(e)||n?i++:t.splice(i,1);return!0}}}();(function(){void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()}}).bind(void 0)(),o.Tween=function(t){var e,n=t,i={},r={},a={},s=1e3,c=0,u=!1,l=!1,d=!1,h=0,f=null,p=o.Easing.Linear.None,m=o.Interpolation.Linear,g=[],y=null,w=!1,v=null,b=null,x=null;for(var _ in t)i[_]=parseFloat(t[_],10);this.to=function(t,e){return void 0!==e&&(s=e),r=t,this},this.start=function(t){for(var e in o.add(this),l=!0,w=!1,f=void 0!==t?t:o.now(),f+=h,r){if(r[e]instanceof Array){if(0===r[e].length)continue;r[e]=[n[e]].concat(r[e])}void 0!==i[e]&&(i[e]=n[e],i[e]instanceof Array==!1&&(i[e]*=1),a[e]=i[e]||0)}return this},this.stop=function(){return l?(o.remove(this),l=!1,null!==x&&x.call(n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+s),this},this.stopChainedTweens=function(){for(var t=0,e=g.length;t<e;t++)g[t].stop()},this.delay=function(t){return h=t,this},this.repeat=function(t){return c=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return u=t,this},this.easing=function(t){return p=t,this},this.interpolation=function(t){return m=t,this},this.chain=function(){return g=arguments,this},this.onStart=function(t){return y=t,this},this.onUpdate=function(t){return v=t,this},this.onComplete=function(t){return b=t,this},this.onStop=function(t){return x=t,this},this.update=function(t){var o,l,x;if(t<f)return!0;for(o in!1===w&&(null!==y&&y.call(n),w=!0),x=p(l=(l=(t-f)/s)>1?1:l),r)if(void 0!==i[o]){var _=i[o]||0,E=r[o];E instanceof Array?n[o]=m(E,x):("string"==typeof E&&(E="+"===E.charAt(0)||"-"===E.charAt(0)?_+parseFloat(E,10):parseFloat(E,10)),"number"==typeof E&&(n[o]=_+(E-_)*x))}if(null!==v&&v.call(n,x),1===l){if(c>0){for(o in isFinite(c)&&c--,a){if("string"==typeof r[o]&&(a[o]=a[o]+parseFloat(r[o],10)),u){var k=a[o];a[o]=r[o],r[o]=k}i[o]=a[o]}return u&&(d=!d),f=void 0!==e?t+e:t+h,!0}null!==b&&b.call(n);for(var T=0,M=g.length;T<M;T++)g[T].start(f+s);return!1}return!0}},o.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-o.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*o.Easing.Bounce.In(2*t):.5*o.Easing.Bounce.Out(2*t-1)+.5}}},o.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=o.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=r(1-e,i-s)*r(e,s)*t[s]*a(i,s);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=o.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=o.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var o=e;o>1;o--)n*=o;return t[e]=n,n}}(),CatmullRom:function(t,e,n,o,i){var r=.5*(n-t),a=.5*(o-e),s=i*i;return(2*e-2*n+r+a)*(i*s)+(-3*e+3*n-2*r-a)*s+r*i+e}}},e.default=o},function(t,e,n){"use strict";var o,i,r;!function(){var t=function(t,e){return Math.abs(t-e)<(Number.EPSILON||pow(2,-52))};o=Class.extend({init:function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},equal:function(e){return t(this.x,e.x)&&t(this.y,e.y)&&t(this.z,e.z)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normal:function(){var t=this.length();return t?new o(this.x/t,this.y/t,this.z/t):new o(0,0,0)},scale:function(t){return new o(this.x*t,this.y*t,this.z*t)},add:function(t){return new o(this.x+t.x,this.y+t.y,this.z+t.z)},sub:function(t){return new o(this.x-t.x,this.y-t.y,this.z-t.z)},vertical:function(){return new o(this.y,-this.x)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross_v2:function(t){return this.x*t.y-this.y*t.x},cross:function(t){return new o(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},clone:function(){return new o(this.x,this.y,this.z)},rotateY:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.z,r=e*this.z+n*this.x;return new o(i,this.y,r)},rotateX:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.y-n*this.z,r=e*this.z+n*this.y;return new o(this.x,i,r)},rotateZ:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=e*this.y+n*this.x;return new o(i,r,this.z)},radian:function(){return Math.atan2(this.y,this.x)}})}(),function(){var t=function(t){return t[0][0]*t[1][1]-t[1][0]*t[0][1]};i=function(e,n){var o=t(e);if(0!=o){var i=$.extend(!0,[],e),r=$.extend(!0,[],e);return i[0][0]=n[0],i[1][0]=n[1],r[0][1]=n[0],r[1][1]=n[1],[t(i)/o,t(r)/o]}}}(),function(){var t=function(t){return t[0][0]*t[1][1]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]-t[0][1]*t[1][0]*t[2][2]-t[0][0]*t[1][2]*t[2][1]};r=function(e,n){var o=t(e);if(0!=o){var i=JSON.parse(JSON.stringify(e)),r=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(e));return i[0][0]=n[0],i[1][0]=n[1],i[2][0]=n[2],r[0][1]=n[0],r[1][1]=n[1],r[2][1]=n[2],a[0][2]=n[0],a[1][2]=n[1],a[2][2]=n[2],[t(i)/o,t(r)/o,t(a)/o]}}}();var a=Class.extend({init:function(){this.evs={}},on:function(t,e,n){return t=t.trim(),n&&"once"==n.trim()?(this.evs[t]=[e],this):this.evs[t]?(this.evs[t].push(e),this):(this.evs[t]=[e],this)},trigger:function(t){var e=this,n=arguments,o=this.evs[t=t.trim()];return o&&o.forEach(function(t){t.apply(e,[].slice.call(n,1))}),this},off:function(t){return delete this.evs[t.trim()],this}}),s={ex_map:Object.create(null),ex:function(t,e){t.trim().split(/,/).forEach(function(t){var n;if(t=t.trim(),(n=this.ex_map[t])||(n={attr:0,cb:0},this.ex_map[t]=n),_$.isFunction(e))return n.cb=e;n.attr=e},this)},exLoop:function(t){Object.keys(this.ex_map).forEach(function(t){var e=this.ex_map[t];e.cb&&e.attr&&e.cb.call(this)},this)}};t.exports={Vec:o,Det2:i,Det3:r,MxEvent:{evs:{},on:function(t,e,n){return t=t.trim(),n&&"once"==n.trim()?(this.evs[t]=[e],this):this.evs[t]?(this.evs[t].push(e),this):(this.evs[t]=[e],this)},trigger:function(t){var e=this,n=arguments,o=this.evs[t=t.trim()];return o&&o.forEach(function(t){t.apply(e,[].slice.call(n,1))}),this},off:function(t){return delete this.evs[t.trim()],this}},Event:a,KeepEvent:s}},function(t,e,n){t.exports=n(24)},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){(t.exports=n(4)(!1)).push([t.i,'@font-face {\n}\nhtml {\n  width: 100%;\n  height: 100%;\n  font-family: Helvetica;\n}\nbody {\n  margin: 0 auto;\n  position: relative;\n  width: 100%;\n  min-height: 100%;\n}\nbody .rel {\n  position: relative;\n  left: 0;\n  top: 0;\n}\nbody .rel_ {\n  position: relative;\n}\nbody .abs {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\nbody .abs_ {\n  position: absolute;\n}\nbody .clear-both {\n  clear: both;\n}\nbody .w {\n  width: 100%;\n}\nbody .wh {\n  width: 100%;\n  height: 100%;\n}\nbody .show {\n  display: block;\n}\nbody .hide {\n  display: none;\n}\nbody .visible {\n  visibility: visible;\n}\nbody .hidden {\n  visibility: hidden;\n}\nbody .css2-z1 {\n  z-index: 1;\n}\nbody .css2-z2 {\n  z-index: 2;\n}\nbody .css2-z3 {\n  z-index: 3;\n}\nbody .css2-z4 {\n  z-index: 4;\n}\nbody .css2-z5 {\n  z-index: 5;\n}\nbody .css2-z6 {\n  z-index: 6;\n}\nbody .css2-z7 {\n  z-index: 7;\n}\nbody .css2-z8 {\n  z-index: 8;\n}\nbody .css2-z9 {\n  z-index: 9;\n}\nbody .css2-z10 {\n  z-index: 10;\n}\nbody .css2-z11 {\n  z-index: 11;\n}\nbody .css2-z12 {\n  z-index: 12;\n}\nbody .css2-z13 {\n  z-index: 13;\n}\nbody .css2-z14 {\n  z-index: 14;\n}\nbody .css2-z15 {\n  z-index: 15;\n}\nbody .css2-z16 {\n  z-index: 16;\n}\nbody .css2-z17 {\n  z-index: 17;\n}\nbody .css2-z18 {\n  z-index: 18;\n}\nbody .css2-z19 {\n  z-index: 19;\n}\nbody .css2-z20 {\n  z-index: 20;\n}\nbody .css3-z1 {\n  -webkit-transform: translate3d("0.01px", 0, 0);\n}\nbody .css3-z2 {\n  -webkit-transform: translate3d("0.02px", 0, 0);\n}\nbody .css3-z3 {\n  -webkit-transform: translate3d("0.03px", 0, 0);\n}\nbody .css3-z4 {\n  -webkit-transform: translate3d("0.04px", 0, 0);\n}\nbody .css3-z5 {\n  -webkit-transform: translate3d("0.05px", 0, 0);\n}\nbody .css3-z6 {\n  -webkit-transform: translate3d("0.06px", 0, 0);\n}\nbody .css3-z7 {\n  -webkit-transform: translate3d("0.07px", 0, 0);\n}\nbody .css3-z8 {\n  -webkit-transform: translate3d("0.08px", 0, 0);\n}\nbody .css3-z9 {\n  -webkit-transform: translate3d("0.09px", 0, 0);\n}\nbody .css3-z10 {\n  -webkit-transform: translate3d("0.1px", 0, 0);\n}\nbody .css3-z11 {\n  -webkit-transform: translate3d("0.11px", 0, 0);\n}\nbody .css3-z12 {\n  -webkit-transform: translate3d("0.12px", 0, 0);\n}\nbody .css3-z13 {\n  -webkit-transform: translate3d("0.13px", 0, 0);\n}\nbody .css3-z14 {\n  -webkit-transform: translate3d("0.14px", 0, 0);\n}\nbody .css3-z15 {\n  -webkit-transform: translate3d("0.15px", 0, 0);\n}\nbody .css3-z16 {\n  -webkit-transform: translate3d("0.16px", 0, 0);\n}\nbody .css3-z17 {\n  -webkit-transform: translate3d("0.17px", 0, 0);\n}\nbody .css3-z18 {\n  -webkit-transform: translate3d("0.18px", 0, 0);\n}\nbody .css3-z19 {\n  -webkit-transform: translate3d("0.19px", 0, 0);\n}\nbody .css3-z20 {\n  -webkit-transform: translate3d("0.2px", 0, 0);\n}\nbutton {\n  background: transparent;\n  border: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  display: block;\n  outline: none;\n  cursor: auto;\n}\nli {\n  list-style: none;\n}\ncanvas {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n}\n@media screen and (max-width: 321px) {\n}\n@media screen and (min-width: 321px) and (max-width: 400px) {\n}\n@media screen and (min-width: 400px) {\n}\n@-webkit-keyframes light-mask {\n  0%,\n  100% {\n    visibility: hidden;\n    opacity: 0;\n  }\n  30%,\n  60% {\n    visibility: visible;\n    opacity: 1;\n  }\n}\n.light-mask {\n  -webkit-animation: 0.5s light-mask;\n}\n.shake-vertical {\n  -webkit-animation: 0.5s shake-vertical;\n}\n@-webkit-keyframes shake-vertical {\n  0% {\n    -webkit-transform: translate(0px, 0px) rotate(0deg) scale(1.2);\n  }\n  2% {\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\n  }\n  4% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  6% {\n    -webkit-transform: translate(0px, -2px) rotate(0deg) scale(1.2);\n  }\n  8% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  10% {\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\n  }\n  12% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  14% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  16% {\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\n  }\n  18% {\n    -webkit-transform: translate(0px, 3px) rotate(0deg) scale(1.2);\n  }\n  20% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  22% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  24% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  26% {\n    -webkit-transform: translate(0px, 9px) rotate(0deg) scale(1.2);\n  }\n  28% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  30% {\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\n  }\n  32% {\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\n  }\n  34% {\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\n  }\n  36% {\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\n  }\n  38% {\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\n  }\n  40% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  42% {\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\n  }\n  44% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  46% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  48% {\n    -webkit-transform: translate(0px, 7px) rotate(0deg) scale(1.2);\n  }\n  50% {\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\n  }\n  52% {\n    -webkit-transform: translate(0px, -2px) rotate(0deg) scale(1.2);\n  }\n  54% {\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\n  }\n  56% {\n    -webkit-transform: translate(0px, 3px) rotate(0deg) scale(1.2);\n  }\n  58% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  60% {\n    -webkit-transform: translate(0px, -3px) rotate(0deg) scale(1.2);\n  }\n  62% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  64% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  66% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  68% {\n    -webkit-transform: translate(0px, 0px) rotate(0deg) scale(1.2);\n  }\n  70% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  72% {\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\n  }\n  74% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  76% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  78% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  80% {\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\n  }\n  82% {\n    -webkit-transform: translate(0px, 9px) rotate(0deg) scale(1.2);\n  }\n  84% {\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\n  }\n  86% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  88% {\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\n  }\n  90% {\n    -webkit-transform: translate(0px, -6px) rotate(0deg) scale(1.2);\n  }\n  92% {\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\n  }\n  94% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  96% {\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\n  }\n  98% {\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\n  }\n}\n#xxzoom {\n  width: 1000%;\n  height: 100%;\n  background: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.001) 0%, #000000 30%, #000000 70%, rgba(0, 0, 0, 0.001) 100%);\n  -webkit-transform: translate3d(-100%, 0, 0);\n}\n#xzoom {\n  background: #000000;\n}\n.xfade {\n  -webkit-animation: 1s xfade1 forwards\n\t\t,1s 1.5s xfade2 forwards;\n}\n@-webkit-keyframes xfade1 {\n  0% {\n    visibility: hidden;\n    opacity: 0;\n  }\n  100% {\n    visibility: visible;\n    opacity: 1;\n  }\n}\n@-webkit-keyframes xfade2 {\n  0% {\n    visibility: visible;\n    opacity: 1;\n  }\n  100% {\n    visibility: hidden;\n    opacity: 0;\n  }\n}\ns-word {\n  display: none;\n}\n.animated1 {\n  -webkit-animation: 0.5s ease-in-out forwards;\n}\n',""])},function(t,e,n){var o=n(27);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(3)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){"use strict";n(28),n(2);i(n(0));var o=i(n(22));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=o.default}])});
//# sourceMappingURL=main1-706a8e.js.map