/*!
 * @author  daidaidai<2540546236@qq.com>
 * @lastest Wed Apr 04 2018 17:11:26 GMT+0800 (中国标准时间)}
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TiaoYiTiao=e():t.TiaoYiTiao=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="//static.xyimg.net/gamesite/mu/mufed/xycs180320/dist/",e(e.s=5)}([function(t,e,n){t.exports=n(11)},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=h[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],e))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(c(i.parts[r],e));h[i.id]={id:i.id,refs:1,parts:a}}}}function i(t){for(var e=[],n={},i=0;i<t.length;i++){var o=t[i],r=o[0],a=o[1],s=o[2],c=o[3],u={css:a,media:s,sourceMap:c};n[r]?n[r].parts.push(u):e.push(n[r]={id:r,parts:[u]})}return e}function o(t,e){var n=m(),i=w[w.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),w.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function c(t,e){var n,i,o;if(e.singleton){var c=y++;n=g||(g=a(e)),i=u.bind(null,n,c,!1),o=u.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),i=d.bind(null,n),o=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=l.bind(null,n),o=function(){r(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}function u(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=v(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function l(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var h={},p=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},f=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=p(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,w=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},void 0===e.singleton&&(e.singleton=f()),void 0===e.insertAt&&(e.insertAt="bottom");var o=i(t);return n(o,e),function(t){for(var r=[],a=0;a<o.length;a++){var s=o[a],c=h[s.id];c.refs--,r.push(c)}if(t){n(i(t),e)}for(var a=0;a<r.length;a++){var c=r[a];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete h[c.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";var i=n(9),o=function(t,e,n){var i,o,r=function(n,r){return i*t[n]+o*e[n]};return{pos:function(t){return i=sin((1-t)*n)/sin(n),o=sin(t*n)/sin(n),{x:r("x"),y:r("y"),z:r("z")}},tangent:function(t){},v0:t,v1:e,rad:n,deg:n/PI*180}},r=function(t){var e=t.camera,n=t.el,r=void 0===n?window:n,a=t.mw,s=(void 0===a&&innerWidth,t.mh),c=(void 0===s&&innerHeight,t.keycode_move),u=void 0===c||c,l=t.range,d=void 0===l?{the:[0,126],fai:[123,201]}:l,h={rotate:1,position:1},p=180,f=90,m=0,g=0,y=0,w=Object.defineProperties({update:function(){if(!this.transition){v.update();var t=this.φ/180*PI,n=this.θ/180*PI;this.v3_look=new i.Vec(sin(n)*sin(t),cos(n),sin(n)*cos(t)),this.v3_look_right=new i.Vec(sin(n)*sin(t-.5*PI),cos(n),sin(n)*cos(t-.5*PI)),this.v3_look_up=this.v3_look.cross(this.v3_look_right),this.v3_camera=new i.Vec(m,g,y),e.position.set(m,g,y);var o=this.v3_camera.add(this.v3_look);e.lookAt(new THREE.Vector3(o.x,o.y,o.z))}},transition:0,movingPath:function(t){t.time,t.θ,t.φ},slerp:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bit_dist,a=(n.until,n.time),s=void 0===a?1e3:a,c=n.θ,u=n.φ;this.transition=1;var l,d=this.v3_look.dot(t),h=o(this.v3_look,t,d);new TWEEN.Tween({t:0}).to({t:1},s).onStart(function(){r&&(this.bv=new i.Vec(w.x,w.y,w.z))}).onUpdate(function(){var t=h.pos(this.t);if(w.v3_look=new i.Vec(t.x,t.y,t.z),r){var n=[this.t,1-this.t],o=n[0],a=n[1];m=this.bv.x*a+r.x*o,g=this.bv.y*a+r.y*o,y=this.bv.z*a+r.z*o}else m=w.x,g=w.y,y=w.z;e.position.set(w.v3_camera.x,w.v3_camera.y,w.v3_camera.z);var s=w.v3_camera.add(w.v3_look);e.lookAt(new THREE.Vector3(s.x,s.y,s.z))}).onComplete(function(){w.transition=0,w.θ=c,w.φ=u,l&&l()}).start();return{complete:function(t){l=t}}},v3_look:new i.Vec,v3_look_back:new i.Vec,v3_look_right:new i.Vec,v3_look_left:new i.Vec,v3_look_up:new i.Vec,v3_camera:new i.Vec,v3_speed:new i.Vec,camera:e,speed:{front:1,back:1,right:1,left:1},cancelDefualt:function(){if(!arguments.length)return void(h.rotate=h.position=0);Array.from(arguments,function(t){if(!h[t])return console.wran("!");h[t]=0})},walkFront:function(t){v.front.run=!0},walkBack:function(t){v.back.run=!0},walkRight:function(t){v.right.run=!0},walkLeft:function(t){v.left.run=!0}},{"θ":{get:function(){return f},set:function(t){f=t}},"φ":{get:function(){return p},set:function(t){p=t}},the:{get:function(){return f},set:function(t){f=t}},phi:{get:function(){return p},set:function(t){p=t}},rotate:{get:function(){return[f,p]},set:function(t,e){f=t,p=e}},x:{get:function(){return m},set:function(t){m=t,this.v3_camera.x=m}},y:{get:function(){return g},set:function(t){g=t,this.v3_camera.y=g}},z:{get:function(){return y},set:function(t){y=t,this.v3_camera.z=y}},position:{get:function(){return[m,g,y]},set:function(t,e,n){m=t,g=e,y=n}}}),v={add:function(t,e){v[t]=this.mp[t]={run:0,update:function(){e()}}},mp:{},code_mp:{87:"w",83:"s",65:"a",68:"d"},update:function(){var t=this;Object.keys(this.mp).forEach(function(e){var n=t.mp[e];n.run&&n.update()})}};v.add("w",function(){w.v3_speed=w.v3_look.clone();var t=w.v3_speed.scale(w.speed.front);m+=t.x,y+=t.z}),v.add("s",function(){w.v3_speed=w.v3_look.clone().scale(-1);var t=w.v3_speed.scale(w.speed.back);m+=t.x,y+=t.z}),v.add("d",function(){w.v3_speed=w.v3_look_right.clone();var t=w.v3_speed.scale(w.speed.right);m+=t.x,y+=t.z}),v.add("a",function(){w.v3_speed=w.v3_look_right.clone().scale(-1);var t=w.v3_speed.scale(w.speed.left);m+=t.x,y+=t.z});var x=void 0,b=void 0,_=void 0,E=void 0;r.addEventListener("mousedown",function(t){x||(x=t.pageX),b||(b=t.pageY)}),r.addEventListener("mousemove",function(t){h.rotate&&x&&b&&(_=-.2*(t.pageX-x),E=.3*(t.pageY-b),x=t.pageX,b=t.pageY,w.φ+=_,w.θ+=E,w.the=w.θ,w.phi=w.φ,w.θ>d.the[1]&&(w.θ=d.the[1]),w.φ<d.fai[0]&&(w.φ=d.fai[0]),w.φ>d.fai[1]&&(w.φ=d.fai[1]),w.trigger("rotate",{delta_x:_,delta_y:E}))}),r.addEventListener("mouseup",function(t){x=b=0}),m=e.position.x,g=e.position.y,y=e.position.z;var k,T,M=function(t){if(u){var e=v,n=e[e.code_mp[t.keyCode]];if(n){if(k||(k=T=new i.Vec(m,g,y)),k=new i.Vec(m,g,y),w.v3_key=new i.Vec(k.x-T.x,k.y-T.y,k.z-T.z),T.x=k.x,T.y=k.y,T.z=k.z,"keyup"==t.type)return void(n.run=0);n.run=1}}};return addEventListener("keydown",M),addEventListener("keyup",M),window.FreeCamera=window.Cam=$.extend(!0,w,K.MxEvent),window.FreeCamera};window.Cam=window.FreeCamera=r},function(t,e,n){"use strict";var i={initial:function(t){var e=this,n=Object.keys(t).map(function(e){var n=t[e];return Promise.all(n.map(function(t,e){return new Promise(function(e){var n=new THREE.TextureLoader;n.crossOrigin="*",n.load(t,function(t){e(t)})})})).then(function(n){return t[e]=n,new Promise(function(t){t(n)})})});Promise.all(n).then(function(n){e._handle_complete&&e._handle_complete(t)})},onComplate:function(t){this._handle_complete=t}};t.exports={TextureManager:i}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(7),n(3);var o=n(0),r=(i(o),n(12)),a=i(r);t.exports=a.default},,function(t,e,n){var i=n(8);"string"==typeof i&&(i=[[t.i,i,""]]);n(2)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(1)(),e.push([t.i,'@font-face {\n}\nhtml {\n  width: 100%;\n  height: 100%;\n  font-family: Helvetica;\n}\nbody {\n  margin: 0 auto;\n  position: relative;\n  width: 100%;\n  min-height: 100%;\n}\nbody .rel {\n  position: relative;\n  left: 0;\n  top: 0;\n}\nbody .rel_ {\n  position: relative;\n}\nbody .abs {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\nbody .abs_ {\n  position: absolute;\n}\nbody .clear-both {\n  clear: both;\n}\nbody .w {\n  width: 100%;\n}\nbody .wh {\n  width: 100%;\n  height: 100%;\n}\nbody .show {\n  display: block;\n}\nbody .hide {\n  display: none;\n}\nbody .visible {\n  visibility: visible;\n}\nbody .hidden {\n  visibility: hidden;\n}\nbody .css2-z1 {\n  z-index: 1;\n}\nbody .css2-z2 {\n  z-index: 2;\n}\nbody .css2-z3 {\n  z-index: 3;\n}\nbody .css2-z4 {\n  z-index: 4;\n}\nbody .css2-z5 {\n  z-index: 5;\n}\nbody .css2-z6 {\n  z-index: 6;\n}\nbody .css2-z7 {\n  z-index: 7;\n}\nbody .css2-z8 {\n  z-index: 8;\n}\nbody .css2-z9 {\n  z-index: 9;\n}\nbody .css2-z10 {\n  z-index: 10;\n}\nbody .css2-z11 {\n  z-index: 11;\n}\nbody .css2-z12 {\n  z-index: 12;\n}\nbody .css2-z13 {\n  z-index: 13;\n}\nbody .css2-z14 {\n  z-index: 14;\n}\nbody .css2-z15 {\n  z-index: 15;\n}\nbody .css2-z16 {\n  z-index: 16;\n}\nbody .css2-z17 {\n  z-index: 17;\n}\nbody .css2-z18 {\n  z-index: 18;\n}\nbody .css2-z19 {\n  z-index: 19;\n}\nbody .css2-z20 {\n  z-index: 20;\n}\nbody .css3-z1 {\n  -webkit-transform: translate3d("0.01px", 0, 0);\n}\nbody .css3-z2 {\n  -webkit-transform: translate3d("0.02px", 0, 0);\n}\nbody .css3-z3 {\n  -webkit-transform: translate3d("0.03px", 0, 0);\n}\nbody .css3-z4 {\n  -webkit-transform: translate3d("0.04px", 0, 0);\n}\nbody .css3-z5 {\n  -webkit-transform: translate3d("0.05px", 0, 0);\n}\nbody .css3-z6 {\n  -webkit-transform: translate3d("0.06px", 0, 0);\n}\nbody .css3-z7 {\n  -webkit-transform: translate3d("0.07px", 0, 0);\n}\nbody .css3-z8 {\n  -webkit-transform: translate3d("0.08px", 0, 0);\n}\nbody .css3-z9 {\n  -webkit-transform: translate3d("0.09px", 0, 0);\n}\nbody .css3-z10 {\n  -webkit-transform: translate3d("0.1px", 0, 0);\n}\nbody .css3-z11 {\n  -webkit-transform: translate3d("0.11px", 0, 0);\n}\nbody .css3-z12 {\n  -webkit-transform: translate3d("0.12px", 0, 0);\n}\nbody .css3-z13 {\n  -webkit-transform: translate3d("0.13px", 0, 0);\n}\nbody .css3-z14 {\n  -webkit-transform: translate3d("0.14px", 0, 0);\n}\nbody .css3-z15 {\n  -webkit-transform: translate3d("0.15px", 0, 0);\n}\nbody .css3-z16 {\n  -webkit-transform: translate3d("0.16px", 0, 0);\n}\nbody .css3-z17 {\n  -webkit-transform: translate3d("0.17px", 0, 0);\n}\nbody .css3-z18 {\n  -webkit-transform: translate3d("0.18px", 0, 0);\n}\nbody .css3-z19 {\n  -webkit-transform: translate3d("0.19px", 0, 0);\n}\nbody .css3-z20 {\n  -webkit-transform: translate3d("0.2px", 0, 0);\n}\nbutton {\n  background: transparent;\n  border: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  display: block;\n  outline: none;\n  cursor: auto;\n}\nli {\n  list-style: none;\n}\ncanvas {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n}\n@media screen and (max-width: 321px) {\n}\n@media screen and (min-width: 321px) and (max-width: 400px) {\n}\n@media screen and (min-width: 400px) {\n}\n@-webkit-keyframes light-mask {\n  0%,\n  100% {\n    visibility: hidden;\n    opacity: 0;\n  }\n  30%,\n  60% {\n    visibility: visible;\n    opacity: 1;\n  }\n}\n.light-mask {\n  -webkit-animation: 0.5s light-mask;\n}\n.shake-vertical {\n  -webkit-animation: 0.5s shake-vertical;\n}\n@-webkit-keyframes shake-vertical {\n  0% {\n    -webkit-transform: translate(0px, 0px) rotate(0deg) scale(1.2);\n  }\n  2% {\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\n  }\n  4% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  6% {\n    -webkit-transform: translate(0px, -2px) rotate(0deg) scale(1.2);\n  }\n  8% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  10% {\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\n  }\n  12% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  14% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  16% {\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\n  }\n  18% {\n    -webkit-transform: translate(0px, 3px) rotate(0deg) scale(1.2);\n  }\n  20% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  22% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  24% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  26% {\n    -webkit-transform: translate(0px, 9px) rotate(0deg) scale(1.2);\n  }\n  28% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  30% {\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\n  }\n  32% {\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\n  }\n  34% {\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\n  }\n  36% {\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\n  }\n  38% {\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\n  }\n  40% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  42% {\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\n  }\n  44% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  46% {\n    -webkit-transform: translate(0px, 5px) rotate(0deg) scale(1.2);\n  }\n  48% {\n    -webkit-transform: translate(0px, 7px) rotate(0deg) scale(1.2);\n  }\n  50% {\n    -webkit-transform: translate(0px, -7px) rotate(0deg) scale(1.2);\n  }\n  52% {\n    -webkit-transform: translate(0px, -2px) rotate(0deg) scale(1.2);\n  }\n  54% {\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\n  }\n  56% {\n    -webkit-transform: translate(0px, 3px) rotate(0deg) scale(1.2);\n  }\n  58% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  60% {\n    -webkit-transform: translate(0px, -3px) rotate(0deg) scale(1.2);\n  }\n  62% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  64% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  66% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  68% {\n    -webkit-transform: translate(0px, 0px) rotate(0deg) scale(1.2);\n  }\n  70% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  72% {\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\n  }\n  74% {\n    -webkit-transform: translate(0px, 6px) rotate(0deg) scale(1.2);\n  }\n  76% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  78% {\n    -webkit-transform: translate(0px, 10px) rotate(0deg) scale(1.2);\n  }\n  80% {\n    -webkit-transform: translate(0px, 4px) rotate(0deg) scale(1.2);\n  }\n  82% {\n    -webkit-transform: translate(0px, 9px) rotate(0deg) scale(1.2);\n  }\n  84% {\n    -webkit-transform: translate(0px, -1px) rotate(0deg) scale(1.2);\n  }\n  86% {\n    -webkit-transform: translate(0px, 8px) rotate(0deg) scale(1.2);\n  }\n  88% {\n    -webkit-transform: translate(0px, 1px) rotate(0deg) scale(1.2);\n  }\n  90% {\n    -webkit-transform: translate(0px, -6px) rotate(0deg) scale(1.2);\n  }\n  92% {\n    -webkit-transform: translate(0px, 2px) rotate(0deg) scale(1.2);\n  }\n  94% {\n    -webkit-transform: translate(0px, -5px) rotate(0deg) scale(1.2);\n  }\n  96% {\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\n  }\n  98% {\n    -webkit-transform: translate(0px, -4px) rotate(0deg) scale(1.2);\n  }\n}\n#xxzoom {\n  width: 1000%;\n  height: 100%;\n  background: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.001) 0%, #000000 30%, #000000 70%, rgba(0, 0, 0, 0.001) 100%);\n  -webkit-transform: translate3d(-100%, 0, 0);\n}\n#xzoom {\n  background: #000000;\n}\n.xfade {\n  -webkit-animation: 1s xfade1 forwards\n\t\t,1s 1.5s xfade2 forwards;\n}\n@-webkit-keyframes xfade1 {\n  0% {\n    visibility: hidden;\n    opacity: 0;\n  }\n  100% {\n    visibility: visible;\n    opacity: 1;\n  }\n}\n@-webkit-keyframes xfade2 {\n  0% {\n    visibility: visible;\n    opacity: 1;\n  }\n  100% {\n    visibility: hidden;\n    opacity: 0;\n  }\n}\ns-word {\n  display: none;\n}\n.animated1 {\n  -webkit-animation: 0.5s ease-in-out forwards;\n}\n',""])},function(t,e,n){t.exports=n(10)},function(t,e,n){"use strict";var i;!function(){var t=function(t,e){return Math.abs(t-e)<(Number.EPSILON||pow(2,-52))};i=Class.extend({init:function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},equal:function(e){return t(this.x,e.x)&&t(this.y,e.y)&&t(this.z,e.z)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normal:function(){var t=this.length();return t?new i(this.x/t,this.y/t,this.z/t):new i(0,0,0)},scale:function(t){return new i(this.x*t,this.y*t,this.z*t)},add:function(t){return new i(this.x+t.x,this.y+t.y,this.z+t.z)},sub:function(t){return new i(this.x-t.x,this.y-t.y,this.z-t.z)},vertical:function(){return new i(this.y,-this.x)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross_v2:function(t){return this.x*t.y-this.y*t.x},cross:function(t){return new i(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},clone:function(){return new i(this.x,this.y,this.z)},rotateY:function(t){var e=Math.cos(t),n=Math.sin(t),o=e*this.x-n*this.z,r=e*this.z+n*this.x;return new i(o,this.y,r)},rotateX:function(t){var e=Math.cos(t),n=Math.sin(t),o=e*this.y-n*this.z,r=e*this.z+n*this.y;return new i(this.x,o,r)},rotateZ:function(t){var e=Math.cos(t),n=Math.sin(t),o=e*this.x-n*this.y,r=e*this.y+n*this.x;return new i(o,r,this.z)},radian:function(){return Math.atan2(this.y,this.x)}})}();var o;!function(){var t=function(t){return t[0][0]*t[1][1]-t[1][0]*t[0][1]};o=function(e,n){var i=t(e);if(0!=i){var o=$.extend(!0,[],e),r=$.extend(!0,[],e);return o[0][0]=n[0],o[1][0]=n[1],r[0][1]=n[0],r[1][1]=n[1],[t(o)/i,t(r)/i]}}}();var r;!function(){var t=function(t){return t[0][0]*t[1][1]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]-t[0][1]*t[1][0]*t[2][2]-t[0][0]*t[1][2]*t[2][1]};r=function(e,n){var i=t(e);if(0!=i){var o=JSON.parse(JSON.stringify(e)),r=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(e));o[0][0]=n[0],o[1][0]=n[1],o[2][0]=n[2],r[0][1]=n[0],r[1][1]=n[1],r[2][1]=n[2],a[0][2]=n[0],a[1][2]=n[1],a[2][2]=n[2];return[t(o)/i,t(r)/i,t(a)/i]}}}();var a={evs:{},on:function(t,e,n){return t=t.trim(),n&&"once"==n.trim()?(this.evs[t]=[e],this):this.evs[t]?(this.evs[t].push(e),this):(this.evs[t]=[e],this)},trigger:function(t){var e=this,n=arguments,i=this.evs[t=t.trim()];return i&&i.forEach(function(t){t.apply(e,[].slice.call(n,1))}),this},off:function(t){return delete this.evs[t.trim()],this}},s=Class.extend({init:function(){this.evs={}},on:function(t,e,n){return t=t.trim(),n&&"once"==n.trim()?(this.evs[t]=[e],this):this.evs[t]?(this.evs[t].push(e),this):(this.evs[t]=[e],this)},trigger:function(t){var e=this,n=arguments,i=this.evs[t=t.trim()];return i&&i.forEach(function(t){t.apply(e,[].slice.call(n,1))}),this},off:function(t){return delete this.evs[t.trim()],this}}),c={ex_map:Object.create(null),ex:function(t,e){t.trim().split(/,/).forEach(function(t){var n;if(t=t.trim(),(n=this.ex_map[t])||(n={attr:0,cb:0},this.ex_map[t]=n),_$.isFunction(e))return n.cb=e;n.attr=e},this)},exLoop:function(t){Object.keys(this.ex_map).forEach(function(t){var e=this.ex_map[t];e.cb&&e.attr&&e.cb.call(this)},this)}};t.exports={Vec:i,Det2:o,Det3:r,MxEvent:a,Event:s,KeepEvent:c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=i||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e,n){if(0===t.length)return!1;var o=0;for(e=void 0!==e?e:i.now();o<t.length;)t[o].update(e)||n?o++:t.splice(o,1);return!0}}}();(function(){void 0!==Date.now?i.now=Date.now:i.now=function(){return(new Date).getTime()}}).bind(void 0)(),i.Tween=function(t){var e,n=t,o={},r={},a={},s=1e3,c=0,u=!1,l=!1,d=!1,h=0,p=null,f=i.Easing.Linear.None,m=i.Interpolation.Linear,g=[],y=null,w=!1,v=null,x=null,b=null;for(var _ in t)o[_]=parseFloat(t[_],10);this.to=function(t,e){return void 0!==e&&(s=e),r=t,this},this.start=function(t){i.add(this),l=!0,w=!1,p=void 0!==t?t:i.now(),p+=h;for(var e in r){if(r[e]instanceof Array){if(0===r[e].length)continue;r[e]=[n[e]].concat(r[e])}void 0!==o[e]&&(o[e]=n[e],o[e]instanceof Array==!1&&(o[e]*=1),a[e]=o[e]||0)}return this},this.stop=function(){return l?(i.remove(this),l=!1,null!==b&&b.call(n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(p+s),this},this.stopChainedTweens=function(){for(var t=0,e=g.length;t<e;t++)g[t].stop()},this.delay=function(t){return h=t,this},this.repeat=function(t){return c=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return u=t,this},this.easing=function(t){return f=t,this},this.interpolation=function(t){return m=t,this},this.chain=function(){return g=arguments,this},this.onStart=function(t){return y=t,this},this.onUpdate=function(t){return v=t,this},this.onComplete=function(t){return x=t,this},this.onStop=function(t){return b=t,this},this.update=function(t){var i,l,b;if(t<p)return!0;!1===w&&(null!==y&&y.call(n),w=!0),l=(t-p)/s,l=l>1?1:l,b=f(l);for(i in r)if(void 0!==o[i]){var _=o[i]||0,E=r[i];E instanceof Array?n[i]=m(E,b):("string"==typeof E&&(E="+"===E.charAt(0)||"-"===E.charAt(0)?_+parseFloat(E,10):parseFloat(E,10)),"number"==typeof E&&(n[i]=_+(E-_)*b))}if(null!==v&&v.call(n,b),1===l){if(c>0){isFinite(c)&&c--;for(i in a){if("string"==typeof r[i]&&(a[i]=a[i]+parseFloat(r[i],10)),u){var k=a[i];a[i]=r[i],r[i]=k}o[i]=a[i]}return u&&(d=!d),p=void 0!==e?t+e:t+h,!0}null!==x&&x.call(n);for(var T=0,M=g.length;T<M;T++)g[T].start(p+s);return!1}return!0}},i.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Easing.Bounce.In(2*t):.5*i.Easing.Bounce.Out(2*t-1)+.5}}},i.Interpolation={Linear:function(t,e){var n=t.length-1,o=n*e,r=Math.floor(o),a=i.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],o):e>1?a(t[n],t[n-1],n-o):a(t[r],t[r+1>n?n:r+1],o-r)},Bezier:function(t,e){for(var n=0,o=t.length-1,r=Math.pow,a=i.Interpolation.Utils.Bernstein,s=0;s<=o;s++)n+=r(1-e,o-s)*r(e,s)*t[s]*a(o,s);return n},CatmullRom:function(t,e){var n=t.length-1,o=n*e,r=Math.floor(o),a=i.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(o=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],o-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-o)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],o-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],o-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=i.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,o){var r=.5*(n-t),a=.5*(i-e),s=o*o;return(2*e-2*n+r+a)*(o*s)+(-3*e+3*n-2*r-a)*s+r*o+e}}},e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};n(13),n(3);var s=n(15),c=i(s),u=n(0),l=i(u),d=n(16),h=i(d),p=n(17),f=i(p),m=n(18),g=i(m),y=n(19),w=i(y),v=n(4),x=n(20),b=i(x),_={};e.default=K.Event.extend({init:function(t){var e=this;this._super(),this.options=r({can_play:!0,$container:$(document.body),status_msg:""},"can_play",!1),Object.assign(this.options,t),_=t.Api,this.$container=$(this.options.$container),this.status_msg=this.options.status_msg,this.can_play=this.options.can_play;var n=window.navigator.userAgent,i=n.indexOf("compatible")>-1&&n.indexOf("MSIE")>-1,o=n.indexOf("Edge")>-1&&!i,a=n.indexOf("Trident")>-1&&n.indexOf("rv:11.0")>-1;if(i||o||a||K.author("yohane<2540546236@qq.com>","18-04-02","-"),!this._supportGl())return this._noGlForYou();this._max_phase=100,this._phase=0,this.score=0,this._good_i=0,this.goods=t.goods,this._request=!1,this.can_update_camera=!1,this.mesh_points=[],this.v3_look=new THREE.Vector3(0,0,-1).applyAxisAngle(new THREE.Vector3(1,0,0),.1).applyAxisAngle(new THREE.Vector3(0,1,0),-.2),this.num_of_game=this.options.num_of_game,this.score=0,this.current_grid=null,this._keydown=!1,this.Phases={},this._createStage(),this.on("round_",function(){e.num_of_game--,console.log("%c round_,score:%s,num_of_game:%s","color:black;",e.score,e.num_of_game),e.trigger("round-of-game",{score:e.score,num_of_game:e.num_of_game}),e._restart()}),this._getGameResult().then(function(t){e._textures=t,e._createActor(),e._createPhases(),e._run(),e._render()})},_getGameResult:function(){return new Promise(function(t){v.TextureManager.initial({boards_small:[n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32)],boards_big:[n(33),n(34)],floor:[n(35)],points:[n(36),n(37)]}),v.TextureManager.onComplate(function(e){t(e)})})},_supportGl:function(){return!!b.default.webgl||void 0},_noGlForYou:function(){var t=document.createElement("div");t.id="no-gl-for-you",$(this.$container).append(t),t.innerHTML="\n      <span>浏览器君需要升级！或者换个浏览器再试！</span>\n    "},_noChance:function(){alert("次数用尽！")},_restart:function(){var t=this;this._zoom.show({phase0:function(){t.cubes.forEach(function(e){t.scene.remove(e)});t.cubes=[].concat(o(Array(2))).map(function(e,n){var i=(0,c.default)({height:800,billboard_map:t._textures.boards_small[t._textures.boards_small.length-1]});return i.position.x=n/2*100,t.scene.add(i),i}),t.current_grid=null,t._phase=0,t.score=0;var e=t.cubes[0].position,n={po1:e.clone().add(new THREE.Vector3(0,.6*t.cubes[0].geometry.parameters.height,0)),po2:e.clone().add(new THREE.Vector3(0,.5*t.cubes[0].geometry.parameters.height,0))},i=n.po2;Object.assign(FreeCamera,{x:i.x,y:i.y+100,z:i.z+150,speed:{front:8,back:8,left:3,right:3},"θ":116,"φ":165}),t._infinity_tree.reset(t.scene),t._infinity_ground.reset(t.scene),t.mesh_score.setScore(t.score),t.chessman.position.copy(i),t.chessman.start()},phase1:function(){}})},_addScore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.score,n=void 0===e?1:e;this.score+=n,this.mesh_score.setScore(this.score),this.trigger("score",{score:this.score});var i=this.chessman.geometry.parameters.radiusBottom;i*=n>1?10:5;var o=n>1?1.23*i:2.23*i,r=new THREE.Mesh(new THREE.PlaneGeometry(i,i),new THREE.MeshBasicMaterial({map:this._textures.points[n-1],transparent:!0,side:THREE.DoubleSide}));this.scene.add(r),this.mesh_points.push(r),r.position.copy(this.chessman.position.clone().add(new THREE.Vector3(0,o,0))),new l.default.Tween({opacity:1,y:r.position.y}).to({opacity:0,y:r.position.y+10},366).onUpdate(function(){r.position.y=this.y,r.material.opacity=this.opacity}).onComplete(function(){}).start()},_run:function(){var t=this,e=this.Phases,n=e.MoveToSpecialPo,i=e.FlipToHeight,o=new n,r=new i,a=this;o.on("clear",function(){r.execute()}),r.on("clear",function(){a.on("_keydown",function(){a.can_play&&(a._zoom.hidding||a._request||0!==a.num_of_game&&a.chessman.canHolding()&&a.chessman.holding())}),a.on("_keyup",function(){return a.can_play?0===a.num_of_game?a._noChance():void(a.chessman.canFlipping()&&a.chessman.flipping()):alert(a.status_msg)}),t.light.position.set(17,30,138),t.can_update_camera=!0;var e=t.cubes[0].position,n={po1:e.clone().add(new THREE.Vector3(0,.6*t.cubes[0].geometry.parameters.height,0)),po2:e.clone().add(new THREE.Vector3(0,.5*t.cubes[0].geometry.parameters.height,0))},i=n.po1,o=n.po2;Object.assign(FreeCamera,{x:i.x,y:o.y+100,z:i.z+150,speed:{front:8,back:8,left:3,right:3},"θ":116,"φ":165}),FreeCamera.update(),new l.default.Tween({x:i.x,y:i.y,z:i.z}).to(o,1234).delay(566).easing(l.default.Easing.Bounce.Out).onUpdate(function(){a.chessman.position.copy(new THREE.Vector3(this.x,this.y,this.z))}).onComplete(function(){a.chessman.start(),a.mesh_score.show()}).start()}),addEventListener("keydown",function(e){32===e.keyCode&&e.preventDefault(),32===e.keyCode&&(t._keydown=!0)}),addEventListener("keyup",function(e){32===e.keyCode&&e.preventDefault(),32===e.keyCode&&(t._keydown=!1,t.trigger("_keyup"))}),o.execute()},_createPhases:function(){var t=K.Event.extend({init:function(){this._super()},execute:function(){}}),e=this,n=t.extend({init:function(){this._super()},execute:function(){var t=this,n={po1:new THREE.Vector3(-300,0,0),po2:new THREE.Vector3(60,0,0)},i=n.po1,r=n.po2;e.chessman.position.copy(i.clone());var a=e.chessman.position,s=e._addBillBoard({position:a.clone().add(new THREE.Vector3(0,0,-900)),delay:0,active_fall:!1,map:e._textures.boards_big[0]});s=e._addBillBoard({position:a.clone().add(new THREE.Vector3(900,0,-800)),delay:666,active_fall:!1,map:e._textures.boards_big[1]}),s.rotation.y=-.5;var c=r.x-i.x;e.camera.lookAt(e.camera.position.clone().add(e.v3_look)),e.camera.position.copy(e.chessman.position.clone().add(new THREE.Vector3(0,10,150))),setTimeout(function(){e.chessman.fewFlip({onUpdate:function(t){e.camera.position.copy(new THREE.Vector3(t.x,t.y+10,t.z+150)),e.camera.lookAt(e.camera.position.clone().add(e.v3_look))},po_increments:[].concat(o(Array(3))).map(function(t,e){return new THREE.Vector3(a.x+e/3*c,0,0)})}).then(function(e){t.trigger("clear",{})})},666)}}),i=t.extend({init:function(){this._super()},execute:function(){console.log("F");var t=0,n=this;e.chessman.flipToTop({height:400,delay:566,flip_dur:3333,onFlipStart:function(){setTimeout(function(){e.chessman.stopToTop(),e._zoom.show({phase0:function(){n.trigger("clear",{})}})},888)},onUpdate:function(n){(t+=.02)>=.6||e.camera.lookAt(e.camera.position.clone().add(e.v3_look.applyAxisAngle(new THREE.Vector3(1,0,0),.02)))},onPer:function(){}}).then(function(t){})}});this.Phases={MoveToSpecialPo:n,FlipToHeight:i}},assignGoods:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.goods},_setRandGoods:function(t){},_createActor:function(){var t=this,e=this;this._infinity_tree=new f.default({far:3e3,in_group_num:123,handle_each_child:function(t,e){var n=(0,h.default)();return n.position.copy(new THREE.Vector3(t+e*random(),0,-350-1800*random())),n}});var n=this._textures.floor[0];this._infinity_ground=new f.default({far:1e4,in_group_num:1,handle_each_child:function(t,e){var i=new THREE.Mesh(new THREE.PlaneBufferGeometry(e,e),new THREE.MeshPhongMaterial({color:16777215,specular:328965,map:n}));return i.rotation.x=-Math.PI/2,i.material.map.wrapS=i.material.map.wrapT=THREE.RepeatWrapping,i.material.map.repeat.set(80,80),i.receiveShadow=!0,i.position.copy(new THREE.Vector3(t+.5*e,0,0)),i}});this.cubes=[].concat(o(Array(2))).map(function(n,i){var o=(0,c.default)({height:800,billboard_map:e._textures.boards_small[random()*e._textures.boards_small.length|0]});return o.position.x=i/2*100,t.scene.add(o),o}),this.chessman=(0,g.default)({}),this.scene.add(this.chessman),this.chessman.onFilpEnd(function(){var n=new THREE.Mesh(new THREE.RingBufferGeometry(5,7,32),new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,transparent:!0}));e.scene.add(n),n.rotation.x=.5*PI,n.position.copy(t.chessman.position.clone().add(new THREE.Vector3(0,.16*t.chessman.geometry.parameters.height,0))),new l.default.Tween({t:1,a:1}).to({t:3,a:0},333).easing(l.default.Easing.Quadratic.Out).onUpdate(function(){n.scale.set(this.t,this.t,this.t),n.material.opacity=this.a}).onComplete(function(){e.scene.remove(n)}).start()});var i=this.renderer.getSize(),r=i.width,a=i.height,s=document.createElement("canvas");s.width=s.height=100;var u=s.getContext("2d");this.mesh_score=new THREE.Mesh(new THREE.PlaneGeometry(100,100),new THREE.MeshBasicMaterial({map:new THREE.Texture(s),transparent:!0})),this.orth_scene.add(this.mesh_score);var d=this.mesh_score.geometry.parameters;this.mesh_score.position.copy(new THREE.Vector3(.5*r-.5*d.width,.5*a-.5*d.height,0)),Object.assign(this.mesh_score,{setScore:function(t){u.clearRect(0,0,s.width,s.height),u.font="40px Georgia",u.textAlign="center",u.fillText(t,.5*s.width,.5*s.height),this.material.map.needsUpdate=!0},show:function(){this.visible=!0},hide:function(){this.visible=!1}}),this.mesh_score.setScore(0),this.mesh_score.hide();var p=this.renderer.getSize(),m=p.width,y=p.height,w=new THREE.Mesh(new THREE.PlaneBufferGeometry(m,y),new THREE.MeshBasicMaterial({color:(new THREE.Color).setRGB(0,0,0),transparent:!0}));e.orth_scene.add(w),Object.assign(w,{hidding:!1,show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.delay,i=void 0===n?0:n,o=e.delay2,r=void 0===o?888:o,a=e.dur,s=void 0===a?433:a,c=e.phase0,u=e.phase1,d=this;return new Promise(function(e){t.itv&&t.itv.stop(),t.itv=new l.default.Tween({opacity:0}).delay(i).to({opacity:1},s).onUpdate(function(){d.material.opacity=this.opacity}).onComplete(function(){c&&c()}),t.itv2&&t.itv2.stop(),t.itv2=new l.default.Tween({opacity:1}).delay(r).to({opacity:0},s).onUpdate(function(){d.material.opacity=this.opacity}).onComplete(function(){u&&u()}),t.itv.chain(t.itv2),t.itv.start()})},hide:function(){}}),w.material.opacity=0,e._zoom=w},_addBillBoard:function(t){var e=this,n=t.position,i=void 0===n?new THREE.Vector3(0,0,0):n,o=t.delay,r=void 0===o?0:o,a=t.active_fall,s=void 0===a||a,c=t.map,u=(0,w.default)({map:c});return this.scene.add(u),u.position.copy(i),u.onFallEnd(function(){s&&e._infinity_tree.els.forEach(function(t){t.flip({delay:50*random()})})}),u.fallDown({delay:r}),u},_addNextGrid:function(){var t=this;this._request=!0,this._handel_next_grid=function(e){t._request=!1;var n=e.goods,i=(0,c.default)({height:800,goods:n,billboard:random()<.3,billboard_map:t._textures.boards_small[random()*t._textures.boards_small.length|0]});i.castShadow=!1,i.material.opacity=1;var o=100*min(t._phase/t._max_phase,1);i.position.x=t.current_grid.position.x+50+random()*o,t.scene.add(i),t.cubes.push(i)},this.trigger("next-grid",{_phase:this._phase,fn:this._handel_next_grid.bind(this)})},_checkChessManOutSide:function(){var t=this,e=this.chessman.position.clone();e.y=max(e.y,this.cubes[0].position.y+this.cubes[0].geometry.parameters.height);var n=new THREE.Raycaster(e,new THREE.Vector3(0,-1,0)),i=n.intersectObjects([].concat(o(this.cubes)));if(!this.chessman.isOutside()){if(!i.length&&this.chessman.isStading())return this.chessman.fallDown({}).then(function(e){t.trigger("round_",{})}),void console.log("%c outside! status:%s","color:teal;",this.chessman.status);if(i.length&&this.chessman.isStading()){var r=i[0],s=(r.distance,r.point),c=r.object;if(this.current_grid||(this.current_grid=c),this.current_grid!=c){this.current_grid=c,this._phase++,this.current_grid.goods&&(this.current_grid.displayGoods(this.scene),this.trigger("receive-goods",a({},this.current_grid.goods)));var u=this.current_grid.position.clone().add(new THREE.Vector3(0,.5*this.current_grid.geometry.parameters.height,0)),l=s.clone().sub(u).length();this._addScore({score:l<4?2:1}),this._phase>0&&this._addNextGrid(),this._phase,console.log("%c _phase:%s","color:red;",this._phase)}}}},_trackChessMan:function(){this.chessman.isDied()||(FreeCamera.x=this.chessman.position.x)},_render:function(){var t=this;requestAnimationFrame(function e(){requestAnimationFrame(e),t._keydown&&t.trigger("_keydown"),l.default.update(),t.renderer.clear(),t.renderer.render(t.scene,t.camera),t.renderer.clearDepth(),t.renderer.render(t.orth_scene,t.orth_camera),t._infinity_tree.render({x:Cam.x},t.scene),t._infinity_ground.render({x:Cam.x},t.scene),t._checkChessManOutSide(),t._trackChessMan(),t.cubes.forEach(function(t){t.goodsLookAt(new THREE.Vector3(FreeCamera.x,FreeCamera.y,FreeCamera.z))}),t.can_update_camera&&FreeCamera.update()})},_createStage:function(){var t=this.$container,e=[t.width(),t.height()],n=e[0],i=e[1],o=new THREE.Scene,r=new THREE.PerspectiveCamera(30,t.width()/t.height(),.1,1e4),a=new THREE.WebGLRenderer({antialias:!0});a.autoClear=!1,a.setClearColor(0,1),a.setSize(t.width(),t.height());var s=new THREE.Scene,c=new THREE.OrthographicCamera(-n/2,n/2,i/2,i/-2,.1,6e3);c.position.copy(new THREE.Vector3(0,0,10)),a.shadowMap.enabled=!0,a.shadowMap.type=THREE.PCFSoftShadowMap,t.append(a.domElement),o.background=(new THREE.Color).setRGB(.6,1,1),o.fog=new THREE.FogExp2(o.background,6e-4),FreeCamera({camera:r,el:t[0],keycode_move:!0}),FreeCamera.update();var u=new THREE.AmbientLight((new THREE.Color).setRGB(.2,.2,.2));o.add(u);var l=new THREE.DirectionalLight(16777215,1);l.color.setHSL(.1,1,.8),l.position.set(17,30,138),l.position.set(30,69,47),o.add(l),l.castShadow=!0,l.shadow.mapSize.width=2048,l.shadow.mapSize.height=2048;var d=1500;l.shadow.camera.left=-d,l.shadow.camera.right=d,l.shadow.camera.top=d,l.shadow.camera.bottom=-d,l.shadow.camera.near=-d,l.shadow.camera.far=d,l.shadow.bias=-1e-4,o.add(new THREE.DirectionalLightHelper(l)),this.light=l,this.scene=o,this.camera=r,this.orth_scene=s,this.orth_camera=c,this.Cam=Cam,this.renderer=a},start:function(t){Object.assign(this.options,t)}})},function(t,e,n){var i=n(14);"string"==typeof i&&(i=[[t.i,i,""]]);n(2)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(1)(),e.push([t.i,"#game_container {\n  width: 800px;\n  height: 500px;\n  margin: 0 auto;\n}\n#no-gl-for-you {\n  width: 100%;\n  height: 100%;\n}\n#no-gl-for-you span {\n  display: block;\n  margin: 0 auto;\n  text-align: center;\n  color: black;\n  margin-top: 20%;\n}\n",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.goods,i=void 0===n?null:n,r=e.height,a=void 0===r?600:r,s=(e.billboard,e.billboard_map),c=(new THREE.Color).setHSL(Math.random(),1,.9),u=new THREE.MeshPhongMaterial({color:c,transparent:!0,specular:16777215,flatShading:!1});if(random()>.2){t=new THREE.Mesh(new THREE.CylinderGeometry(15,15,a,32),u),t.material.opacity=0,t.position.y=.5*t.geometry.parameters.height,t.castShadow=!0,t.receiveShadow=!0;var l=(t.geometry.parameters,new THREE.Mesh(new THREE.CylinderGeometry(15,15,20,32,32,!0,0,.6*PI),new THREE.MeshPhongMaterial({specular:16777215,flatShading:!1,map:s})));l.position.set(0,.5*a-l.geometry.parameters.height*(.6+1*random()),.1),l.rotation.y=-.5-.433*random(),t.add(l)}else t=new THREE.Mesh(new THREE.BoxGeometry(30,a,30),u),t.material.opacity=0,t.position.y=.5*t.geometry.parameters.height,t.castShadow=!0,t.receiveShadow=!0;return t.castShadow=!1,new o.default.Tween({opacity:0}).to({opacity:1},333).onUpdate(function(){t.material.opacity=this.opacity}).start(),Object.assign(t,{goods:i,displayGoods:function(t){var e=this;setTimeout(function(){alert("OvO你得到了cdk："+e.goods.cdk)},433)},goodsLookAt:function(t){}})};var i=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(i);n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=function(){var t=new THREE.Mesh(new THREE.BoxGeometry(3,200,3),new THREE.MeshLambertMaterial({color:14929779})),e=new THREE.Mesh(new THREE.OctahedronGeometry(20,1),new THREE.MeshLambertMaterial({color:22800}));return t.add(e),e.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,.5*t.geometry.parameters.height,0)),t.castShadow=!0,e.castShadow=!0,Object.assign(t,{flip:function(t){var e=t.delay,n=void 0===e?200:e,i=this;new o.default.Tween({t:0}).to({t:1},200+200*random()).delay(n).onStart(function(){this.by=i.position.y,this.dy=8+8*random()}).onUpdate(function(){i.position.y=this.by+sin(this.t*PI)*this.dy}).start()}})};e.default=r},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=Class.create({init:function(t){this.els=[],this.groups=[],this.group_id=0,this.in_group_num=t.in_group_num||10,this.once=!1,this.far=t.far||3e3,this.allow_far=this.far,this.handle_each_child=t.handle_each_child},reset:function(t){this.once=!1,this.group_id=0,t&&this.els.forEach(function(e){return t.remove(e)}),this.els=[],this.groups=[],this.allow_far=this.far},elForThatArea:function(t,e,n){var o=this;return this.group_id++,[].concat(i(Array(this.in_group_num))).map(function(i,r){var a=o.handle_each_child.call(o,t,e,n);return n.add(a),o.els.push(a),a.group_id=o.group_id,a})},render:function(t,e){var n=this.groups,i=this.far;this.in_group_num;this.once||(this.once=!0,this.groups=[this.elForThatArea(0,-i,e),this.elForThatArea(0,i,e),this.elForThatArea(i,i,e)]);var t=t.x;if(0!=t&&t>this.allow_far){this.allow_far+=i;this.groups.shift().forEach(function(t){e.remove(t)}),this.groups.push(this.elForThatArea(t+i,i,e)),console.log("%c creat and destory groups!!","font-size:30px;",n)}}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r={stading:"stading",flipping:"flipping",holding:"holding",died:"died",outside:"outside"},a=function(){var t=(new THREE.Color).setRGB(.1,.1,.1),e=new THREE.Mesh(new THREE.CylinderGeometry(1.5,2,10,32),new THREE.MeshPhongMaterial({color:t,transparent:!0}));e.material.opacity=1,e.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,.5*e.geometry.parameters.height,0)),e.castShadow=!0,e.receiveShadow=!0;var n=new THREE.Mesh(new THREE.SphereGeometry(2),new THREE.MeshPhongMaterial({color:t,transparent:!0}));return e.add(n),n.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,1.333*e.geometry.parameters.height,0)),n.castShadow=!0,n.receiveShadow=!0,Object.assign(e,{holding:function(){this.status=r.holding;this.hold_coefficient+=.007,this.hold_coefficient>1&&(this.hold_coefficient=1),this.scale.y=.5*(1-this.hold_coefficient)+.5},start:function(){this.rotation.z=0,this.status=r.stading},canHolding:function(){return this.status===r.stading||this.status===r.holding},canFlipping:function(){return this.status===r.holding},_controlVertex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,-t,0)),n.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,-t,0)),this.position.y+=t},onFilpEnd:function(t){this._handle_flip_end=t},fewFlip:function(t){var e=t.onUpdate,n=t.po_increments,i=this;return new Promise(function(t){!function n(o){i.hold_coefficient=.5,i.flipping(function(t){e&&e(t)},123,200,600,!1).then(function(e){if(1===o)return t();n(--o)})}(n.length)})},isOutside:function(){return this.status===r.outside},isStading:function(){return this.status===r.stading},isDied:function(){return this.status===r.died},fallDown:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.rz,i=void 0===n?30:n,a=e.delay,s=void 0===a?333:a,c=this;return this.status=r.died,new Promise(function(e){new o.default.Tween({y:t.position.y,rz:0}).delay(s).easing(o.default.Easing.Cubic.In).to({y:0,rz:i},1234).onUpdate(function(){c.position.y=this.y,c.rotation.z=this.rz}).onComplete(function(){e()}).start()})},stopToTop:function(){this.tw_top1.stop(),this.tw_top2.stop()},flipToTop:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.height,i=e.onUpdate,r=e.onPer,a=e.delay,s=void 0===a?0:a,c=e.onFlipStart,u=e.flip_dur,l=void 0===u?3333:u,d=this;return new Promise(function(e){t.status="fliptotop";var a=new o.default.Tween({scale:1}).to({scale:.6},566).delay(s).onUpdate(function(){d.scale.y=this.scale}),u=new o.default.Tween({y:t.position.y,t:0}).to({y:n,t:1},l).easing(o.default.Easing.Cubic.Out).onStart(function(){this.once=!1,d.scale.y=1,c&&c()}).onUpdate(function(){d.position.y=this.y,i&&i(d.position),this.t>=.2&&!this.once&&(this.once=!0,r&&r(d.position))}).onComplete(function(){e()});t.tw_top1=a,t.tw_top2=u,a.chain(u),a.start()})},flipping:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:26,a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:433,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.scale.y=1;var u=this,l=.5*e.geometry.parameters.height,d={x:150*this.hold_coefficient,y:this.position.y};return c&&(this.status=r.flipping),new Promise(function(h){new o.default.Tween({t:0}).to({t:1},s).delay(n).onStart(function(){u._controlVertex(l),this.bef={x:u.position.x,y:u.position.y}}).onUpdate(function(){e.rotation.z=this.t*-PI*2;var n=this.bef.x+this.t*d.x,o=this.bef.y+sin(this.t*PI)*i;u.position.x=n,u.position.y=o,t&&t(u.position)}).onComplete(function(){u._controlVertex(-l),c&&(u.status=r.stading),u._handle_flip_end&&u._handle_flip_end(u),h()}).start(),a.hold_coefficient=0})},hold_coefficient:0,status:r.outside})};e.default=a},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t){var e=t.map,n=new THREE.Mesh(new THREE.CylinderGeometry(9,12,230),new THREE.MeshPhongMaterial({color:(new THREE.Color).setRGB(.2,.2,.2)})),o=[].concat(i(Array(4))).map(function(){return new THREE.MeshPhongMaterial({color:2960685,specular:20560})}),a=document.createElement("canvas");a.width=400,a.height=300,a.getContext("2d").drawImage(e.image,0,0,a.width,a.height);var e=new THREE.Texture(a);o.push(new THREE.MeshPhongMaterial({map:e,specular:16777215}),new THREE.MeshPhongMaterial({map:e,specular:16777215}));var s=new THREE.Mesh(new THREE.BoxGeometry(400,300,30),o);return s.material[s.material.length-1].map.needsUpdate=!0,s.material[s.material.length-2].map.needsUpdate=!0,n.add(s),s.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,n.geometry.parameters.height+.5*s.geometry.parameters.height,0)),n.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,.5*n.geometry.parameters.height,0)),n.visible=!1,n.castShadow=!0,n.receiveShadow=!0,s.castShadow=!0,s.receiveShadow=!0,Object.assign(n,{fallDown:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.delay,i=void 0===e?2e3:e,o=this;new r.default.Tween({y:1e3}).to({y:0},1555).easing(r.default.Easing.Cubic.In).delay(i).onStart(function(){n.visible=!0}).onUpdate(function(){n.position.y=this.y}).onComplete(function(){o._handle_fall&&o._handle_fall()}).start()},onFallEnd:function(t){this._handle_fall=t},comeOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.delay,i=void 0===e?3e3:e;new r.default.Tween({y:-1*(n.geometry.parameters.height+s.geometry.parameters.height)}).to({y:0},2233).easing(r.default.Easing.Cubic.In).delay(i).onStart(function(){n.visible=!0}).onUpdate(function(){n.position.y=this.y}).onComplete(function(){}).start()}})};e.default=a},function(t,e,n){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(t){var e,i,o;t=t||{},e=void 0!==t.parent?t.parent:document.body,i=void 0!==t.id?t.id:"oldie",o=n.getWebGLErrorMessage(),o.id=i,e.appendChild(o)}};"object"===e(t)&&(t.exports=n)}).call(e,n(21)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){t.exports=n.p+"img/boardx2.jpg?36f3a9"},function(t,e,n){t.exports=n.p+"img/boardx3.jpg?04b4a2"},function(t,e,n){t.exports=n.p+"img/boardx6.jpg?aaed81"},function(t,e,n){t.exports=n.p+"img/boardx.jpg?289455"},function(t,e,n){t.exports=n.p+"img/board3.jpg?7404bd"},function(t,e,n){t.exports=n.p+"img/boarda.jpg?8bf35c"},function(t,e,n){t.exports=n.p+"img/boardb.jpg?408335"},function(t,e,n){t.exports=n.p+"img/boarde.jpg?f63c97"},function(t,e,n){t.exports=n.p+"img/board1.jpg?f940a0"},function(t,e,n){t.exports=n.p+"img/boardf.jpg?d22713"},function(t,e,n){t.exports=n.p+"img/boardg.jpg?401849"},function(t,e,n){t.exports=n.p+"img/game-board1.jpg?0aa61c"},function(t,e,n){t.exports=n.p+"img/game-board2.jpg?e1f51a"},function(t,e,n){t.exports=n.p+"img/floor2.jpg?19d062"},function(t,e,n){t.exports=n.p+"img/score-1.png?019c2a"},function(t,e,n){t.exports=n.p+"img/score-2.png?6b6233"}])});
//# sourceMappingURL=main1-50db96.js.map